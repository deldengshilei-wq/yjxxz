System.register("chunks:///_virtual/AccountDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts"],(function(t){var n,c,u;return{setters:[function(t){n=t.createClass},function(t){c=t.cclegacy},function(t){u=t.default}],execute:function(){c._RF.push({},"56571cMhLND46Yc9tWTSOZN","AccountDataManager",void 0);t("AccountConfig",(function(){this.account="",this.captcha=0,this.description="",this.union="",this.stage=0}));var o=t("AccountInfo",(function(){this.union="",this.stage=0})),i=t("default",function(){function t(){}return t.LoadConfig=function(){var t=this;u.OnLoad("configs/account",(function(n){t.test_accounts=n}))},t.Init=function(t){this.account=new o,this.account.union=t,this.account.stage=this.GetStage(t),console.log(this.account)},t.GetStage=function(t){var n=this.test_accounts.find((function(n){return n.union==t}));return n?n.stage:0},n(t,null,[{key:"union",get:function(){return this.account?this.account.union:"user=="}},{key:"stage",get:function(){return this.account?this.account.stage:0}}]),t}());i.test_accounts=[],i.account=null,c._RF.pop()}}}));

System.register("chunks:///_virtual/ActivityLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiManager.ts","./SignInDataManager.ts","./GiftDataManager.ts"],(function(e){var t,i,n,r,a,o,c,u,l,s,f,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Node,u=e.Widget,l=e.Component},function(e){s=e.default},function(e){f=e.default},function(e){p=e.default}],execute:function(){var y,h,g,b,d,v,w,m,_;a._RF.push({},"c34c7xau41PP6hpPp/dwMxN","ActivityLayer",void 0);var z=o.ccclass,D=o.property;e("default",(y=z("ActivityLayer"),h=D(c),g=D(c),b=D(c),y((w=t((v=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"sign_in",w,r(t)),n(t,"newbie",m,r(t)),n(t,"journery",_,r(t)),t}i(t,e);var a=t.prototype;return a.Init=function(){this.getComponent(u).top=s.instance.widescreen?160:80},a.SetVisiable=function(e){this.node.active=e,e&&this.Refresh()},a.Refresh=function(){this.sign_in.active=!f.instance.isComplete(),this.newbie.active=p.instance.CheckNewbie(),this.journery.active=!0},t}(l)).prototype,"sign_in",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(v.prototype,"newbie",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(v.prototype,"journery",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/AcvanceInstructionPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./HeroDataManager.ts","./UiManager.ts","./GameOption.ts"],(function(t){var n,i,e,r,o,s,c,a,u,l,f,h,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.UITransform,a=t.RichText},function(t){u=t.default},function(t){l=t.default},function(t){f=t.default},function(t){h=t.default,p=t.AudioClips}],execute:function(){var g,d,v,y,P,b,C;o._RF.push({},"72f33SpDNNDq62v2033pHph","AcvanceInstructionPage",void 0);var A=s.ccclass,D=s.property;t("default",(g=A("AcvanceInstructionPage"),d=D(c),v=D([a]),g((b=n((P=function(t){function n(){for(var n,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=t.call.apply(t,[this].concat(o))||this,e(n,"content",b,r(n)),e(n,"instructions",C,r(n)),n.id=0,n}i(n,t);var o=n.prototype;return o.Show=function(){t.prototype.Show.call(this),this.id=this.args,this.Refresh(),this.OnEntrance(this.content)},o.Refresh=function(){for(var t=l.instance.GetAdvanceConfigs(this.id),n=[],i=0;i<t.length;++i)2==t[i].unlock&&n.push(t[i]);for(var e=0;e<this.instructions.length;++e)e<n.length?(this.instructions[e].string="进阶 +"+n[e].stage+" "+n[e].description,this.instructions[e].node.active=!0):this.instructions[e].node.active=!1},o.ClickOnClose=function(){var t=this;this.is_action||(h.instance.PlaySound(p.CLICK),this.OnExit(this.content,(function(){f.instance.ClosePage(t)})))},n}(u)).prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(P.prototype,"instructions",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=P))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/AgeLimitPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GameOption.ts"],(function(t){var e,n,i,r,o,a,c,u,l,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.UITransform,u=t.game},function(t){l=t.default},function(t){s=t.default,p=t.AudioClips}],execute:function(){var f,g,h,d,y;o._RF.push({},"5a0f0kQ4IZFU5uKW7wOigCb","AgeLimitPage",void 0);var m=a.ccclass,v=a.property;t("default",(f=m("AgeLimitPage"),g=v(c),f((y=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"content",y,r(e)),e}n(e,t);var o=e.prototype;return o.Show=function(){t.prototype.Show.call(this),this.OnEntrance(this.content)},o.ClickOnConfirm=function(){this.is_action||(s.instance.PlaySound(p.CLICK),u.end())},e}(l)).prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/AgeTipsPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GameOption.ts"],(function(t){var n,e,i,o,r,a,c,s,l,u,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.UITransform},function(t){s=t.default},function(t){l=t.default},function(t){u=t.default,p=t.AudioClips}],execute:function(){var f,h,g,d,y;r._RF.push({},"4fa0clWdQFDoZTl+N5NcqW8","AgeTipsPage",void 0);var v=a.ccclass,P=a.property;t("default",(f=v("AgeTipsPage"),h=P(c),f((y=n((d=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"content",y,o(n)),n}e(n,t);var r=n.prototype;return r.Show=function(){t.prototype.Show.call(this),this.OnEntrance(this.content)},r.ClickOnClose=function(){var t=this;u.instance.PlaySound(p.CLICK),this.is_action||this.OnExit(this.content,(function(){l.instance.ClosePage(t)}))},n}(s)).prototype,"content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/AndroidBridge.ts",["cc","./GameDatas.ts"],(function(t){var a,l,i,o;return{setters:[function(t){a=t.cclegacy,l=t.sys,i=t.native},function(t){o=t.GameDatas}],execute:function(){a._RF.push({},"aee31XfXDJOEZrt5EUhjoLX","AndroidBridge",void 0);var n=t("default",function(){function t(){}return t.init=function(a){switch(this.channel=a,this.channel){case o.AndroidChannels.Google:default:this.path="com/cocos/game/MainActivity"}console.log(this.path),this.path&&(window.native=t)},t.Login=function(t){l.platform===l.Platform.ANDROID&&i&&(console.log(this.path),this.anti_addiction_callback=t,i.reflection.callStaticMethod(this.path,"Login","()V"))},t.LogOut=function(){l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"LogOut","()V")},t.SubmitPayResult=function(t){l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"SubmitPayResult","(I)V",t)},t.CheckPayLimit=function(t,a){l.platform===l.Platform.ANDROID&&i&&(this.pay_limit_callback=a,i.reflection.callStaticMethod(this.path,"CheckPayLimit","(I)V",t))},t.OnCheckPayLimitCallback=function(t){this.pay_limit_callback&&this.pay_limit_callback(t)},t.OnAntiAddictionCallback=function(t,a){this.anti_addiction_callback&&this.anti_addiction_callback(t,a)},t.showAppOpenAd=function(t){console.log("show App OpenAd",t),l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"showAppOpenAd","(Ljava/lang/String;)V",t)},t.showVideo=function(t,a){console.log("PlatformNative showVideo",t),l.platform===l.Platform.ANDROID&&(this.video_callback=a,i&&i.reflection.callStaticMethod(this.path,"showVideo","(Ljava/lang/String;)V",t))},t.onVideoCallback=function(t){var a=1==t;this.video_callback&&(this.video_callback(a),this.video_callback=null)},t.showInterstitial=function(){console.log("PlatformNative -> show interstitial"),l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"showInterstitial","()V")},t.showFullScreenVideo=function(t,a){console.log("PlatformNative -> show full screen video",t),this.full_screen_callback=a,l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"showFullScreenVideo","(Ljava/lang/String;)V",t)},t.onFullScreenCallback=function(t){var a=1==t;this.full_screen_callback&&(this.full_screen_callback(a),this.full_screen_callback=null)},t.showBanner=function(t){console.log("PlatformNative -> show banner",t),l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"showBanner","(Ljava/lang/String;)V",t)},t.hideBanner=function(){console.log("PlatformNative -> hide banner"),l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"hideBanner","()V")},t.sendEvent=function(t,a){console.log("PlatformNative -> send event",t,a),l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"sendEvent","(Ljava/lang/String;Ljava/lang/String;)V",t,a)},t.showWebView=function(){console.log("PlatformNative -> show web view"),l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"showWebView","()V")},t.onExit=function(){l.platform===l.Platform.ANDROID&&i&&i.reflection.callStaticMethod(this.path,"onExit","()V")},t}());n.channel=o.AndroidChannels.Default,n.video_callback=null,n.full_screen_callback=null,n.anti_addiction_callback=void 0,n.pay_limit_callback=null,n.path="",a._RF.pop()}}}));

System.register("chunks:///_virtual/ArrowBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseBullet.ts"],(function(t){var a,i,s,e,o,h,n;return{setters:[function(t){a=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,e=t.Rect,o=t.Vec2,h=t.Vec3},function(t){n=t.default}],execute:function(){var r;i._RF.push({},"29d7d5jPGpLarYpS9xA04qI","ArrowBullet",void 0);var c=s.ccclass;s.property,t("default",c("ArrowBullet")(r=function(t){function i(){for(var a,i=arguments.length,s=new Array(i),e=0;e<i;e++)s[e]=arguments[e];return(a=t.call.apply(t,[this].concat(s))||this)._midPos=null,a._a=0,a._b=0,a._c=0,a._per=0,a}a(i,t);var s=i.prototype;return s.InitData=function(){this.move_speed=300;var t=this.node.position.x,a=this.node.position.y;this.attack_rect=new e(t-50,a-5,100,10);var i=this.attack_data.targetPos.y-a,s=new o(.5*(this.attack_data.targetPos.x+t),.5*(this.attack_data.targetPos.y+a));this._midPos=new o(s.x,i>0?this.attack_data.targetPos.y+100:a+100);var h=(t-this.attack_data.targetPos.x)*(this._midPos.y-a)-(this._midPos.x-t)*(a-this.attack_data.targetPos.y),n=(t-this.attack_data.targetPos.x)*(this.attack_data.targetPos.x-this._midPos.x)*(this._midPos.x-t);this._a=-h/n;var r=a-this.attack_data.targetPos.y-this._a*(Math.pow(t,2)-Math.pow(this.attack_data.targetPos.x,2)),c=t-this.attack_data.targetPos.x;this._b=r/c,this._c=a-this._a*Math.pow(t,2)-this._b*t,this.SetDirection(this._dic.x<0?-1:1),this._per=Math.max(Math.abs(c)/300,.5)},s.InitAngle=function(){this.node.angle=this._dic.x>0?225:-45},s.CheckMove=function(t){if(!this.move_end){if(this.node.position.y<=this.fight_manager._minAreaY)this.move_end=!0;else{var a=this.node.position.x+this._dic.x*this.move_speed*t*this._per,i=this._a*Math.pow(a,2)+this._b*a+this._c;this.node.position=new h(a,i,0);var s=2*this._a*this.node.position.x+this._b,e=Math.atan(s)/Math.PI*180+180;this.node.angle=e}this.CheckAttack()}},i}(n))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/AttributeHandle.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c7e423BPJdEY7XqHAoNu3Zb","AttributeHandle",void 0);t("Attribute",(function(){this.attack_type=0,this.attack_speed=0,this.move_speed=0,this.attack=[],this.defense=[],this.hp=[],this.accuracy=[],this.dodge=[],this.crit=[],this.crit_reduce=[],this.crit_damage=0,this.attack_distance="",this.behit_distance=""})),t("default",function(){function t(){}var e=t.prototype;return e.GetLevelAddition=function(t,e){return t[0]+e*t[1]*t[2]},e.GetStageAddition=function(t,e){return 0},e.GetHp=function(t,e,i){void 0===i&&(i=0);var r=this.GetLevelAddition(t.hp,e);i>0&&(r+=this.GetStageAddition("hp",i));return Math.floor(r)},e.GetAttack=function(t,e,i){void 0===i&&(i=0);var r=this.GetLevelAddition(t.attack,e);i>0&&(r+=this.GetStageAddition("attack",i));return Math.floor(r)},e.GetDefense=function(t,e,i){void 0===i&&(i=0);var r=this.GetLevelAddition(t.defense,e);i>0&&(r+=this.GetStageAddition("defense",i));return Math.floor(r)},e.GetAccuracy=function(t,e){var i=this.GetLevelAddition(t.accuracy,e);return Math.floor(i)},e.GetDodge=function(t,e){var i=this.GetLevelAddition(t.dodge,e);return Math.floor(i)},e.GetCrit=function(t,e){var i=this.GetLevelAddition(t.crit,e);return Math.floor(i)},e.GetCritReduce=function(t,e){var i=this.GetLevelAddition(t.crit_reduce,e);return Math.floor(i)},e.GetPower=function(t,e,i){void 0===i&&(i=0);var r=this.GetHp(t,e,i);r*=.2;var n=this.GetAttack(t,e,i);n*=.2;var o=this.GetDefense(t,e,i);o*=.2;var a=this.GetAccuracy(t,e);a*=.1;var c=this.GetDodge(t,e);c*=.1;var d=this.GetCrit(t,e);d*=.1;var s=this.GetCritReduce(t,e);return s*=.1,Math.floor(r+n+o+a+c+d+s)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/BaseBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,a,s,h,c,r,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,h=t.sp,c=t.Rect,r=t.Vec3,d=t.Component}],execute:function(){var l,u,p,_,v;a._RF.push({},"07d08XRZPJG9rdB1E4idXYC","BaseBullet",void 0);var f=s.ccclass,k=s.property;t("default",(l=f("BaseBullet"),u=k(h.Skeleton),l((v=e((_=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"skeleton",v,o(e)),e.move_speed=0,e.attack_data=null,e._dic=null,e.move_end=!1,e.pool_id=0,e.attack_rect=null,e.fight_manager=null,e.direction=void 0,e.init_position=null,e.need_remove=!1,e}i(e,t);var a=e.prototype;return a.init=function(t,e,i,n){this.fight_manager=t,this.attack_data=e,this.pool_id=i,this.move_end=!1,this.move_speed=400,this.init_position=this.node.position,this._dic=this.attack_data.targetPos.sub(this.node.position).normalizeSelf(),this.InitData(),this.SetNeedRemove(!1),this.InitSpine(n.res_bullet),this.InitAngle(),20104!=n.id&&2104!=n.id||(this.move_speed=800)},a.InitData=function(){this.attack_rect=new c(this.node.position.x-25,this.node.position.y-25,50,50)},a.InitAngle=function(){var t=this.GetAngleToPoint(this.node.position,this.attack_data.targetPos);this.node.angle=t+90+180*(this._dic.x>0?1:0)},a.InitSpine=function(t){},a.SetSpineAnimation=function(t,e){void 0===e&&(e=!1),this.skeleton&&this.skeleton.setAnimation(0,t,e)},a.SetDirection=function(t,e){if(void 0===e&&(e=!1),t!=this.direction||e){this.direction=t;var i=this.node.scale.y*t;this.node.scale=new r(i,this.node.scale.y,1)}},a.UpdateBullet=function(t){this.CheckMove(t)},a.GetId=function(){return this.pool_id},a.GetAttckRect=function(){return this.attack_rect.x=this.node.position.x-.5*this.attack_rect.width,this.attack_rect.y=this.node.position.y-.5*this.attack_rect.height,this.attack_rect},a.getType=function(){return this.attack_data.objData.type},a.getNeedRemove=function(){return this.need_remove},a.SetNeedRemove=function(t){this.need_remove=t,this.node.active=!t},a.CheckMove=function(t){if(!this.move_end){var e=this.node.position.x-this.attack_data.targetPos.x,i=this.node.position.y-this.attack_data.targetPos.y,n=Math.abs(e),o=Math.abs(i),a=this.node.position.x,s=this.node.position.y;n>5?a+=this._dic.x*this.move_speed*t:a=this.attack_data.targetPos.x,o>5?s+=this._dic.y*this.move_speed*t:s=this.attack_data.targetPos.y,this.node.position=new r(a,s,0),this.node.position.equals(this.attack_data.targetPos)&&(this.move_end=!0),this.SetDirection(e<0?-1:1),this.CheckAttack()}},a.CheckAttack=function(){if(!this.need_remove){var t=this.fight_manager.getBulletCollider(this);t&&(t.behit(this.attack_data.objData),this.SetNeedRemove(!0)),this.move_end&&this.SetNeedRemove(!0)}},a.GetAngleToPoint=function(t,e){var i,n=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=e.x-t.x,a=Math.abs(o)/n;return i=e.x<t.x?e.y<t.y?360-Math.asin(a)/Math.PI*180:Math.asin(a)/Math.PI*180+180:e.y<t.y?Math.asin(a)/Math.PI*180:180-Math.asin(a)/Math.PI*180,isNaN(i)&&(i=0),i},e}(d)).prototype,"skeleton",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=_))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/BasePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,i=t.tween,o=t.Component}],execute:function(){var c;n._RF.push({},"c0a34b1salDBIoR8bcI5eDa","BasePanel",void 0);var r=a.ccclass;a.property,t("default",r("BasePanel")(c=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).panel_opacity=null,e}e(n,t);var a=n.prototype;return a.Init=function(){this.node.active=!1},a.SetVisiable=function(t){this.node.active=t,t&&this.Refresh()},a.Refresh=function(){},a.OnEntrance=function(){this.panel_opacity.opacity=0,this.SetVisiable(!0),i(this.panel_opacity).to(.2,{opacity:255}).start()},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./UiManager.ts"],(function(t){var e,n,i,a,o,r,l,u,c,s,p,f,v,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Label,u=t.Sprite,c=t.Node,s=t.Layout,p=t.Widget,f=t.Component},function(t){v=t.default},function(t){b=t.default}],execute:function(){var w,h,_,d,g,y,m,z,I,L,R,S,B,C,A;o._RF.push({},"dd0289YGLtOAqufGXqIXNvC","BattleInfo",void 0);var D=r.ccclass,F=r.property;t("default",(w=D("BattleInfo"),h=F(l),_=F(u),d=F(c),g=F(u),y=F(s),m=F([c]),w((L=e((I=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"countdown",L,a(e)),i(e,"hp_bar",R,a(e)),i(e,"wave_node",S,a(e)),i(e,"wave_bar",B,a(e)),i(e,"layout",C,a(e)),i(e,"wave_points",A,a(e)),e.total_waves=0,e}n(e,t);var o=e.prototype;return o.Init=function(){this.getComponent(p).top=b.instance.widescreen?60:10},o.Activate=function(){this.hp_bar.fillRange=1,this.wave_node.active=!1},o.InitWaves=function(t){this.total_waves=t;for(var e=0;e<this.wave_points.length;++e)this.wave_points[e].active=e<t-1;this.wave_bar.fillRange=1/this.total_waves,this.wave_node.active=!0,this.layout.updateLayout()},o.SetWaveProgress=function(t){this.wave_bar.fillRange=t/this.total_waves},o.SetCountdown=function(t){this.countdown.string=v.FormateTime(t,!1)},o.SetHeroHp=function(t){this.hp_bar.fillRange=t},e}(f)).prototype,"countdown",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(I.prototype,"hp_bar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(I.prototype,"wave_node",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(I.prototype,"wave_bar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(I.prototype,"layout",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(I.prototype,"wave_points",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=I))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/BattlePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./BattleScene.ts","./PartnerBattleItem.ts","./PartnerDataManager.ts","./BattleSkillButton.ts","./UiManager.ts","./GameDatas.ts","./Joystick.ts","./BattleInfo.ts","./JourneyDataManager.ts","./GuideDataManager.ts","./LevelDataManager.ts","./GameOption.ts"],(function(t){var e,i,n,a,s,o,r,u,c,l,h,f,d,p,G,S,_,y,g,v,b,w,m,P,k,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,r=t._decorator,u=t.Node,c=t.Label,l=t.UITransform,h=t.Input,f=t.Vec2},function(t){d=t.default},function(t){p=t.default},function(t){G=t.default},function(t){S=t.default},function(t){_=t.default},function(t){y=t.default},function(t){g=t.GameDatas},function(t){v=t.default},function(t){b=t.default},function(t){w=t.default},function(t){m=t.default},function(t){P=t.default},function(t){k=t.default,T=t.AudioClips}],execute:function(){var C,I,B,D,M,z,E,H,L,O,U,A,j,R,x,F,J;o._RF.push({},"4b0b1W5kQFLrbzsuKJwLKUC","BattlePage",void 0);var N=r.ccclass,K=r.property;t("default",(C=N("BattlePage"),I=K(b),B=K(u),D=K(v),M=K(u),z=K(_),E=K(c),H=K([G]),C((U=e((O=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,n(e,"info",U,a(e)),n(e,"touch_layer",A,a(e)),n(e,"joy_stick",j,a(e)),n(e,"forward_sign",R,a(e)),n(e,"skill_button",x,a(e)),n(e,"tips",F,a(e)),n(e,"partner_items",J,a(e)),e.transform=null,e.is_touch=!1,e.touch_point=void 0,e}i(e,t);var o=e.prototype;return o.Init=function(){this.transform=this.getComponent(l),this.info.Init(),this.joy_stick.Init(),this.touch_layer.on(h.EventType.TOUCH_START,this.onTouch,this),this.touch_layer.on(h.EventType.TOUCH_END,this.onTouch,this),this.touch_layer.on(h.EventType.TOUCH_MOVE,this.onTouch,this),this.touch_layer.on(h.EventType.TOUCH_CANCEL,this.onTouch,this)},o.onTouch=function(t){switch(t.type){case"touch-start":if(!this.is_touch){this.is_touch=!0,this.touch_point=t.getUILocation(),console.log(this.touch_point);var e=this.touch_point.x-.5*this.transform.width,i=this.touch_point.y-.5*this.transform.height;this.joy_stick.Activate(e,i)}break;case"touch-move":if(this.is_touch){var n=t.getUILocation(),a=f.distance(this.touch_point,n),s=Math.atan2(n.y-this.touch_point.y,n.x-this.touch_point.x);this.joy_stick.SetPositon(s,a),p.instance.BattleHero.SetDirection(s),p.instance.BattleHero.SetMovable(!0)}break;case"touch-end":case"touch-cancel":this.is_touch&&(this.is_touch=!1,this.joy_stick.OnHide(),p.instance.BattleHero.SetMovable(!1))}},o.Show=function(){t.prototype.Show.call(this),this.info.Activate(),this.skill_button.Init(),this.forward_sign.active=!1,this.SetPartners(),this.Refresh(),p.instance.BindingPage(this)},o.Refresh=function(){this.CheckGuide()},o.SetForwardSign=function(t){this.forward_sign.active=t},o.CheckGuide=function(){var t=P.instance.statistics.stage,e=P.instance.statistics.chapter,i=P.instance.statistics.index;if(1==t&&1==e&&1==i&&1==m.instance.GetGuideStep(5)){var n=m.instance.GetGuide(5,2);m.instance.SetGuide(5,!1),y.instance.ShowGuide(n),p.instance.SetPause(!0)}},o.OnBattleStart=function(t,e,i){var n=this,a=!1;if(1==t&&1==e)if(1==i)0==m.instance.GetGuideStep(5)&&(setTimeout((function(){var t=m.instance.GetGuide(5,1);y.instance.ShowGuide(t,n.partner_items[0].node)}),100),a=!0);else if(2==i){if(0==m.instance.GetGuideStep(6)){var s=m.instance.GetGuide(6,1);m.instance.SetGuide(6,!1),y.instance.ShowGuide(s),a=!0}}else if(3==i){if(0==m.instance.GetGuideStep(7)){var o=m.instance.GetGuide(7,1);m.instance.SetGuide(7,!1),y.instance.ShowGuide(o),a=!0}}else if(4==i){if(0==m.instance.GetGuideStep(8)){var r=m.instance.GetGuide(8,1);m.instance.SetGuide(8,!1),y.instance.ShowGuide(r),a=!0}}else if(9==i){if(0==m.instance.GetGuideStep(9)){var u=m.instance.GetGuide(9,1);m.instance.SetGuide(9,!1),y.instance.ShowGuide(u),a=!0}}else if(10==i){if(0==m.instance.GetGuideStep(10)){var c=m.instance.GetGuide(10,1);m.instance.SetGuide(10,!1),y.instance.ShowGuide(c),a=!0}}return a},o.OnMeetBoss=function(){if(2==m.instance.GetGuideStep(5)){var t=m.instance.GetGuide(5,3);return m.instance.SetGuide(5,!1),y.instance.ShowGuide(t),!0}return!1},o.SetSkillCharge=function(t){if((this.skill_button.SetCharge(t),t>=100)&&3==m.instance.GetGuideStep(5)){var e=m.instance.GetGuide(5,4);y.instance.ShowGuide(e,this.skill_button.node),p.instance.SetPause(!0)}},o.SetPartners=function(){var t=S.instance.Selection;t.length>0&&w.instance.SetJourney(g.JourneyType.PARTNER_FIGHTING,1);for(var e=0;e<this.partner_items.length;++e)e<t.length?0==t[e]?this.partner_items[e].node.active=!1:this.partner_items[e].Init(this,t[e]):this.partner_items[e].node.active=!1},o.SetPartnerTips=function(t,e){this.tips.string="可上阵伙伴数量："+t+"/"+e},o.ClickOnPause=function(){k.instance.PlaySound(T.CLICK),y.instance.ShowPopup(g.Pages.PAUSE_PAGE),p.instance.SetPause(!0)},s(e,[{key:"Info",get:function(){return this.info}}]),e}(d)).prototype,"info",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(O.prototype,"touch_layer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(O.prototype,"joy_stick",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(O.prototype,"forward_sign",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(O.prototype,"skill_button",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(O.prototype,"tips",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(O.prototype,"partner_items",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=O))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/BattlePassDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts"],(function(t){var a,n,s,e;return{setters:[function(t){a=t.createClass},function(t){n=t.cclegacy},function(t){s=t.default},function(t){e=t.GameDatas}],execute:function(){n._RF.push({},"fa75bFfIs5IBZC3Nn+shqDA","BattlePassDataManager",void 0);t("BattlePassConfig",(function(){this.level=1,this.rewards=""}));var i=t("BattlePassData",(function(){this.level=0,this.status=0}));t("BattlePassDataManager",function(){function t(){this.configs=[],this.datas=[]}var n=t.prototype;return n.LoadConfig=function(){var t=this;s.OnLoad("configs/battle_pass",(function(a){t.configs=a}))},n.InitData=function(){this.datas=s.OnRead(e.Constant.BATTLE_PASS_DATA),this.datas||(this.datas=[])},n.GetData=function(t){return this.datas.find((function(a){return a.level==t}))},n.OnReceive=function(t,a){var n=this.GetData(t);n||((n=new i).level=t,this.datas.push(n)),n.status=a,this.Save()},n.Save=function(){s.OnSave(e.Constant.BATTLE_PASS_DATA,this.datas)},a(t,[{key:"Configs",get:function(){return this.configs}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/BattlePassItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GenericItem.ts","./BattlePassDataManager.ts","./UserDataManager.ts","./ItemDataProxy.ts","./UiManager.ts","./GameOption.ts"],(function(e){var t,i,a,n,s,r,c,l,o,u,v,h,f,d,g,p,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,c=e.Node,l=e.Label,o=e.Button,u=e.Component},function(e){v=e.default},function(e){h=e.BattlePassDataManager},function(e){f=e.default},function(e){d=e.default},function(e){g=e.default},function(e){p=e.default,_=e.AudioClips}],execute:function(){var b,w,m,P,y,I,k,R,z,B,D,S,O,V,C;s._RF.push({},"17f7572uipPnZSbbiB65sb0","BattlePassItem",void 0);var L=r.ccclass,M=r.property;e("default",(b=L("BattlePassItem"),w=M(c),m=M(l),P=M(o),y=M(c),I=M([c]),k=M([v]),b((B=t((z=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,a(t,"lock_node",B,n(t)),a(t,"unlock_level",D,n(t)),a(t,"receive",S,n(t)),a(t,"lock_tag",O,n(t)),a(t,"receive_tags",V,n(t)),a(t,"reward_items",C,n(t)),t.config=null,t.data=null,t}i(t,e);var s=t.prototype;return s.Init=function(e){this.config=e,this.SetRewards(),this.node.active=!0},s.SetRewards=function(){for(var e=d.instance.OnParse(this.config.rewards),t=0;t<this.reward_items.length;++t)this.reward_items[t].Init(e[t])},s.Refresh=function(){this.data=h.instance.GetData(this.config.level);var e=f.instance.Level;this.config.level<=e?(this.data&&0!=this.data.status?1==this.data.status?(this.receive_tags[0].active=!1,this.receive_tags[1].active=f.instance.VIP,this.lock_tag.active=!f.instance.VIP,this.receive.node.active=f.instance.VIP):2==this.data.status&&(this.receive_tags[0].active=!1,this.receive_tags[1].active=!1,this.lock_tag.active=!1,this.receive.node.active=!1):(this.receive_tags[0].active=!0,this.receive_tags[1].active=f.instance.VIP,this.lock_tag.active=!f.instance.VIP,this.receive.node.active=!0),this.lock_node.active=!1):(this.receive_tags[0].active=!1,this.receive_tags[1].active=!1,this.unlock_level.string=this.config.level+"级解锁",this.lock_node.active=!0,this.receive.node.active=!1)},s.ClickOnReceive=function(){if(p.instance.PlaySound(_.CLICK),!this.data||2!=this.data.status){var e,t=d.instance.OnParse(this.config.rewards);if(f.instance.VIP)if(this.data&&0!=this.data.status)1==this.data.status&&(h.instance.OnReceive(this.config.level,2),g.instance.ShowRewards(t[1]));else h.instance.OnReceive(this.config.level,2),(e=g.instance).ShowRewards.apply(e,t);else this.data&&0!=this.data.status||(h.instance.OnReceive(this.config.level,1),g.instance.ShowRewards(t[0]));this.Refresh()}},t}(u)).prototype,"lock_node",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"unlock_level",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(z.prototype,"receive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(z.prototype,"lock_tag",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"receive_tags",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(z.prototype,"reward_items",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=z))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/BattlePassPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./BattlePassItem.ts","./BattlePassDataManager.ts","./UiManager.ts","./UserDataManager.ts","./GameOption.ts","./PlatformProxy.ts","./GameDatas.ts"],(function(t){var e,n,a,i,s,r,o,c,u,l,f,h,p,P,g,m,d,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,o=t.Node,c=t.instantiate,u=t.Vec3},function(t){l=t.default},function(t){f=t.default},function(t){h=t.BattlePassDataManager},function(t){p=t.default},function(t){P=t.default},function(t){g=t.default,m=t.AudioClips},function(t){d=t.default},function(t){v=t.GameDatas}],execute:function(){var y,I,b,C,B,D,_,R,w;s._RF.push({},"fa930AATjxDL7bVkiuY76o7","BattlePassPage",void 0);var S=r.ccclass,A=r.property;t("default",(y=S("BattlePassPage"),I=A(o),b=A(o),C=A([o]),y((_=e((D=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,a(e,"root",_,i(e)),a(e,"template",R,i(e)),a(e,"purchase_status",w,i(e)),e.items=[],e}n(e,t);var s=e.prototype;return s.Init=function(){this.template.active=!1,this.InitItems()},s.InitItems=function(){for(var t=h.instance.Configs;this.items.length<t.length;){var e=c(this.template);e.setParent(this.root),e.position=u.ZERO,e.scale=u.ONE;var n=e.getComponent(f);this.items.push(n)}this.items.forEach((function(e,n){n<t.length?e.Init(t[n]):e.node.active=!1}))},s.Show=function(){t.prototype.Show.call(this),this.Refresh()},s.Refresh=function(){this.purchase_status[0].active=P.instance.VIP,this.purchase_status[1].active=!P.instance.VIP;for(var t=0;t<this.items.length;++t)this.items[t].Refresh()},s.ClickOnBuyVip=function(){g.instance.PlaySound(m.CLICK);var t=this,e={dec:"是否花费 68 元， 解锁高级征途路？",price:68,cbPurchse:function(){d.OnPurchase(68,(function(){P.instance.VIP=!0,t.Refresh()}))}};p.instance.ShowPopup(v.Pages.PURCHASE_PAGE,e)},s.ClickOnBack=function(){g.instance.PlaySound(m.CLICK),p.instance.ClosePage(this)},e}(l)).prototype,"root",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(D.prototype,"template",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(D.prototype,"purchase_status",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=D))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/BattleScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Hero.ts","./Partner.ts","./GameUtility.ts","./Monster.ts","./LevelDataManager.ts","./SceneBackground.ts","./LevelMapManager.ts","./UiManager.ts","./GameDatas.ts","./GameOption.ts"],(function(t){var e,i,n,s,o,a,r,h,l,c,u,p,d,f,g,v,m,w,_,P,S,b,x,C,I,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,r=t._decorator,h=t.Camera,l=t.Node,c=t.UITransform,u=t.Vec3,p=t.Vec2,d=t.instantiate,f=t.tween,g=t.Component},function(t){v=t.default},function(t){m=t.default},function(t){w=t.default,_=t.CustomBundles},function(t){P=t.default},function(t){S=t.default},function(t){b=t.default},function(t){x=t.default},function(t){C=t.default},function(t){I=t.GameDatas},function(t){y=t.default}],execute:function(){var T,O,A,B,M,E,k,G,R,N,L,F,H,D;a._RF.push({},"e3791B3CAJGdpAuA4r16DTR","BattleScene",void 0);var z=r.ccclass,U=r.property;t("default",(T=z("BattleScene"),O=U(h),A=U(l),B=U(c),M=U(v),E=U([l]),T(((D=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"camera",R,s(e)),n(e,"background_root",N,s(e)),n(e,"battle_field",L,s(e)),n(e,"hero",F,s(e)),n(e,"templates",H,s(e)),e.map=null,e.monsters=[],e.partners=[],e.pool=[],e.level_config=null,e.status=I.BattleStatus.PREPARATION,e.pause=!1,e.countdown=0,e.preparing=0,e.total_wave=0,e.wave=1,e.hero_position_x=0,e.page=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){null==e.instance&&(e.instance=this),y.instance.PlayMusic("battlebgm"),this.status=I.BattleStatus.PREPARATION,this.preparing=0;for(var t=0;t<this.templates.length;t++){this.templates[t].active=!1}this.camera.node.position=new u(0,0,0),this.battle_field.node.position=new u(0,this.battle_field.node.position.y,0),this.InitDatas(),this.InitBackground(),this.InitMap()},a.InitDatas=function(){S.instance.statistics.rebirth=0,console.log(S.instance.statistics);var t=S.instance.statistics.stage,e=S.instance.statistics.chapter,i=S.instance.statistics.index;this.level_config=S.instance.GetLevelConfig(t,e,i),this.pause=!1,this.wave=1,this.countdown=this.level_config.time,this.CheckPreparationCompleted()},a.OnTransition=function(t){for(var e=0;e<this.partners.length;++e)this.partners[e].OnFollow(t);t>0&&this.hero.node.worldPosition.x>this.battle_field.node.worldPosition.x&&(this.camera.node.position=new u(this.camera.node.position.x+t,0,0),this.battle_field.node.position=new u(this.camera.node.position.x,this.battle_field.node.position.y,0))},a.OnTransitionSingle=function(t){t>0&&this.hero.node.worldPosition.x>this.battle_field.node.worldPosition.x&&(this.camera.node.position=new u(this.camera.node.position.x+t,0,0),this.battle_field.node.position=new u(this.camera.node.position.x,this.battle_field.node.position.y,0))},a.InitBackground=function(){var t=this;w.LoadAsset(_.UI,"battle/background_"+this.level_config.map,(function(e){var i=e.getComponent(b);i.node.setParent(t.background_root),i.node.scale=u.ONE,i.Init(),t.CheckPreparationCompleted()}))},a.InitMap=function(){var t=this;x.LoadLevelMap(this.level_config.chapter,this.level_config.index,(function(e){t.map=e,t.total_wave=x.CalculateTotalWaves(t.map.enemys),t.CreateEnemyWave(),t.CheckPreparationCompleted()}))},a.CheckPreparationCompleted=function(){this.preparing++,this.preparing>=4&&this.Activate()},a.onDestroy=function(){e.instance=null},a.BindingPage=function(t){this.page=t,this.CheckPreparationCompleted()},a.Activate=function(){this.page.Info.SetCountdown(this.countdown),this.page.SetPartnerTips(0,this.level_config.partners),this.page.Info.InitWaves(this.total_wave),this.hero.Init(this),this.hero.node.worldPosition=new u(this.battle_field.node.worldPosition.x-200,this.battle_field.node.worldPosition.y,0),this.hero_position_x=this.hero.node.position.x,this.hero.node.active=!0,this.status=I.BattleStatus.FIGHTING;for(var t=0;t<this.monsters.length;++t)this.monsters[t].Activate();this.page.OnBattleStart(this.level_config.stage,this.level_config.chapter,this.level_config.index)&&this.SetPause(!0)},a.OnRebirth=function(){this.hero.OnRebirth(),this.status=I.BattleStatus.FIGHTING,this.SetPause(!1)},a.CreateEnemyWave=function(){var t=this,e=this.map.enemys.filter((function(e){return e.turn===t.wave}));this.FixEnemyPosition(e)},a.FixEnemyPosition=function(t){for(var e=Number.MAX_VALUE,i=Number.MIN_VALUE,n=720*(this.wave-.5),s=0;s<t.length;++s)t[s].posx<e&&(e=t[s].posx),t[s].posx>i&&(i=t[s].posx);for(var o=0;o<t.length;++o){var a=n-(i-e)/2+(t[o].posx-e);this.CreateMonster(t[o].id,a,t[o].posy)}},a.OnComplete=function(t,e){void 0===e&&(e=!1),this.status=I.BattleStatus.COMPLETE,this.SetPause(!0),t?(S.instance.statistics.timer=this.level_config.time-this.countdown,S.instance.statistics.hp=this.hero.HP,C.instance.ShowPopup(I.Pages.VICTORY_PAGE)):e&&S.instance.statistics.rebirth<1?C.instance.ShowPopup(I.Pages.REBIRTH_PAGE):C.instance.ShowPopup(I.Pages.FAILURE_PAGE)},a.SetPause=function(t){this.pause=t,this.hero.OnPause(t);for(var e=0;e<this.monsters.length;++e)this.monsters[e].OnPause(t);for(var i=0;i<this.partners.length;++i)this.partners[i].OnPause(t)},a.SetInField=function(t,e){var i=this.battle_field.node.position,n=this.battle_field.width/2,s=this.battle_field.height/2;return t<i.x-n&&(t=i.x-n),t>i.x+n&&(t=i.x+n),e<i.y-s&&(e=i.y-s),e>i.y+s&&(e=i.y+s),new p(t,e)},a.SetHeroSkillEnergy=function(t){var e=this.hero.SetSkillEnergy(t);this.page.SetSkillCharge(e)},a.CheckPartnerCount=function(){return this.partners.length<this.level_config.partners},a.CreatePartner=function(t,e){for(var i=null,n=0;n<this.pool.length;++n)if(this.pool[n]instanceof m&&this.pool[n].Status==I.CharacterStatus.RECYCLE){i=this.partners[n];break}if(!i){var s=d(this.templates[0]);(i=s.getComponent(m)).node.setParent(this.node),this.pool.push(i)}i.Init(this,t),i.node.scale=new u(1,1,1),this.partners.push(i),this.page.SetPartnerTips(this.partners.length,this.level_config.partners),i.node.worldPosition=this.camera.screenToWorld(e);var o=new u(this.battle_field.node.worldPosition.x-100-100*Math.random(),this.battle_field.node.worldPosition.y+480*Math.random()-240,0);f(i.node).to(.5,{worldPosition:o}).call((function(){i.Activate()})).start()},a.CreateMonster=function(t,e,i){for(var n=null,s=0;s<this.pool.length;++s)if(this.pool[s]instanceof P&&this.pool[s].Status==I.CharacterStatus.RECYCLE){n=this.pool[s];break}n||((n=d(this.templates[1]).getComponent(P)).node.setParent(this.node),n.node.scale=u.ONE,this.pool.push(n));n.Init(this,t,this.level_config.monster_level),this.monsters.push(n),n.node.worldPosition=new u(e,i,0)},a.GetMonsters=function(t,e){for(var i=[],n=0;n<this.monsters.length;++n){if(this.monsters[n].IsActivate)if(e)u.distance(t,this.monsters[n].node.worldPosition)<e&&i.push(this.monsters[n]);else i.push(this.monsters[n])}return i},a.RecyclePartner=function(t){var e=this.partners.indexOf(t);e>=0&&this.partners.splice(e,1),this.page.SetPartnerTips(this.partners.length,this.level_config.partners)},a.RecycleMonster=function(t){var e=this.monsters.indexOf(t);e<0||(this.monsters.splice(e,1),this.monsters.length<=0&&(this.wave<this.total_wave?(this.hero_position_x=this.hero.node.position.x,this.status=I.BattleStatus.TRANSITION,this.page.SetForwardSign(!0),this.wave++,this.page.Info.SetWaveProgress(this.wave),this.CreateEnemyWave(),console.log("本波次敌人消灭,下一波为 -> ",this.wave)):this.OnComplete(!0)))},a.GetMonsterTatget=function(t){for(var e=0,i=null,n=0;n<this.partners.length;++n){var s=u.distance(t.worldPosition,this.partners[n].node.worldPosition);(0==e||e>s)&&(e=s,i=this.partners[n])}return i||this.hero},a.GetPartnerTatget=function(t){for(var e=0,i=null,n=0;n<this.monsters.length;++n){var s=u.distance(t.worldPosition,this.monsters[n].node.worldPosition);(0==e||e>s)&&(e=s,i=this.monsters[n])}return i},a.GetHeroTransitionOffset=function(){return this.hero.node.position.x-this.hero_position_x},a.update=function(t){if(!this.pause)if(this.status!=I.BattleStatus.FIGHTING&&this.status!=I.BattleStatus.TRANSITION||(this.countdown-=t,this.countdown<=0&&(this.countdown=0,this.OnComplete(!1)),this.page.Info.SetCountdown(this.countdown)),this.status==I.BattleStatus.TRANSITION){if(this.camera.node.position.x<720*(this.wave-1)){var e=this.hero.node.position.x-this.hero_position_x;this.hero_position_x=this.hero.node.position.x,this.OnTransition(e)}this.checkMonsterActive()}else if(this.status==I.BattleStatus.FIGHTING&&this.camera.node.position.x<720*(this.wave-1)){var i=this.hero.node.position.x-this.hero_position_x;this.hero_position_x=this.hero.node.position.x,this.OnTransitionSingle(i)}},a.checkMonsterActive=function(){for(var t=!1,e=0;e<this.monsters.length;++e)u.distance(this.monsters[e].node.worldPosition,this.hero.node.worldPosition)<150&&(t=!0);if(t){this.status=I.BattleStatus.FIGHTING,this.OnMeetBoss(),this.page.SetForwardSign(!1);for(var i=0;i<this.monsters.length;++i)this.monsters[i].Activate()}},a.OnMeetBoss=function(){1==this.level_config.stage&&1==this.level_config.chapter&&1==this.level_config.index&&(3==this.wave&&this.page.OnMeetBoss()&&this.SetPause(!0))},o(e,[{key:"BattleHero",get:function(){return this.hero}},{key:"Status",get:function(){return this.status}}]),e}(g)).instance=null,R=e((G=D).prototype,"camera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(G.prototype,"background_root",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(G.prototype,"battle_field",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(G.prototype,"hero",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(G.prototype,"templates",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=G))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/BattleSkillButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleScene.ts","./HeroDataManager.ts","./SkillDataManager.ts","./GameUtility.ts","./DataProxy.ts","./GuideDataManager.ts","./UiManager.ts","./GameOption.ts"],(function(e){var t,i,n,a,r,l,o,c,s,u,h,f,g,p,d,b,S,y,_,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Sprite,c=e.Node,s=e.Label,u=e.Component},function(e){h=e.default},function(e){f=e.default},function(e){g=e.default},function(e){p=e.default,d=e.CustomBundles},function(e){b=e.default},function(e){S=e.default},function(e){y=e.default},function(e){_=e.default,v=e.AudioClips}],execute:function(){var C,G,k,m,B,D,R,z,w,H,M;r._RF.push({},"2903bo8f6ZGeZOUxAp5YJoZ","BattleSkillButton",void 0);var P=l.ccclass,A=l.property;e("default",(C=P("BattleSkillButton"),G=A(o),k=A(o),m=A(c),B=A(s),C((z=t((R=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"icon",z,a(t)),n(t,"charge_sprite",w,a(t)),n(t,"charge_node",H,a(t)),n(t,"charge_label",M,a(t)),t.s=void 0,t.charge=0,t}i(t,e);var r=t.prototype;return r.Init=function(){this.charge=0;var e=f.instance.GetActivateHero(),t=f.instance.GetHeroConfig(e.id),i=b.ConvertString(t.skills,","),n=g.instance.GetSkillConfig(i[0],1);p.SetSpriteFrame(this.icon,d.UI,"icons/skills/"+n.icon),this.Refresh()},r.Refresh=function(){this.charge_sprite.fillRange=this.charge/100,this.charge_node.active=this.charge<100,this.charge_label.string=this.charge+"%"},r.SetCharge=function(e){this.charge=e,this.charge>100&&(this.charge=100),this.Refresh()},r.OnClick=function(){(_.instance.PlaySound(v.CLICK),this.charge<100)||(3==S.instance.GetGuideStep(5)&&(S.instance.SetGuide(5,!1),y.instance.CloseGuide(),h.instance.SetPause(!1)),h.instance.BattleHero.OnSkill(),this.charge=0,this.Refresh())},t}(u)).prototype,"icon",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(R.prototype,"charge_sprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(R.prototype,"charge_node",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(R.prototype,"charge_label",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/BattleStatistics.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"57652EoWxhGqZKs1QX9hmyE","BattleStatistics",void 0);t("default",(function(){this.stage=0,this.chapter=0,this.index=0,this.timer=0,this.hp=0,this.skill=0,this.rebirth=0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/BloodBar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,o,a,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Sprite,c=t.Component}],execute:function(){var s,u,p,f,h;o._RF.push({},"4f84d3K6wlHhKQcrtE+UGQs","BloodBar",void 0);var d=a.ccclass,v=a.property;t("default",(s=d("BloodBar"),u=v(l),s((h=e((f=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"bar",h,n(e)),e.total=0,e}r(e,t);var o=e.prototype;return o.Init=function(t){this.total=t,this.bar.fillRange=1,this.node.active=!0},o.SetValue=function(t){this.bar.fillRange=t/this.total},o.Hide=function(){this.node.active=!1},e}(c)).prototype,"bar",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/BountyMissionItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MissionDataManager.ts","./GenericItem.ts","./GameUtility.ts","./ItemDataProxy.ts","./UiManager.ts","./GameDatas.ts","./JourneyDataManager.ts","./GameOption.ts"],(function(t){var e,i,n,a,r,s,o,c,u,l,f,p,d,h,m,g,v,y,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.Label,c=t.Node,u=t.Button,l=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){d=t.default},function(t){h=t.default},function(t){m=t.default},function(t){g=t.GameDatas},function(t){v=t.default},function(t){y=t.default,b=t.AudioClips}],execute:function(){var w,O,I,M,P,B,C,D,z,S,T,A,R,x,G,_,L,F,J;r._RF.push({},"0ffb2aJgZRPv4OEYeXAPyK0","BountyMissionItem",void 0);var k=s.ccclass,E=s.property;t("default",(w=k("BountyMissionItem"),O=E(o),I=E(o),M=E(c),P=E(o),B=E(u),C=E(u),D=E(c),z=E([p]),w((A=e((T=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"title",A,a(e)),n(e,"description",R,a(e)),n(e,"executing",x,a(e)),n(e,"timer",G,a(e)),n(e,"acceptance",_,a(e)),n(e,"receive",L,a(e)),n(e,"complete",F,a(e)),n(e,"rewards",J,a(e)),e.panel=null,e.data=null,e.config=null,e}i(e,t);var r=e.prototype;return r.Init=function(t){this.panel=t},r.Activate=function(t){if(this.data=t,this.config=f.instance.GetBountyMissionConfig(t.id),this.title.string=this.config.description,1==t.complete)this.complete.active=!0,this.acceptance.node.active=!1,this.description.node.active=!1,this.executing.active=!1,this.receive.node.active=!1;else{if(this.complete.active=!1,this.acceptance.node.active=0==t.status,this.description.node.active=0==t.status,0==t.status&&(this.description.string="耗时："+this.config.time+"分钟"),1==t.status){var e=(new Date).getTime()-t.time;e/6e4<this.config.time?this.timer.string=d.FormateTime(e):f.instance.OnBountyTimeOut(t)}this.executing.active=1==t.status,this.receive.node.active=2==t.status}this.SetRewards(),this.node.active=!0},r.SetRewards=function(){for(var t=h.instance.OnParse(this.config.reward),e=0;e<this.rewards.length;++e)e<t.length?this.rewards[e].Init(t[e]):this.rewards[e].node.active=!1},r.ClickOnActivate=function(){0==this.data.status&&(y.instance.PlaySound(b.CLICK),f.instance.ActivateBountyMission(this.data),this.panel.Refresh())},r.ClickOnClaim=function(){if(2==this.data.status){y.instance.PlaySound(b.CLICK),v.instance.SetJourney(g.JourneyType.BOUNTY_MISSION,1),f.instance.OnBountyMissionComplete(this.data);var t=h.instance.OnParse(this.config.reward);m.instance.ShowPopup(g.Pages.REWARD_PAGE,t)}},r.update=function(t){if(0==this.data.complete&&1==this.data.status){var e=6e4*this.config.time-((new Date).getTime()-this.data.time);this.timer.string=d.FormateTime(e),e<=0&&(this.receive.node.active=!0,this.executing.active=!1,f.instance.OnBountyTimeOut(this.data))}},e}(l)).prototype,"title",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(T.prototype,"description",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(T.prototype,"executing",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(T.prototype,"timer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(T.prototype,"acceptance",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(T.prototype,"receive",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(T.prototype,"complete",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(T.prototype,"rewards",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=T))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/BountyMissionPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MissionPanel.ts","./BountyMissionItem.ts","./MissionDataManager.ts","./UserDataManager.ts","./UiManager.ts","./GameOption.ts","./GameDatas.ts","./MainPage.ts","./BattlePage.ts"],(function(t){var e,n,i,s,a,o,r,l,u,c,f,h,p,m,S,g,M,R,d,y,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,r=t.Node,l=t.Label,u=t.instantiate,c=t.Vec3},function(t){f=t.default},function(t){h=t.default},function(t){p=t.default},function(t){m=t.default},function(t){S=t.default,g=t.PageLayers},function(t){M=t.default,R=t.AudioClips},function(t){d=t.GameDatas},function(t){y=t.default},function(t){I=t.default}],execute:function(){var C,v,b,E,_,D,O,P,F;a._RF.push({},"5aab7dnPtlFao8SSLxwhLA6","BountyMissionPanel",void 0);var N=o.ccclass,w=o.property;t("default",(C=N("BountyMissionPanel"),v=w(r),b=w(r),E=w(l),C((O=e((D=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"root",O,s(e)),i(e,"template",P,s(e)),e.items=[],i(e,"labelFresh",F,s(e)),e.missions=[],e}n(e,t);var a=e.prototype;return a.Init=function(e){t.prototype.Init.call(this,e),this.template.active=!1},a.SetVisiable=function(t){this.node.active=t,t&&(this.missions=p.instance.CheckBountyMission(),this.Refresh())},a.Refresh=function(){var t=this,e=this.GetRefreshCount();for(this.labelFresh.string="20 刷新("+(d.Constant.MISSION_REFRESH_MAX-e)+"/"+d.Constant.MISSION_REFRESH_MAX+")",this.missions.sort((function(t,e){return t.complete!=e.complete?e.complete-t.complete:t.status!=e.status?e.status-t.status:t.id-e.id}));this.items.length<this.missions.length;)this.CreateItem();this.items.forEach((function(e,n){n<t.missions.length?e.Activate(t.missions[n]):e.node.active=!1}))},a.CreateItem=function(){var t=u(this.template);t.setParent(this.root),t.position=c.ZERO,t.scale=c.ONE;var e=t.getComponent(h);e.Init(this),this.items.push(e)},a.ClickOnReset=function(){if(this.GetRefreshCount()>=d.Constant.MISSION_REFRESH_MAX)S.instance.ShowMessage("今日刷新次数已用完");else if(M.instance.PlaySound(R.CLICK),m.instance.Diamond<20)S.instance.ShowMessage("勾玉数量不足");else{m.instance.Diamond-=20,p.instance.ResetBountyMission(),this.OnMissionRefresh(),this.Refresh();var t=S.instance.GetActivePage(g.BASE);(t instanceof y||t instanceof I)&&t.Refresh()}},a.GetRefreshCount=function(){var t=(new Date).toLocaleDateString(),e=Number(localStorage.getItem(d.Constant.MISSION_REFRESH_COUNT+t));return e=null!=e?e:0},a.OnMissionRefresh=function(){var t=(new Date).toLocaleDateString(),e=this.GetRefreshCount();e+=1,localStorage.setItem(d.Constant.MISSION_REFRESH_COUNT+t,e.toString())},e}(f)).prototype,"root",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(D.prototype,"template",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"labelFresh",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=D))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/BytedanceProcessor.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"bcdf02UvIFIuJTu8Splccp6","BytedanceProcessor",void 0);n("BytedanceProcessor",function(){function n(n){this._info=null,this._banner=null,this.parameters=null,this._info=tt.getSystemInfoSync(),this.parameters=n}var t=n.prototype;return t.showToast=function(n,t,o){},t.showLoading=function(){},t.hideLoading=function(){},t.ShowVideo=function(n,t){},t.ShowInterstitial=function(n,t){},t.ShowBanner=function(n){},t.HideBanner=function(){},t.ShowGide=function(n,t,o){},t.HideGide=function(){},t.ShowCustom=function(n,t){},t.OnCustom=function(){},t.HideCustom=function(){},t.OnRecorderScreen=function(n){},t.ShareRecordScreen=function(n){},t.OnVibrateShort=function(n){},t.OnVibrateLong=function(){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelDataManager.ts","./UiManager.ts","./GameDatas.ts","./GuideDataManager.ts","./GameOption.ts"],(function(t){var e,a,n,i,s,r,o,l,u,c,p,h,d,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,o=t.Node,l=t.Label,u=t.Component},function(t){c=t.default},function(t){p=t.default},function(t){h=t.GameDatas},function(t){d=t.default},function(t){f=t.default,g=t.AudioClips}],execute:function(){var C,G,m,y,b,v,_,L,S;s._RF.push({},"ca97dP3GfpGrZChoH7J2lQG","ChapterItem",void 0);var D=r.ccclass,I=r.property;t("default",(C=D("ChapterItem"),G=I(o),m=I(l),y=I([o]),C((_=e((v=function(t){function e(){for(var e,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"selected_tag",_,i(e)),n(e,"status",L,i(e)),n(e,"state_nodes",S,i(e)),e.page=null,e.data=null,e}a(e,t);var s=e.prototype;return s.Init=function(t,e){this.page=t,this.data=e,this.Refresh()},s.Refresh=function(){if(this.data){var t=c.instance.GetChapterCompletedAmount(this.data),e=c.instance.GetLevelConfigs(this.data.stage,this.data.chapter);t<e.length?this.status.string="完成"+t+"/"+e.length:this.status.string="已完成"}else this.status.string="未解锁"},s.OnClick=function(){if(f.instance.PlaySound(g.CLICK),null!=this.data){2==d.instance.GetGuideStep(4)&&(d.instance.SetGuide(4,!1),p.instance.CloseGuide());var t={stage:this.data.stage,chapter:this.data.chapter};p.instance.ShowSecondaryPage(h.Pages.LEVEL_SELECTION_PAGE,t)}else p.instance.ShowMessage("关卡还没有解锁")},e}(u)).prototype,"selected_tag",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"status",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(v.prototype,"state_nodes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/Character.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./GameDatas.ts","./BloodBar.ts","./HitEffect.ts"],(function(t){var e,n,a,i,c,o,r,s,u,l,f,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,c=t.createClass},function(t){o=t.cclegacy,r=t._decorator,s=t.sp,u=t.Component},function(t){l=t.default},function(t){f=t.GameDatas},function(t){p=t.default},function(t){h=t.default}],execute:function(){var d,b,k,C,y,m,v,A,S;o._RF.push({},"f7c3eMI3TNKDKdW9CMOgssn","Character",void 0);var g=r.ccclass,O=r.property;t("default",(d=g("Character"),b=O(s.Skeleton),k=O(p),C=O(h),d((v=e((m=function(t){function e(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c))||this,a(e,"skeleton",v,i(e)),a(e,"blood_bar",A,i(e)),a(e,"hit_effect",S,i(e)),e.check_dispatcher=void 0,e.pause=!1,e.hp=0,e.attack=0,e.defence=0,e.attack_distance=0,e.attackable=!0,e.status=f.CharacterStatus.DIE,e}n(e,t);var o=e.prototype;return o.InitSpine=function(t,e){this.skeleton.setCompleteListener(this.OnAnimationComplete.bind(this)),l.SetSkeletonData(this.skeleton,t,(function(){e&&e()}))},o.OnAnimationComplete=function(t){},o.Activate=function(){this.pause=!1,this.attackable=!0,this.status=f.CharacterStatus.ACTIVATE},o.OnIdle=function(){},o.OnAttack=function(){},o.SetAttackFeedback=function(){},o.OnHit=function(t){},o.OnDie=function(){},o.OnRecycle=function(){console.log("OnRecycle"),this.status=f.CharacterStatus.RECYCLE,this.node.active=!1},o.OnPause=function(t){this.pause=t,this.skeleton.timeScale=t?0:1},c(e,[{key:"IsActivate",get:function(){return this.status==f.CharacterStatus.ACTIVATE}}]),e}(u)).prototype,"skeleton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(m.prototype,"blood_bar",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(m.prototype,"hit_effect",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,n,a;return{setters:[function(r){e=r.inheritsLoose},function(r){t=r.cclegacy,n=r._decorator,a=r.Component}],execute:function(){var c;t._RF.push({},"c4e6cYR5FxM2YN9XLxNB6P+","CharacterManager",void 0);var o=n.ccclass;n.property,r("default",o("CharacterManager")(c=function(r){function t(){return r.apply(this,arguments)||this}return e(t,r),t}(a))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/CommodityItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CurrencyItem.ts","./ItemDataProxy.ts","./GameUtility.ts","./DataProxy.ts","./UiManager.ts","./UserDataManager.ts","./MissionDataManager.ts","./GameDatas.ts","./GameOption.ts","./PlatformProxy.ts"],(function(i){var t,n,e,o,a,r,c,s,u,l,f,m,p,y,d,h,g,P,S,b,D;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,r=i._decorator,c=i.Label,s=i.Sprite,u=i.Component},function(i){l=i.default},function(i){f=i.default},function(i){m=i.default,p=i.CustomBundles},function(i){y=i.default},function(i){d=i.default},function(i){h=i.default},function(i){g=i.default},function(i){P=i.GameDatas},function(i){S=i.default,b=i.AudioClips},function(i){D=i.default}],execute:function(){var w,C,v,M,R,E,I,A,U,_,G,z,H;a._RF.push({},"2750c1+EMxNY7LwDpgDBDJf","CommodityItem",void 0);var O=r.ccclass,T=r.property;i("default",(w=O("CommodityItem"),C=T(c),v=T(s),M=T(s),R=T(c),E=T(l),w((U=t((A=function(i){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=i.call.apply(i,[this].concat(a))||this,e(t,"title",U,o(t)),e(t,"frame",_,o(t)),e(t,"icon",G,o(t)),e(t,"count",z,o(t)),e(t,"currency",H,o(t)),t.config=null,t.commodity=null,t}n(t,i);var a=t.prototype;return a.Init=function(i){this.config=i,this.title.string=this.config.name;var t="icons/store/"+this.config.icon;m.SetSpriteFrame(this.icon,p.UI,t);var n=f.instance.OnParse(this.config.items);this.commodity=n[0];var e="icons/items/frame_0"+f.instance.GetItemConfig(this.commodity.id).quality;m.SetSpriteFrame(this.frame,p.UI,e),this.currency.Init(this.config.price),this.count.string=m.FormateNumber(this.commodity.count)},a.ClickOnPurchase=function(){S.instance.PlaySound(b.CLICK);var i=y.ConvertString(this.config.price,",");if(console.log(this.config.price),1==i[0]){if(h.instance.Golds<i[1])return void d.instance.ShowMessage("金币数量不足");var t=this,n={dec:"是否花费 "+i[1]+" 勾玉， 购买 "+t.config.name+"？",price:i[1],cbPurchse:function(){h.instance.Golds-=i[1],g.instance.SetDailyMission(P.DailyMissionType.STORE_PURCHASE,1),d.instance.ShowRewards(t.commodity)}};d.instance.ShowPopup(P.Pages.PURCHASE_PAGE,n)}else if(2==i[0]){if(h.instance.Diamond<i[1])return void d.instance.ShowMessage("钻石数量不足");var e=this,o={dec:"是否花费 "+i[1]+" 勾玉， 购买 "+e.config.name+"？",price:i[1],cbPurchse:function(){h.instance.Diamond-=i[1],g.instance.SetDailyMission(P.DailyMissionType.STORE_PURCHASE,1),d.instance.ShowRewards(e.commodity)}};d.instance.ShowPopup(P.Pages.PURCHASE_PAGE,o)}else if(3==i[0]){var a=this,r={dec:"是否花费 "+i[1]+" 元， 购买 "+a.config.name+"？",price:i[1],cbPurchse:function(){D.OnPurchase(i[1],(function(){g.instance.SetDailyMission(P.DailyMissionType.STORE_PURCHASE,1),d.instance.ShowRewards(a.commodity)}))}};d.instance.ShowPopup(P.Pages.PURCHASE_PAGE,r)}},t}(u)).prototype,"title",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(A.prototype,"frame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(A.prototype,"icon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(A.prototype,"count",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(A.prototype,"currency",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=A))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/CoverPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GameUtility.ts","./LoadingProgress.ts","./UiManager.ts","./GameDatas.ts","./GameOption.ts","./EnergyManager.ts","./GlobalData.ts","./AndroidBridge.ts","./PlatformProxy.ts","./AccountDataManager.ts"],(function(n){var t,e,o,i,a,s,l,r,c,u,d,g,f,p,h,P,_,b,S,C,A,m;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,s=n._decorator,l=n.Button,r=n.director,c=n.assetManager},function(n){u=n.default},function(n){d=n.CustomBundles,g=n.default},function(n){f=n.default},function(n){p=n.default},function(n){h=n.GameDatas},function(n){P=n.default,_=n.AudioClips},function(n){b=n.default},function(n){S=n.default},function(n){C=n.default},function(n){A=n.default},function(n){m=n.default}],execute:function(){var O,v,I,y,L,k,B;a._RF.push({},"ae79cLQ3JpEoo/V/F2Zs2L6","CoverPage",void 0);var G=s.ccclass,M=s.property;n("default",(O=G("CoverPage"),v=M(l),I=M(f),O((k=t((L=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a))||this,o(t,"start_button",k,i(t)),o(t,"loading_progress",B,i(t)),t.progress=0,t.bundle_index=0,t.loading=!1,t.scene_loaded=!1,t.total_bundles=2,t}e(t,n);var a=t.prototype;return a.Show=function(){var t=this;n.prototype.Show.call(this),this.bundle_index=0,this.progress=0,this.start_button.node.active=!1,this.loading_progress.SetProgress(0),this.loading_progress.node.active=!0,r.preloadScene("main",(function(){console.log("main scene preloaded"),t.LoadBundles(),t.loading=!0}))},a.LoadBundles=function(){this.total_bundles=1,this.LoadBundle("ui",d.UI),this.LoadBundle("sounds",d.SOUNDS)},a.LoadBundle=function(n,t){var e=this;c.loadBundle(n,(function(o,i){o?console.log(o):(g.SetBundle(t,i),e.bundle_index++,console.log(n+" bundle load complete",e.bundle_index))}))},a.update=function(n){this.loading&&(this.bundle_index<this.total_bundles?(0==this.bundle_index||this.progress<100*this.bundle_index/this.total_bundles)&&(this.progress+=100*n,this.loading_progress.SetProgress(.01*this.progress)):this.progress<100?(this.progress+=100*n,this.loading_progress.SetProgress(.01*this.progress)):this.OnComplete())},a.OnComplete=function(){this.loading=!1,this.progress=100,this.loading_progress.SetProgress(1),this.loading_progress.node.active=!1,this.start_button.node.active=!0},a.ClickOnLogOut=function(){A.platform==h.Platforms.android&&(C.LogOut(),p.instance.ShowMessage("账号退出成功"))},a.ClickOnStart=function(){console.log("ClickOnStart000@@@@@@"),P.instance.PlaySound(_.CLICK),this.start_button.node.active=!1,p.instance.OnWaiting(!0),A.platform==h.Platforms.android?(console.log("ClickOnStart000@@@@@@333"),C.Login(this.OnAntiAddictionCallback)):(console.log("ClickOnStart000@@@@@@111"),m.Init("xFet0zj0IlFMJlqKQpYc+A=="),S.InitDatas(),b.instance.Init(),console.log("ClickOnStart000@@@@@@222"),p.instance.PreloadPage(h.Pages.MAIN_PAGE,(function(){setTimeout((function(){p.instance.OnWaiting(!1),r.loadScene("main",(function(){p.instance.CloseCoverPage(),p.instance.ShowBasePage(h.Pages.MAIN_PAGE)}))}),200)})))},a.OnAntiAddictionCallback=function(n,t){switch(console.log("On AntiAddiction Callback -> "+n+" : "+typeof n),n){case 500:m.Init(t),S.InitDatas(),b.instance.Init(),p.instance.PreloadPage(h.Pages.MAIN_PAGE,(function(){setTimeout((function(){p.instance.OnWaiting(!1),r.loadScene("main",(function(){p.instance.CloseCoverPage(),p.instance.ShowBasePage(h.Pages.MAIN_PAGE)}))}),200)}));break;case 1e3:case 1001:case 1030:case 1050:break;case 1100:p.instance.OnWaiting(!1),p.instance.ShowPopup(h.Pages.AGE_LIMIT_PAGE)}},a.ClickOnAgeTips=function(){P.instance.PlaySound(_.CLICK),p.instance.ShowPopup(h.Pages.AGE_TIPS_PAGE)},t}(u)).prototype,"start_button",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(L.prototype,"loading_progress",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=L))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/CurrencyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameUtility.ts"],(function(t){var e,i,r,n,o,c,a,u,s,l,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.Sprite,u=t.Label,s=t.Component},function(t){l=t.default},function(t){p=t.default,f=t.CustomBundles}],execute:function(){var m,h,y,d,v,b,g;o._RF.push({},"76ac6qAqpVJt70XaDxXO5+K","CurrencyItem",void 0);var I=c.ccclass,S=c.property;t("default",(m=I("CurrencyItem"),h=S(a),y=S(u),m((b=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,r(e,"icon",b,n(e)),r(e,"price",g,n(e)),e}return i(e,t),e.prototype.Init=function(t){var e=l.ConvertString(t,",");1==e[0]?(p.SetSpriteFrame(this.icon,f.UI,"icons/icon_coin"),this.icon.node.active=!0,this.price.string=p.FormateNumber(e[1])):2==e[0]?(p.SetSpriteFrame(this.icon,f.UI,"icons/icon_diamond"),this.icon.node.active=!0,this.price.string=p.FormateNumber(e[1])):3==e[0]&&(this.price.string="￥"+e[1],this.icon.node.active=!1)},e}(s)).prototype,"icon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(v.prototype,"price",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/DailyGiftItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GenericItem.ts","./StoreDataManager.ts","./ItemDataProxy.ts","./UiManager.ts","./GameDatas.ts","./MissionDataManager.ts","./GameOption.ts","./PlatformProxy.ts"],(function(t){var e,i,n,a,s,r,o,c,u,l,f,p,d,h,y,m,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,o=t.Node,c=t.Component},function(t){u=t.default},function(t){l=t.default},function(t){f=t.default},function(t){p=t.default},function(t){d=t.GameDatas},function(t){h=t.default},function(t){y=t.default,m=t.AudioClips},function(t){P=t.default}],execute:function(){var D,v,g,G,_,R,w;s._RF.push({},"c97c2Kz48NG8pNt8QaVVdjs","DailyGiftItem",void 0);var I=r.ccclass,S=r.property;t("default",(D=I("DailyGiftItem"),v=S([o]),g=S([u]),D((R=e((_=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"state_nodes",R,a(e)),n(e,"items",w,a(e)),e.rewards=[],e}i(e,t);var s=e.prototype;return s.Init=function(){var t=l.instance.GetDailyGift();this.rewards=f.instance.OnParse(t.items);for(var e=0;e<this.items.length;++e)this.items[e].Init(this.rewards[e])},s.Refresh=function(){var t=l.instance.Data.daily;this.state_nodes[0].active=0==t,this.state_nodes[1].active=t>0},s.ClickOnPurchase=function(){console.log("消耗现金 -> 1"),y.instance.PlaySound(m.CLICK);var t=this,e={dec:"是否花费 1 元， 购买 \n每日礼包？",price:1,cbPurchse:function(){P.OnPurchase(1,(function(){h.instance.SetDailyMission(d.DailyMissionType.STORE_PURCHASE,1),l.instance.OnDailyGiftReceived(),t.Refresh(),p.instance.ShowPopup(d.Pages.REWARD_PAGE,t.rewards)}))}};p.instance.ShowPopup(d.Pages.PURCHASE_PAGE,e)},e}(c)).prototype,"state_nodes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(_.prototype,"items",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=_))||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/DailyMissionItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MissionDataManager.ts","./GenericItem.ts","./GameUtility.ts","./ItemDataProxy.ts","./UiManager.ts","./GameDatas.ts","./JourneyDataManager.ts","./GameOption.ts"],(function(t){var e,i,n,a,r,s,o,l,u,c,f,p,d,g,h,y,b,m,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.Label,l=t.Sprite,u=t.Node,c=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){d=t.default},function(t){g=t.default},function(t){h=t.default},function(t){y=t.GameDatas},function(t){b=t.default},function(t){m=t.default,v=t.AudioClips}],execute:function(){var _,D,S,w,I,M,G,P,C,R,z,A,L;r._RF.push({},"42f44ZhJSRJ853GGqA8TcrL","DailyMissionItem",void 0);var O=s.ccclass,J=s.property;t("default",(_=O("DailyMissionItem"),D=J(o),S=J(l),w=J(o),I=J(p),M=J([u]),_((C=e((P=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"description",C,a(e)),n(e,"progress_bar",R,a(e)),n(e,"progress_value",z,a(e)),n(e,"reward",A,a(e)),n(e,"state_nodes",L,a(e)),e.panel=null,e.data=null,e.config=null,e}i(e,t);var r=e.prototype;return r.Init=function(t){this.panel=t},r.Activate=function(t){this.data=t,this.config=f.instance.GetDailyMissionConfig(t.id),this.description.string=d.FormatString(this.config.description,this.config.goal),this.progress_bar.fillRange=t.value/this.config.goal,this.progress_value.string=t.value+"/"+this.config.goal,this.SetStatus(),this.SetReward(),this.node.active=!0},r.SetStatus=function(){for(var t=0;t<this.state_nodes.length;t++)this.state_nodes[t].active=t==this.data.status},r.SetReward=function(){var t=g.instance.OnParse(this.config.reward);this.reward.Init(t[0])},r.ClickOnClaim=function(){if(2==this.data.status){m.instance.PlaySound(v.CLICK),f.instance.OnDailyMissionComplete(this.data);var t=g.instance.OnParse(this.config.reward);h.instance.ShowPopup(y.Pages.REWARD_PAGE,t),b.instance.SetJourney(y.JourneyType.DAILY_MISSION,1)}},e}(c)).prototype,"description",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(P.prototype,"progress_bar",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(P.prototype,"progress_value",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(P.prototype,"reward",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"state_nodes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=P))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/DailyMissionPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MissionPanel.ts","./DailyMissionItem.ts","./MissionDataManager.ts","./DailyMissionRewardModule.ts"],(function(t){var e,i,n,s,r,a,o,l,u,c,f,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,o=t.Node,l=t.instantiate,u=t.Vec3},function(t){c=t.default},function(t){f=t.default},function(t){p=t.default},function(t){h=t.default}],execute:function(){var d,m,y,b,M,v,g,D,w;r._RF.push({},"b656fijBSdDdbRxJZME9uuw","DailyMissionPanel",void 0);var I=a.ccclass,R=a.property;t("default",(d=I("DailyMissionPanel"),m=R(h),y=R(o),b=R(o),d((g=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"reward_module",g,s(e)),n(e,"root",D,s(e)),n(e,"template",w,s(e)),e.items=[],e}i(e,t);var r=e.prototype;return r.Init=function(e){t.prototype.Init.call(this,e),this.template.active=!1,this.reward_module.Init()},r.SetVisiable=function(e){t.prototype.SetVisiable.call(this,e),e&&this.Refresh()},r.Refresh=function(){this.reward_module.Refresh(),this.SetMissionItems()},r.SetMissionItems=function(){var t=p.instance.DailyMissions;for(t.sort((function(t,e){return t.status!=e.status?e.status-t.status:t.id-e.id}));this.items.length<t.length;){var e=l(this.template);e.setParent(this.root),e.position=u.ZERO,e.scale=u.ONE;var i=e.getComponent(f);i.Init(this),this.items.push(i)}this.items.forEach((function(e,i){i<t.length?e.Activate(t[i]):e.node.active=!1}))},e}(c)).prototype,"reward_module",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"root",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(v.prototype,"template",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=v))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/DailyMissionRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MissionDataManager.ts","./ItemDataProxy.ts","./UiManager.ts","./GameDatas.ts","./GameOption.ts"],(function(t){var i,e,n,a,s,o,r,l,u,c,f,d,h,g,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.Label,l=t.Sprite,u=t.Component},function(t){c=t.default},function(t){f=t.default},function(t){d=t.default},function(t){h=t.GameDatas},function(t){g=t.default,p=t.AudioClips}],execute:function(){var m,y,w,D,v,R,M;s._RF.push({},"f5616v/cFZJi466fsGoTe93","DailyMissionRewardItem",void 0);var P=o.ccclass,b=o.property;t("default",(m=P("DailyMissionRewardItem"),y=b(r),w=b([l]),m((R=i((v=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,n(i,"goal",R,a(i)),n(i,"images",M,a(i)),i.module=null,i.config=null,i.index=0,i.status=0,i.stars=0,i}e(i,t);var s=i.prototype;return s.Init=function(t,i){this.module=t,this.index=i,this.config=c.instance.GetDailyMissionRewardConfig(i),this.goal.string=this.config.goal.toString()},s.Refresh=function(t){this.stars=t,this.status=c.instance.GetDailyMissionRewardStatus(this.index);for(var i=0;i<this.images.length;++i)this.images[i].node.active=this.status==i},s.OnClick=function(){if(1!=this.status){g.instance.PlaySound(p.CLICK);var t=f.instance.OnParse(this.config.reward);this.stars>=this.config.goal?d.instance.ShowPopup(h.Pages.REWARD_PAGE,t):this.module.ShowStarRewards(this.node.worldPosition,t)}},i}(u)).prototype,"goal",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(v.prototype,"images",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=v))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/DailyMissionRewardModule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GenericItem.ts","./DailyMissionRewardItem.ts","./MissionDataManager.ts"],(function(r){var e,t,a,i,n,s,o,l,u,c,d,f,w;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,a=r.initializerDefineProperty,i=r.assertThisInitialized},function(r){n=r.cclegacy,s=r._decorator,o=r.Sprite,l=r.Label,u=r.Node,c=r.Component},function(r){d=r.default},function(r){f=r.default},function(r){w=r.default}],execute:function(){var h,_,p,b,y,v,g,M,R,D,m,z,I;n._RF.push({},"9f06ewHTVVGjrX6Iy3TafG0","DailyMissionRewardModule",void 0);var S=s.ccclass,G=s.property;r("default",(h=S("DailyMissionRewardModule"),_=G(o),p=G(l),b=G(u),y=G([d]),v=G([f]),h((R=e((M=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n))||this,a(e,"star_bar",R,i(e)),a(e,"star_value",D,i(e)),a(e,"star_reward_node",m,i(e)),a(e,"star_rewards",z,i(e)),a(e,"rewards",I,i(e)),e}t(e,r);var n=e.prototype;return n.Init=function(){this.star_reward_node.active=!1;for(var r=0;r<this.rewards.length;++r)this.rewards[r].Init(this,r)},n.Refresh=function(){var r=w.instance.GetDailyStars(),e=w.instance.DailyMissions.length;this.star_bar.fillRange=r/e,this.star_value.string=r+"/"+e;for(var t=0;t<this.rewards.length;++t)this.rewards[t].Refresh(r)},n.ShowStarRewards=function(r,e){console.log(e);for(var t=0;t<this.star_rewards.length;++t)this.star_rewards[t].Init(e[t]);this.star_reward_node.worldPosition=r,this.star_reward_node.active=!0},n.HideStarRewards=function(){this.star_reward_node.active&&(this.star_reward_node.active=!1)},e}(c)).prototype,"star_bar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(M.prototype,"star_value",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(M.prototype,"star_reward_node",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(M.prototype,"star_rewards",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(M.prototype,"rewards",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=M))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/DataProxy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AccountDataManager.ts"],(function(n){var e,t,r,o;return{setters:[function(n){e=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy,r=n.resources},function(n){o=n.default}],execute:function(){t._RF.push({},"44ddczMNSlIF5Mikp/ReY92","DataProxy",void 0);n("default",function(){function n(){}return n.OnLoad=function(n,e){r.load(n,(function(n,t){if(n)console.log(n);else if(t.json){var r=t.json;e(r)}}))},n.OnSave=function(n,e){var t=o.union+n;console.log(t);var r=JSON.stringify(e);localStorage.setItem(t,r)},n.OnRead=function(n){var e=o.union+n;console.log(e);var t=localStorage.getItem(e);return t?JSON.parse(t):null},n.OnClone=function(n){var e=JSON.stringify(n);return JSON.parse(e)},n.ConvertString=function(n,t){void 0===t&&(t=",");for(var r,o=n.split(t),a=[],i=e(o);!(r=i()).done;){var u=r.value;a.push(parseInt(u))}return a},n.GetWeightArray=function(n,e,t){void 0===t&&(t=!0);var r=[],o=e;t||(o=Math.min(n.length,e));for(var a=[];r.length<o&&!(a.length<=0);){var i=this.GetWeightElement(n);if(i&&(r.push(i),!t)){var u=a.indexOf(i);a.splice(u,1)}}return r},n.GetWeightElement=function(n){for(var e=0,t=0;t<n.length;++t)e+=n[t].weight;for(var r=Math.random()*e,o=0,a=0;a<n.length;++a)if((o+=n[a].weight)>r)return n[a];return null},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Dictionary.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"14d88Z3TPxBt6cySbHIjIpv","Dictionary",void 0);t("default",function(){function t(){this._datas=void 0,this._length=0,this._datas={},this._length=0,this.Add.apply(this,arguments)}var i=t.prototype;return i.Add=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var s=0;s<n.length;++s){var r=n[s].id;this._datas[r]?console.error("存在相同键值：",r):(this._datas[r]=n,this._length++)}},i.Delete=function(t){this._datas[t]?(delete this._datas[t],this._length--):console.error("元素不存在")},i.Find=function(t){return this._datas[t]},i.Filter=function(t){var n=[];for(var i in this._datas)t(this._datas[i])&&n.push(this._datas[i]);return n},i.Clear=function(){this._datas={},this._length=0},i.ToArray=function(){var t=[];for(var n in this._datas)t.push(this._datas[n]);return t},i.ToString=function(){return JSON.stringify(this._datas)},n(t,[{key:"length",get:function(){return this._length}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Dispatcher.ts",["cc","./GameDatas.ts"],(function(t){var i,e;return{setters:[function(t){i=t.cclegacy},function(t){e=t.GameDatas}],execute:function(){i._RF.push({},"a519bv7L9FEcqCdfC3MBoFx","Dispatcher",void 0);t("default",function(){function t(t,i){this.timer=0,this.interval=0,this.action=null,this.timer=0,this.interval=t,this.action=i}var i=t.prototype;return i.dispatche=function(t){void 0===t&&(t=e.delta),this.timer+=t,this.timer>=this.interval&&(this.timer-=this.interval,this.action&&this.action())},i.reset=function(){this.timer=0,this.interval=0,this.action=null},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/EnergyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDatas.ts","./DataProxy.ts","./UserDataManager.ts"],(function(t){var e,n,i,s,a,r,h,o,d,c,u,g,y,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,o=t.director,d=t.game,c=t.Game,u=t.Component},function(t){g=t.GameDatas},function(t){y=t.default},function(t){v=t.default}],execute:function(){var f,l,m,E,_,p;r._RF.push({},"1a7edhUZEBI+Yo4jqDDxdn6","EnergyManager",void 0);var x=h.ccclass,D=h.property,w=t("EnergyData",(function(){this.energy=0,this.sticks=0}));t("default",(f=x("EnergyManager"),l=D({displayName:"恢复时长"}),f(((p=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"recovery",_,s(e)),e.max=50,e.data=null,e.countdown=0,e.energy_events=[],e.timer_events=[],e.status=0,e.is_hide=!1,e}n(e,t);var r=e.prototype;return r.onLoad=function(){e.instance||(e.instance=this),o.addPersistRootNode(this.node),d.on(c.EVENT_SHOW,this.OnEventShow,this),d.on(c.EVENT_HIDE,this.OnEventHide,this),this.Clear()},r.OnEventHide=function(){this.is_hide=!0},r.OnEventShow=function(){this.is_hide=!1,1==this.status&&this.InitDatas()},r.Init=function(){this.status=1,this.is_hide=!1,this.InitDatas()},r.InitDatas=function(){if(this.SetMaxEnergy(),this.data=y.OnRead(g.Constant.GAME_ENERGY),this.data){if(this.data.energy<this.max){var t=(new Date).getTime(),e=Math.floor((t-this.data.sticks)/this.recovery/1e3);this.data.energy+=e,this.data.energy<this.max?this.data.sticks+=e*this.recovery*1e3:(this.data.energy=this.max,this.data.sticks=(new Date).getTime()),y.OnSave(g.Constant.GAME_ENERGY,this.data)}}else this.data=new w,this.data.energy=this.max,this.data.sticks=(new Date).getTime(),y.OnSave(g.Constant.GAME_ENERGY,this.data)},r.SetMaxEnergy=function(){this.max=v.instance.GetMaxEnergy()},r.SetCountdown=function(){if(this.data.energy>=this.max)this.countdown=0;else{var t=(this.max-this.data.energy)*this.recovery*1e3,e=(new Date).getTime();this.countdown=t+this.data.sticks-e}},r.On=function(t,e){"energy"==t?this.energy_events.push(e):"timer"==t&&this.timer_events.push(e)},r.Off=function(t,e){if("energy"==t){var n=this.energy_events.indexOf(e);this.energy_events.splice(n,1)}else if("timer"==t){var i=this.timer_events.indexOf(e);this.timer_events.splice(i,1)}},r.Clear=function(){this.timer_events=[]},r.update=function(t){if(!this.is_hide&&0!=this.status){this.SetCountdown();var e=0;this.countdown>0&&(e=this.countdown%(1e3*this.recovery))-1e3*t<0&&this.OnAddition(1);for(var n=0;n<this.timer_events.length;++n){var i=this.timer_events[n];i&&i(e)}}},r.OnAddition=function(t){console.log("On Energy Addition"),this.data.energy+=t,this.data.energy<this.max?this.data.sticks+=t*this.recovery*1e3:this.data.sticks=(new Date).getTime(),y.OnSave(g.Constant.GAME_ENERGY,this.data);for(var e=0;e<this.energy_events.length;++e){var n=this.energy_events[e];n&&n(this.data.energy)}},r.OnCost=function(t){this.data.energy>=this.max&&this.data.energy-t<this.max&&(this.data.sticks=(new Date).getTime()),this.data.energy-=t,console.log(this.data,t);for(var e=0;e<this.energy_events.length;++e){var n=this.energy_events[e];n&&n(this.data.energy)}y.OnSave(g.Constant.GAME_ENERGY,this.data)},r.onDestroy=function(){this.status=0},a(e,[{key:"energy",get:function(){return this.data?this.data.energy:this.max}},{key:"isFull",get:function(){return this.data.energy>=this.max}}]),e}(u)).instance=void 0,_=e((E=p).prototype,"recovery",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),m=E))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/FailurePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GameDatas.ts","./GameOption.ts"],(function(n){var e,t,a,i,o,r,c,s,u,l,f,p;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,a=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){o=n.cclegacy,r=n._decorator,c=n.UITransform},function(n){s=n.default},function(n){u=n.default},function(n){l=n.GameDatas},function(n){f=n.default,p=n.AudioClips}],execute:function(){var h,g,P,d,y;o._RF.push({},"e890eQMngtB+6wzoQzYKCMj","FailurePage",void 0);var S=r.ccclass,C=r.property;n("default",(h=S("FailurePage"),g=C(c),h((y=e((d=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return e=n.call.apply(n,[this].concat(o))||this,a(e,"content",y,i(e)),e}t(e,n);var o=e.prototype;return o.Show=function(){n.prototype.Show.call(this),f.instance.PlaySound(p.FAILED),this.Refresh(),this.OnEntrance(this.content)},o.Refresh=function(){},o.ClickOnClose=function(){f.instance.PlaySound(p.CLOSE),u.instance.ClearPages(),u.instance.ShowLoading("main",(function(){u.instance.ShowBasePage(l.Pages.MAIN_PAGE,2)}))},o.ClickOnMenu=function(n,e){f.instance.PlaySound(p.CLICK);var t=0;"hero"==e?t=0:"partner"==e&&(t=1),"store"==e&&(t=4),u.instance.ClearPages(),u.instance.ShowLoading("main",(function(){u.instance.ShowBasePage(l.Pages.MAIN_PAGE,t)}))},e}(s)).prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=d))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/ForwardSign.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,s,a,c,p,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Sprite,c=e.Vec3,p=e.tween,l=e.Component}],execute:function(){var u,d,f,g,h;o._RF.push({},"153afbtaudAv4BACmP3FcfA","ForwardSign",void 0);var v=s.ccclass,y=s.property;e("default",(u=v("ForwardSign"),d=y(a),u((h=t((g=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"sign",h,r(t)),t}return i(t,e),t.prototype.SetVisiable=function(e){this.node.active=e,e?(this.sign.node.position=c.ZERO,p(this.sign.node).to(.5,{position:new c(40,0,0)}).to(.5,{position:new c(0,0,0)}).repeatForever().start()):p(this.sign.node).stop()},t}(l)).prototype,"sign",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameDatas.ts",["cc"],(function(E){var A,T;return{setters:[function(E){A=E.cclegacy,T=E.Enum}],execute:function(){var _;E("GameDatas",void 0),A._RF.push({},"5b858+OqRJIV6xPuWWLApM5","GameDatas",void 0),function(E){E.delta=.01,E.BulletAngle=10,E.SINGLE_CHALLENGE_COST=6,E.PARTNER_MAX_LEVEL=100,E.MAX_LOTTERY_COUNT=10,E.Platforms=T({editor:0,minigame:1,android:2,ios:3}),E.MiniGameChannels=T({Default:0,Wechat:1,Bytedance:2}),E.AndroidChannels=T({Default:0,Google:1});var A=function(){};A.DAILY_RESET_DATE="DAILY_RESET_DATE",A.OFFLINE_MARKING="OFFLINE_MARKING",A.USER_DATA="USER_DATA",A.GAME_OPTION="GAME_OPTION",A.HERO_DATAS="HERO_DATAS",A.PARTNER_DATAS="PARTNER_DATAS",A.SKILL_DATAS="SKILL_DATAS",A.GAME_ENERGY="GAME_ENERGY",A.GUIDE_DATAS="GUIDE_DATAS",A.ENDLESS_LEVELS="ENDLESS_LEVELS",A.LEVEL_DATAS="LEVEL_DATAS",A.ROLES="ROLES",A.PETS="PETS",A.RANKING_DATA="RANKING_DATA",A.ACHIEVEMENTS="ACHIEVEMENTS",A.SIGN_IN_DATA="SIGN_IN_DATA",A.MISSION_DATAS="MISSION_DATAS",A.STORE_DATA="STORE_DATA",A.JOURNEY_DATA="JOURNEY_DATA",A.BATTLE_PASS_DATA="BATTLE_PASS_DATA",A.GIFT_STORAGE="GIFT_STORAGE",A.MISSION_REFRESH_COUNT="MissionRefreshCount",A.MISSION_REFRESH_MAX=50,E.Constant=A;var _=function(E){return E[E.DEFAULT=0]="DEFAULT",E[E.GRID=1]="GRID",E[E.WALL=2]="WALL",E[E.TILE=3]="TILE",E[E.BOUNDARIES=4]="BOUNDARIES",E}({});E.PhysicsGroup=_;var R=function(){};R.COVER_PAGE="CoverPage",R.MAIN_PAGE="MainPage",R.BATTLE_PAGE="BattlePage",R.PAUSE_PAGE="PausePage",R.LEVEL_SELECTION_PAGE="LevelSelectionPage",R.REPLENISH_ENERGY_PAGE="ReplenishEnergyPage",R.PARTNER_SELECTION_PAGE="PartnerSelectionPage",R.HERO_ATTRIBUTE_PAGE="HeroAttributePage",R.HERO_ADVANCE_PAGE="HeroAdvancePage",R.HERO_SKILL_INFO_PAGE="HeroSkillInfoPage",R.HERO_JOURNEY_PAGE="HeroJourneyPage",R.ACVANCE_INSTRUCTION_PAGE="AcvanceInstructionPage",R.VICTORY_PAGE="VictoryPage",R.FAILURE_PAGE="FailurePage",R.REBIRTH_PAGE="RebirthPage",R.SETTING_PAGE="SettingPage",R.SIGN_IN_PAGE="SignInPage",R.IDLE_REWARD_PAGE="IdleRewardPage",R.LEVEL_STAR_REWARD_PAGE="LevelStarRewardPage",R.AGE_TIPS_PAGE="AgeTipsPage",R.REAL_NAME_PAGE="RealNamePage",R.REAL_NAME_RESULT_PAGE="RealNameResultPage",R.MINOR_WARNING_PAGE="MinorWarningPage",R.AGE_LIMIT_PAGE="AgeLimitPage",R.TOP_UP_LIMIT_PAGE="TopUpLimitPage",R.REWARD_PAGE="RewardPage",R.USER_UPGRADE_PAGE="UserUpgradePage",R.UNLOCK_CHARACTER_PAGE="UnlockCharacterPage",R.ITEM_DETAILS_PAGE="ItemDetailsPage",R.LOTTERY_PAGE="LotteryPage",R.NEWBIE_GIFT_PAGE="NewbieGiftPage",R.BATTLE_PASS_PAGE="BattlePassPage",R.PURCHASE_PAGE="PurchasePage",E.Pages=R;var e=function(E){return E[E.NONE=0]="NONE",E}({});E.Achievements=e;E.EventTypes=T({EVENT_REFRESH:"refresh",EVENT_PAGE_OPEN:"page_open",EVENT_PAGE_CLOSE:"page_close",EVENT_GOTO_PAGE:"page_goto",EVENT_CHANGE_TURN:"change_turn",EVENT_ADD_VIDEO:"add_video",EVENT_UNLOCK_PARTNER:"unlock_partner"}),E.GameTimes=T({TIME_FIRST:1,TIME_NEWDAY:2,TIME_OFFLINE:3,TIME_POWER:4,TIME_TICKET:5,TIME_SHOP:6,TIME_TASK:7,TIME_NEWGIFT:8,TIME_JOURNEY:9}),E.BaseData=T({POWER_TIME:1,POWER_MAX:2,VIDEO_GET_GOLD:3,VIDEO_GET_DIAMOND:4,VIDEO_GET_POWER:5,VIDEO_GET_EXP:6,VIDEO_GET_EXP2GOLD:7,INIT_HREOLV:8,INIT_CARRY:9,LOTTERY_TICKET:10,LOTTERY_TICKETMAX:11,CRIT_RATE:100,COMBAT_HP:101,COMBAT_ATK:102,COMBAT_DEF:103,COMBAT_ACCURACY:104,COMBAT_DODGE:105,COMBAT_CRIT:106,PROP_QSTS:200}),E.PartnerType=T({MELEE:1,REMOTE:2,ASSISTANCE:3,BEASTSOLDIER:4,POWERS:5}),E.HeroType=T({MELEE:1,REMOTE:2,ASSISTANCE:3,MINISTER:4,THERAPIST:5}),E.AddType=T({HP:1,ATK:2,DEF:3});var I=function(E){return E[E.PREPARATION=0]="PREPARATION",E[E.FIGHTING=1]="FIGHTING",E[E.TRANSITION=2]="TRANSITION",E[E.COMPLETE=3]="COMPLETE",E}({});E.BattleStatus=I;var P=function(E){return E[E.IDLE=0]="IDLE",E[E.MOVE=1]="MOVE",E[E.ATTACK=2]="ATTACK",E[E.DIE=3]="DIE",E}({});E.HeroStatus=P;var S=function(E){return E[E.RECYCLE=0]="RECYCLE",E[E.IDLE=1]="IDLE",E[E.ACTIVATE=2]="ACTIVATE",E[E.DIE=4]="DIE",E}({});E.CharacterStatus=S;var O=function(){};O.IDLE="idle",O.MOVE="run",O.ATTACK="attack",O.ATTACK1="chua",O.BEHIT="hit",O.DIE="die",O.SKILL="skill",O.CURE="cure",E.HeroAnimation=O;var N=function(){};N.IDLE="idle",N.MOVE="run",N.ATTACK="attack",N.DIE="die",N.CURE="cure",E.PartnerAnimation=N;var L=function(){};L.IDLE="idle2",L.MOVE="run2",L.ATTACK="attack2",L.DIE="die2",L.CURE="cure2",E.MonsterAnimation=L;var a=function(){};a.IDLE="idle",a.MOVE="run",a.ATTACK="attack",a.DIE="die",a.SKILL="skill",E.BossAnimation=a;E.EffectType=T({E_NONE:0,E_VERTIGO:1,E_FROZEN:2,E_SLEEP:3,E_POISONING:4,E_BLOODSUCKING:5,E_REBOUND:6,E_SEAL:7,E_INVINCIBLE:8,E_SHEEP:9,E_ATTACKSLOW:10,E_ADDHP:11}),E.ObjType=T({MYHERO:0,MYPARTNER:1,ENEMYHERO:2,ENEMYBOSS:3,ENEMYPARTNER:4,PROP:5}),E.TollgateType=T({EASY:1,HARD:2}),E.PropType=T({PLAY_EXP:1e3,GOLD:1001,HREO_EXP:1002,DIAMOND:1003,POWER:1004,LOTTERY_TICKET:1005,PEARL:1006,STONE_1101:1101,STONE_1102:1102,STONE_1103:1103,STONE_1104:1104,STONE_1105:1105,STONE_BOX:1106,PARTNER_1201:1201,PARTNER_1202:1202,PARTNER_1203:1203,PARTNER_1204:1204,PARTNER_1205:1205}),E.GuideType=T({ARROW:2,DIALOG:1}),E.ShopType=T({DAILY:1,GROWTH:2,DIAMOND:3,CASH:4}),E.ScrollType=T({SCROLL_START:1,SCROLL_ING:2,SCROLL_END:3}),E.StoryMissionType=T({EASYLEVEL:1,HARDLEVEL:2,UNLOCK_HERO:4,UNLOCK_PARTNER:5,PARTNER_MELEE:6,PARTNER_REMOTE:7,PARTNER_ASSISTANCE:8,PARTNER_BEASTSOLDIER:9,PARTNER_POWERS:10,HERO_STAGE_1:11,HERO_STAGE_2:12,HERO_STAGE_3:13,HERO_STAGE_4:14,HERO_STAGE_5:15,HERO_STAGE_6:16}),E.DailyMissionType=T({EASY_LEVEL:1,HARD_LEVEL:2,STORE_PURCHASE:3,USE_SKILL:4,HERO_UPGRADE:5,PARTNER_UPGRADE:6,EASY_CLEAR:7,HARD_CLEAR:8}),E.JourneyType=T({BOUNTY_MISSION:1,HERO_UPGRADE:2,PASS_LEVEL:3,PARTNER_FIGHTING:4,HERO_ADVANCE:5,PARTNER_UPGRADE:6,LOTTERY:7,CLEAR_LEVEL:8,DAILY_MISSION:9,STORE_BUY:10})}(_||(_=E("GameDatas",{}))),A._RF.pop()}}}));

System.register("chunks:///_virtual/GameInitiator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlatformProxy.ts","./GameDatas.ts","./UiManager.ts","./GlobalData.ts","./AccountDataManager.ts"],(function(a){var t,e,n,i,r,o,l,c,s,f,u,m,p;return{setters:[function(a){t=a.applyDecoratedDescriptor,e=a.inheritsLoose,n=a.initializerDefineProperty,i=a.assertThisInitialized},function(a){r=a.cclegacy,o=a._decorator,l=a.game,c=a.Component},function(a){s=a.default},function(a){f=a.GameDatas},function(a){u=a.default},function(a){m=a.default},function(a){p=a.default}],execute:function(){var d,h,y,g,b,D,G,I,_,P,z,C,v;r._RF.push({},"d6390QxhfdDfrIlgLt3aGV/","GameInitiator",void 0);var w=o.ccclass,L=o.property;a("GameInitiator",(d=w("GameInitiator"),h=L({displayName:"帧率"}),y=L({type:f.Platforms,displayName:"平台选择"}),g=L({type:f.MiniGameChannels,displayName:"小游戏渠道"}),b=L({type:f.AndroidChannels,displayName:"安卓渠道"}),D=L({displayName:"清除数据"}),d((_=t((I=function(a){function t(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r))||this,n(t,"frame",_,i(t)),n(t,"platform",P,i(t)),n(t,"minigame_channel",z,i(t)),n(t,"android_channel",C,i(t)),n(t,"clear",v,i(t)),t}return e(t,a),t.prototype.start=function(){l.frameRate=this.frame,this.platform==f.Platforms.minigame?s.Init(this.platform,this.minigame_channel):this.platform==f.Platforms.android?s.Init(this.platform,this.android_channel):(this.clear&&localStorage.clear(),s.Init(this.platform,0)),p.LoadConfig(),m.LoadConfigs(),u.instance.Init()},t}(c)).prototype,"frame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),P=t(I.prototype,"platform",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Platforms.android}}),z=t(I.prototype,"minigame_channel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.MiniGameChannels.Default}}),C=t(I.prototype,"android_channel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.AndroidChannels.Default}}),v=t(I.prototype,"clear",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=I))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameOption.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDatas.ts","./GameUtility.ts","./DataProxy.ts"],(function(t){var i,o,n,s,e,u,r,c,a,l,p,h,f,d,m,v,y,O;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,e=t.createForOfIteratorHelperLoose,u=t.createClass},function(t){r=t.cclegacy,c=t._decorator,a=t.AudioSource,l=t.director,p=t.game,h=t.Game,f=t.Node,d=t.Component},function(t){m=t.GameDatas},function(t){v=t.default,y=t.CustomBundles},function(t){O=t.default}],execute:function(){var S,C,_,E,A,P;r._RF.push({},"b5e41P1fuhGf5gCmrB4waID","GameOption",void 0);var g=c.ccclass,D=c.property,G=function(){this.sound=!0,this.music=!0,this.vibrate=!0},N=t("AudioClips",(function(){}));N.CLICK="click",N.CLOSE="return",N.ARROW="arrow",N.UPGRADE="levelup",N.ADVANCE="jinjie",N.COUNTDOWN="jingbao",N.SUCCESS="win",N.FAILED="lose",N.RESULT="result";t("default",(S=g("GameOption"),C=D(a),S(((P=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),u=0;u<o;u++)e[u]=arguments[u];return i=t.call.apply(t,[this].concat(e))||this,n(i,"music_source",A,s(i)),i.clips={},i.option=null,i.sources=[],i}o(i,t);var r=i.prototype;return r.onLoad=function(){var t=this;i.instance||(i.instance=this),l.addPersistRootNode(this.node),v.LoadAudioClips(y.DEFAULT,"sounds",(function(i){for(var o=0;o<i.length;++o)t.clips[i[o].name]=i[o]})),this.init()},r.init=function(){this.sources=[],this.option=O.OnRead(m.Constant.GAME_OPTION),this.option||(this.option=new G,this.option.sound=!0,this.option.music=!0,this.option.vibrate=!0,O.OnSave(m.Constant.GAME_OPTION,this.option)),p.on(h.EVENT_SHOW,this.onEventShow,this),p.on(h.EVENT_HIDE,this.onEventHide,this)},r.onEventHide=function(){console.log("游戏进入后台"),this.PauseMusic()},r.onEventShow=function(){console.log("重新返回游戏"),this.PlayMusic()},r.PlaySound=function(t){var i=this;if(!this.option.sound)return null;var o=this.CreateSource();return this.clips[t]?(o.clip=this.clips[t],o.play()):v.LoadAudioClip(y.SOUNDS,t,(function(n){i.clips[t]=n,o.clip=n,o.play()})),o},r.PlaySoundDirectly=function(t){if(!this.option.sound)return null;var i=this.CreateSource();return i.clip=t,i.play(),i},r.CreateSource=function(){for(var t,i=e(this.sources);!(t=i()).done;){var o=t.value;if(!o.playing)return o}var n=new f("AudioSource");n.parent=this.node;var s=n.addComponent(a);return s.playOnAwake=!1,this.sources.push(s),s},r.PlayMusic=function(t){var i=this;this.option.music&&(this.music_source.playing&&this.music_source.stop(),t?v.LoadAudioClip(y.SOUNDS,t,(function(t){i.music_source.clip=t,i.music_source.loop=!0,i.music_source.play()})):this.music_source.play())},r.PauseMusic=function(){this.music_source&&this.music_source.pause()},r.StopMusic=function(){this.music_source&&this.music_source.stop()},u(i,[{key:"sound",get:function(){return this.option.sound},set:function(t){this.option.sound=t,O.OnSave(m.Constant.GAME_OPTION,this.option)}},{key:"music",get:function(){return this.option.music},set:function(t){this.option.music=t,this.option.music?this.PlayMusic():this.PauseMusic(),O.OnSave(m.Constant.GAME_OPTION,this.option)}},{key:"vibrate",get:function(){return this.option.vibrate},set:function(t){this.option.vibrate=t,O.OnSave(m.Constant.GAME_OPTION,this.option)}}]),i}(d)).instance=null,A=i((E=P).prototype,"music_source",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=E))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameUtility.ts",["cc"],(function(t){var e,n,o,r,i,a,u,l;return{setters:[function(t){e=t.cclegacy,n=t.resources,o=t.Prefab,r=t.instantiate,i=t.AudioClip,a=t.SpriteFrame,u=t.SpriteAtlas,l=t.sp}],execute:function(){e._RF.push({},"b1d79bpoqpCA7dpa8C+Zu1l","GameUtility",void 0);var s=t("CustomBundles",function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.UI=1]="UI",t[t.SOUNDS=2]="SOUNDS",t}({})),c=["","万","亿","兆","京","垓"],f=t("default",function(){function t(){}return t.SetBundle=function(t,e){this.bundles[t]=e,console.log(this.bundles)},t.GetBundle=function(t){return t==s.DEFAULT&&(this.bundles[t]||(this.bundles[t]=n)),this.bundles[t]},t.LoadAsset=function(t,e,n){this.GetBundle(t).load(e,o,(function(t,o){if(t)console.log(t,e);else{var i=r(o);n&&n(i)}}))},t.LoadPage=function(t,e){this.GetBundle(s.UI).load("pages/"+t,o,(function(n,o){if(n)console.log(n,t);else{var i=r(o);e&&e(i)}}))},t.LoadAudioClips=function(t,e,n){this.GetBundle(t).loadDir(e,i,(function(t,o){t?console.log(t,e):n&&n(o)}))},t.LoadAudioClip=function(t,e,n){this.GetBundle(t).load(e,i,(function(t,o){t?console.log(t,e):n&&n(o)}))},t.SetSpriteFrame=function(t,e,n){this.bundles[e].load(n+"/spriteFrame",a,(function(e,o){e?console.log(e,n,t.name):t.spriteFrame=o}))},t.SetSpriteAtlas=function(t,e,n){t.node.active=!1,this.bundles[s.UI].load("images/atlas/"+e,u,(function(o,r){o?console.log(o,e,n):(t.spriteFrame=r.getSpriteFrame(n),t.node.active=!0)}))},t.SetSkeletonData=function(t,e,n){this.bundles[s.UI].load(e,l.SkeletonData,(function(e,o){e?console.log(e):(t.skeletonData=o,n&&n())}))},t.CheckIdentityCardNumber=function(t){if(18!=t.length)return!1;for(var e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=t[t.length-1],o=0,r=0;r<e.length;++r){o+=parseInt(t[r])*e[r]}return["1","0","X","9","8","7","6","5","4","3","2"][Math.floor(o%11)]==n},t.FormateTime=function(t,e){void 0===e&&(e=!0);var n=t;e&&(n=.001*t);var o=Math.floor(n/3600),r=Math.floor(n%3600/60),i=Math.floor(n%3600%60),a="";o>0&&(a=o.toString(),o<10&&(a="0"+o));var u=r.toString();r<10&&(u="0"+r);var l=i.toString();return i<10&&(l="0"+i),a?a+":"+u+":"+l:u+":"+l},t.GetSurplusSeconds=function(){var t=new Date;return 86400-(60*t.getHours()*60+60*t.getMinutes()+t.getSeconds())},t.CompareDate=function(t){var e=new Date,n=e.getFullYear(),o=e.getMonth(),r=e.getDate(),i=new Date(t),a=i.getFullYear(),u=i.getMonth(),l=i.getDate();return!(n>a)&&(!(o>u)&&!(r>l))},t.CheckResetTime=function(t){for(var e=this.CompareDate(t),n=new Date(t).getHours(),o=new Date,r=o.getHours(),i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];if(e){for(var l=0;l<a.length;++l)if(r>a[l]&&n<a[l])return!0}else if(r>a[0])return!0;return!1},t.FormatString=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return t.replace(/{(\d+)}/g,(function(t,e){return void 0!==n[e]?n[e]:t}))},t.FormatRadix=function(t,e){return t.toFixed(e)},t.FormateNumber=function(t){if(t<1e4)return t.toString();t/=1e4;var e=Math.floor(Math.log10(t)/3),n=c[e+1],o=t/Math.pow(1e3,e);if(!n)return o.toString();var r=o.toString();return o<100?r.slice(0,4)+n:r.slice(0,3)+n},t}());f.interstitial_sticks=0,f.bundles=[],e._RF.pop()}}}));

System.register("chunks:///_virtual/GenericItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemDataProxy.ts","./GameUtility.ts","./UiManager.ts","./GameDatas.ts","./GameOption.ts"],(function(t){var e,n,i,r,a,o,u,c,l,s,f,p,d,m,b,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,u=t.Sprite,c=t.Label,l=t.Component},function(t){s=t.default},function(t){f=t.default,p=t.CustomBundles},function(t){d=t.default},function(t){m=t.GameDatas},function(t){b=t.default,y=t.AudioClips}],execute:function(){var g,h,I,v,S,G,D,C,L;a._RF.push({},"2cf42Y/LrRE8qDnL7unzfS2","GenericItem",void 0);var P=o.ccclass,_=o.property;t("default",(g=P("GenericItem"),h=_(u),I=_(u),v=_(c),g((D=e((G=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"background",D,r(e)),i(e,"icon",C,r(e)),i(e,"count",L,r(e)),e.data=null,e}n(e,t);var a=e.prototype;return a.Init=function(t){this.data=t;var e=s.instance.GetItemConfig(t.id),n="icons/items/frame_0"+e.quality;f.SetSpriteFrame(this.background,p.UI,n);var i="icons/"+e.icon;f.SetSpriteFrame(this.icon,p.UI,i),this.count.string=f.FormateNumber(t.count),this.node.active=!0},a.OnClick=function(){b.instance.PlaySound(y.CLICK),d.instance.ShowTopPopup(m.Pages.ITEM_DETAILS_PAGE,this.data)},e}(l)).prototype,"background",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(G.prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(G.prototype,"count",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=G))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/GenericToggle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameOption.ts"],(function(t){var e,n,i,r,a,c,o,l,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,o=t.Node,l=t.Component},function(t){s=t.default,u=t.AudioClips}],execute:function(){var p,f,g,h,y;a._RF.push({},"faf32gny0BFEo65Ace4Rps0","GenericToggle",void 0);var d=c.ccclass,v=c.property;t("default",(p=d("GenericToggle"),f=v([o]),p((y=e((h=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"status",y,r(e)),e.callback=null,e}n(e,t);var a=e.prototype;return a.Init=function(t){this.callback=t},a.SetStatus=function(t){for(var e=0;e<this.status.length;++e)this.status[e].active=e==t},a.OnClick=function(){s.instance.PlaySound(u.CLICK),this.callback&&this.callback()},e}(l)).prototype,"status",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=h))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/GiftDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts","./GameUtility.ts"],(function(t){var e,n,i,s,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.default},function(t){s=t.GameDatas},function(t){a=t.default}],execute:function(){n._RF.push({},"e0f881qG5VNgLdIsB/9Kr1A","GiftDataManager",void 0);t("GiftConfig",(function(){this.id=0,this.type=0,this.rewards=""}));var o=t("GiftStorage",(function(){this.newbie=null})),r=t("NewbieGigtData",(function(){this.status=0,this.ticks=0}));t("default",function(){function t(){this.configs=[],this.storage=null}var n=t.prototype;return n.LoadConfig=function(){var t=this;i.OnLoad("configs/gifts",(function(e){t.configs=e}))},n.InitData=function(){this.storage=i.OnRead(s.Constant.ACHIEVEMENTS),null==this.storage&&(this.storage=new o,this.storage.newbie=new r,this.storage.newbie.status=1,this.storage.newbie.ticks=(new Date).getTime(),this.Save())},n.GetNewbieGift=function(){return this.configs.find((function(t){return 1==t.type}))},n.GetNewbieData=function(){return this.storage.newbie},n.CheckNewbie=function(){if(2==this.storage.newbie.status)return!1;var t=(new Date).getTime()-this.storage.newbie.ticks;return console.log(t,864e5),console.log(a.FormateTime(t)),t<864e5},n.OnPurchaseNewbie=function(){this.storage.newbie.status=2,this.Save()},n.Save=function(){i.OnSave(s.Constant.ACHIEVEMENTS,this.storage)},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalData.ts",["cc","./GameDatas.ts","./GameUtility.ts","./ItemDataProxy.ts","./GuideDataManager.ts","./MissionDataManager.ts","./JourneyDataManager.ts","./UserDataManager.ts","./StoreDataManager.ts","./SignInDataManager.ts","./HeroDataManager.ts","./SkillDataManager.ts","./PartnerDataManager.ts","./MonsterDataManager.ts","./LevelDataManager.ts","./GiftDataManager.ts","./LotteryDataManager.ts","./BattlePassDataManager.ts","./DataProxy.ts"],(function(a){var n,t,e,i,o,s,c,f,u,g,D,r,d,l,C,L,I,M,S;return{setters:[function(a){n=a.cclegacy},function(a){t=a.GameDatas},function(a){e=a.default},function(a){i=a.default},function(a){o=a.default},function(a){s=a.default},function(a){c=a.default},function(a){f=a.default},function(a){u=a.default},function(a){g=a.default},function(a){D=a.default},function(a){r=a.default},function(a){d=a.default},function(a){l=a.default},function(a){C=a.default},function(a){L=a.default},function(a){I=a.default},function(a){M=a.BattlePassDataManager},function(a){S=a.default}],execute:function(){n._RF.push({},"e451ef9yKBCiJE3SKY1x3K4","GlobalData",void 0);a("default",function(){function a(){}return a.LoadConfigs=function(){console.log("load configs"),i.instance.LoadConfig(),o.instance.LoadConfig(),s.instance.LoadConfig(),c.instance.LoadConfig(),f.instance.LoadConfig(),u.instance.LoadConfig(),g.instance.LoadConfig(),D.instance.LoadConfig(),r.instance.LoadConfig(),d.instance.LoadConfig(),l.instance.LoadConfig(),C.instance.LoadConfig(),L.instance.LoadConfig(),I.instance.LoadConfig(),M.instance.LoadConfig()},a.InitDatas=function(){console.log("init datas");var a=!0,n=S.OnRead(t.Constant.DAILY_RESET_DATE);if(n&&(a=!e.CompareDate(parseInt(n))),console.log("每日重置",a),a){var i=(new Date).getTime();S.OnSave(t.Constant.DAILY_RESET_DATE,i.toString())}o.instance.InitData(),s.instance.InitData(a),c.instance.InitData(),f.instance.InitData(a),u.instance.InitData(a),g.instance.InitData(a),D.instance.InitData(),r.instance.InitData(),d.instance.InitData(),C.instance.InitData(),L.instance.InitData(),M.instance.InitData()},a}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GuideDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts"],(function(t){var e,n,i,s;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.default},function(t){s=t.GameDatas}],execute:function(){n._RF.push({},"6c8c3KzzmhJza0GO0GhTcFk","GuideDataManager",void 0);t("GuideConfig",(function(){this.type=0,this.step=0,this.style=0,this.tips="",this.character="",this.icon="",this.direction=0,this.description="",this.offset=0,this.finger=0,this.continue=0}));var a=t("GuideData",(function(){this.type=0,this.step=0}));t("default",function(){function t(){this.configs=[],this.datas=[]}var n=t.prototype;return n.LoadConfig=function(){var t=this;i.OnLoad("configs/guide",(function(e){t.configs=e}))},n.InitData=function(){this.datas=i.OnRead(s.Constant.GUIDE_DATAS),this.datas||(this.datas=[])},n.GetGuide=function(t,e){return this.configs.find((function(n){return n.type==t&&n.step==e}))},n.GetGuides=function(t){return this.configs.filter((function(e){return e.type==t}))},n.GetGuideData=function(t){return this.datas.find((function(e){return e.type==t}))},n.IsGuideComplete=function(t,e){var n=this.GetGuideData(t);return!!n&&n.step>=e},n.GetGuideStep=function(t){var e=this.GetGuideData(t);return e?e.step:0},n.CompareStep=function(t,e){var n=this.GetGuideData(t);return!!n&&n.step==e},n.CheckComplete=function(t){var e=this.GetGuideData(t);if(!e)return!1;var n=this.GetGuides(t);return e.step>=n.length},n.CheckLastStep=function(t,e){return e>=this.GetGuides(t).length},n.SetGuide=function(t,e){var n=this.GetGuideData(t);n||((n=new a).type=t,n.step=0,this.datas.push(n)),n.step++,console.log("Set Guide",t,n.step),e&&this.Save()},n.Save=function(){i.OnSave(s.Constant.GUIDE_DATAS,this.datas)},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/GuidePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GuideDataManager.ts","./GameUtility.ts","./UiManager.ts","./MainPage.ts","./BattlePage.ts","./BattleScene.ts"],(function(t){var i,e,n,o,r,a,s,l,c,u,f,h,g,d,p,b,_,y,v,w,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Label,c=t.Sprite,u=t.UITransform,f=t.Vec3,h=t.tween},function(t){g=t.default},function(t){d=t.default},function(t){p=t.default,b=t.CustomBundles},function(t){_=t.default,y=t.PageLayers},function(t){v=t.default},function(t){w=t.default},function(t){m=t.default}],execute:function(){var S,P,z,G,k,C,D,R,B,I,L,H,M,O,U,A,E,F,N,T,j,V,x;r._RF.push({},"ba38bo+8DVEQr1I6T9ucjNC","GuidePage",void 0);var Q=a.ccclass,q=a.property;t("default",(S=Q("GuidePage"),P=q(s),z=q(l),G=q(l),k=q(c),C=q(s),D=q(u),R=q(u),B=q(s),I=q(s),L=q(l),S((O=i((M=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"dialogue_root",O,o(i)),n(i,"dialogue",U,o(i)),n(i,"title",A,o(i)),n(i,"character",E,o(i)),n(i,"baffle",F,o(i)),n(i,"hole",N,o(i)),n(i,"guide_background",T,o(i)),n(i,"finger_root",j,o(i)),n(i,"tips_node",V,o(i)),n(i,"tips",x,o(i)),i.transform=null,i.config=null,i.target=null,i}e(i,t);var r=i.prototype;return r.Init=function(){this.dialogue_root.active=!1,this.hole.node.active=!1,this.baffle.active=!1,this.finger_root.active=!1,this.transform=this.getComponent(u)},r.Show=function(){t.prototype.Show.call(this),this.config=this.args.config,this.target=this.args.target,console.log(this.config),this.Refresh()},r.Refresh=function(){var t=this;1==this.config.style?(this.baffle.active=!1,this.dialogue_root.active=!1,this.SetHole()):2==this.config.style?(this.baffle.active=!0,this.hole.node.active=!1,this.finger_root.active=!1,this.is_action=!0,this.SetDialogue((function(){t.is_action=!1}))):3==this.config.style&&(this.baffle.active=!1,this.is_action=!0,this.SetHole(),this.SetDialogue((function(){t.is_action=!1}))),console.log(this.baffle.active)},r.SetDialogue=function(t){this.title.string=this.config.character,this.character.node.position=new f(180*this.config.direction,80,0),p.SetSpriteFrame(this.character,b.UI,"icons/guide/"+this.config.icon),this.dialogue.string=this.config.description,this.dialogue_root.position=new f(0,this.config.offset,0),this.dialogue_root.setScale(.6,.6,.6),this.dialogue_root.active=!0,h(this.dialogue_root).to(.3,{scale:f.ONE},{easing:"backOut"}).delay(.2).call((function(){t&&t()})).start()},r.SetHole=function(){this.hole.node.worldPosition=this.target.worldPosition,this.hole.node.active=!0,this.guide_background.node.worldPosition=new f(.5*this.transform.width,.5*this.transform.height,0),this.guide_background.width=this.transform.width,this.guide_background.height=this.transform.height,this.finger_root.worldPosition=this.target.worldPosition,this.finger_root.active=!0,this.tips_node.position=new f(0,140,0),this.tips.string=this.config.tips},r.Close=function(){this.hole.node.active=!1,this.baffle.active=!1,this.finger_root.active=!1,t.prototype.Close.call(this);var i=_.instance.GetActivePage(y.BASE);i instanceof v?i.Refresh():i instanceof w&&(i.Refresh(),m.instance.SetPause(!1))},r.OnClick=function(){if(!this.is_action){if(console.log("On Guide Close"),1==this.config.continue)return this.config=d.instance.GetGuide(this.config.type,this.config.step+1),d.instance.SetGuide(this.config.type,!1),void this.Refresh();d.instance.CheckLastStep(this.config.type,this.config.step)&&d.instance.SetGuide(this.config.type,!0),this.Close()}},i}(g)).prototype,"dialogue_root",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(M.prototype,"dialogue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(M.prototype,"title",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(M.prototype,"character",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(M.prototype,"baffle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(M.prototype,"hole",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(M.prototype,"guide_background",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(M.prototype,"finger_root",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(M.prototype,"tips_node",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(M.prototype,"tips",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=M))||H));r._RF.pop()}}}));

System.register("chunks:///_virtual/Hero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeroDataManager.ts","./GameUtility.ts","./GameDatas.ts","./BattleScene.ts","./Dispatcher.ts","./DataProxy.ts","./LevelDataManager.ts","./HitEffect.ts"],(function(t){var e,i,n,s,a,o,h,c,l,r,u,f,k,p,m,d,g,H;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,h=t._decorator,c=t.sp,l=t.Vec3,r=t.Component},function(t){u=t.default},function(t){f=t.default},function(t){k=t.GameDatas},function(t){p=t.default},function(t){m=t.default},function(t){d=t.default},function(t){g=t.default},function(t){H=t.default}],execute:function(){var S,A,I,v,_,D,O;o._RF.push({},"eaf4a3i/7RAXq9/N7owpGbG","Hero",void 0);var y=h.ccclass,E=h.property;t("default",(S=y("Hero"),A=E(c.Skeleton),I=E(H),S((D=e((_=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"skeleton",D,s(e)),n(e,"hit_effect",O,s(e)),e.scene=void 0,e.config=null,e.data=null,e.status=k.HeroStatus.IDLE,e.pause=!1,e.angle=0,e.is_move=!1,e.attackable=!0,e.hp=0,e.attack=0,e.defence=0,e.skill_energy=0,e.max_hp=0,e.attack_distance=0,e.check_dispatcher=void 0,e.monsters=[],e}i(e,t);var o=e.prototype;return o.Init=function(t){this.scene=t,this.data=u.instance.GetActivateHero(),this.config=u.instance.GetHeroConfig(this.data.id),this.max_hp=this.hp=u.instance.GetHeroHp(this.config,this.data.level,this.data.stage),this.attack=u.instance.GetHeroAttack(this.config,this.data.level,this.data.stage),this.defence=u.instance.GetHeroDefense(this.config,this.data.level,this.data.stage);var e=d.ConvertString(this.config.attack_distance);this.attack_distance=e[0],this.check_dispatcher=new m(.1,this.OnCheck.bind(this)),this.InitSpine(),this.status=k.HeroStatus.IDLE,this.is_move=!1,this.attackable=!0,this.skill_energy=0,this.hit_effect.Init(),t.page.Info.SetHeroHp(this.hp/this.max_hp)},o.InitSpine=function(){var t=this;this.skeleton.setCompleteListener((function(e){e.animation.name==k.HeroAnimation.DIE?p.instance.OnComplete(!1,!0):t.skeleton.animation==k.HeroAnimation.ATTACK?10001==t.config.id?t.skeleton.setAnimation(0,"attack2",!1):t.OnIdle():t.skeleton.animation==k.HeroAnimation.SKILL?t.OnIdle():"attack2"==t.skeleton.animation?t.skeleton.setAnimation(0,"attack3",!1):"attack3"==t.skeleton.animation&&t.OnIdle()})),this.skeleton.setEventListener((function(e,i){null!=i&&"attack"==i.data.name&&"1"==i.stringValue&&(t.skeleton.animation.includes(k.HeroAnimation.ATTACK)?t.SetAttackDamage():t.skeleton.animation==k.HeroAnimation.SKILL&&t.SetSkillEffect())})),f.SetSkeletonData(this.skeleton,"spine/heroes/"+this.config.skeleton,(function(){t.skeleton.setSkin("jinjie0"),t.skeleton.setAnimation(0,k.HeroAnimation.IDLE,!0),t.skeleton.premultipliedAlpha=10001==t.config.id}))},o.OnIdle=function(){this.status!=k.HeroStatus.IDLE&&(this.status=k.HeroStatus.IDLE,this.skeleton.setAnimation(0,k.HeroAnimation.IDLE,!0))},o.IsActivate=function(){return this.hp>0},o.OnAttack=function(){this.status==k.HeroStatus.IDLE&&(this.status=k.HeroStatus.ATTACK,this.skeleton.setAnimation(0,k.HeroAnimation.ATTACK,!1))},o.OnCheck=function(){console.log("OnCheck"),this.attackable&&(this.monsters=this.scene.GetMonsters(this.node.worldPosition,this.attack_distance),this.monsters.length>0&&this.OnAttack())},o.SetAttackDamage=function(){var t=this;this.attackable=!1,setTimeout((function(){t.attackable=!0}),1e3*this.config.attack_speed);for(var e=0;e<this.monsters.length;++e)this.monsters[e].OnHit(this.attack)},o.SetSkillEnergy=function(t){return this.skill_energy+=t,this.skill_energy>100&&(this.skill_energy=100),this.skill_energy},o.OnSkill=function(){g.instance.statistics.skill++,this.status=k.HeroStatus.ATTACK,this.skeleton.setAnimation(0,k.HeroAnimation.SKILL,!1)},o.SetSkillEffect=function(){for(var t=this.scene.GetMonsters(this.node.worldPosition),e=0;e<t.length;++e)t[e].OnHit(999999)},o.SetMovable=function(t){this.is_move!=t&&(this.is_move=t,t?(this.status=k.HeroStatus.MOVE,this.skeleton.setAnimation(0,k.HeroAnimation.MOVE,!0)):this.OnIdle())},o.SetDirection=function(t){this.angle=t},o.OnMove=function(){if(this.is_move){var t=Math.cos(this.angle)*this.config.move_speed*2,e=Math.sin(this.angle)*this.config.move_speed*2;this.node.scale=new l(t<0?1:-1,1,1);var i=this.node.position.x+t,n=this.node.position.y+e,s=p.instance.SetInField(i,n);this.node.position=new l(s.x,s.y,0)}},o.OnHit=function(t){var e=!1,i=Math.max(1,t-this.defence);return console.log(t,this.defence),this.hp-=i,this.hit_effect.Activate(1),this.hp<=0&&(this.hp=0,this.OnDie(),e=!0),this.scene.page.Info.SetHeroHp(this.hp/this.max_hp),e},o.OnDie=function(){this.status!=k.HeroStatus.DIE&&(this.status=k.HeroStatus.DIE,this.skeleton.setAnimation(0,k.HeroAnimation.DIE,!1))},o.OnPause=function(t){this.pause=t,this.skeleton.timeScale=t?0:1},o.OnRebirth=function(){this.hp=this.max_hp,this.status=k.HeroStatus.IDLE,this.skeleton.setAnimation(0,k.HeroAnimation.IDLE,!0)},o.update=function(t){this.scene&&(this.pause||(this.scene.Status!=k.BattleStatus.TRANSITION&&this.scene.Status!=k.BattleStatus.FIGHTING||this.OnMove(),this.scene.Status==k.BattleStatus.FIGHTING&&this.status==k.HeroStatus.IDLE&&this.check_dispatcher.dispatche(t)))},a(e,[{key:"HP",get:function(){return this.hp/this.max_hp*100}}]),e}(r)).prototype,"skeleton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(_.prototype,"hit_effect",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAdvancePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./HeroDataManager.ts","./UserDataManager.ts","./UiManager.ts","./SkillDataManager.ts","./DataProxy.ts","./ItemDataProxy.ts","./GameUtility.ts","./JourneyDataManager.ts","./GameDatas.ts","./MissionDataManager.ts","./GameOption.ts"],(function(t){var e,n,i,a,o,r,s,l,c,u,h,f,d,g,_,p,b,v,k,m,y,S,G,C,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.UITransform,l=t.Label,c=t.Node,u=t.RichText,h=t.Sprite},function(t){f=t.default},function(t){d=t.default},function(t){g=t.default},function(t){_=t.default},function(t){p=t.default},function(t){b=t.default},function(t){v=t.default},function(t){k=t.default,m=t.CustomBundles},function(t){y=t.default},function(t){S=t.GameDatas},function(t){G=t.default},function(t){C=t.default,w=t.AudioClips}],execute:function(){var D,H,x,z,A,P,O,M,U,E,F,N,I,R,J,L,B,T,j,V,K,q,Q,W,X,Y,Z,$,tt;o._RF.push({},"fd34epyjHlGJJDfC32kMBjB","HeroAdvancePage",void 0);var et=r.ccclass,nt=r.property;t("default",(D=et("HeroAdvancePage"),H=nt(s),x=nt([l]),z=nt([l]),A=nt([l]),P=nt([l]),O=nt(c),M=nt(u),U=nt(c),E=nt(u),F=nt(h),N=nt(l),I=nt(u),R=nt(u),D((B=e((L=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"content",B,a(e)),i(e,"level",T,a(e)),i(e,"hp",j,a(e)),i(e,"attack",V,a(e)),i(e,"defense",K,a(e)),i(e,"skin_node",q,a(e)),i(e,"skin_description",Q,a(e)),i(e,"skill_node",W,a(e)),i(e,"skill_description",X,a(e)),i(e,"skill_icon",Y,a(e)),i(e,"skill_name",Z,a(e)),i(e,"debris",$,a(e)),i(e,"golds",tt,a(e)),e.hero_data=null,e.hero_config=null,e.next_stage=null,e}n(e,t);var o=e.prototype;return o.Init=function(){this.skill_node.active=!1,this.skin_node.active=!1},o.Show=function(){t.prototype.Show.call(this),this.hero_data=this.args,this.hero_config=d.instance.GetHeroConfig(this.hero_data.id),this.Refresh(),this.OnEntrance(this.content)},o.Refresh=function(){var t=this.hero_data.stage,e=d.instance.GetAdvanceConfig(this.hero_data.id,t);this.next_stage=d.instance.GetAdvanceConfig(this.hero_data.id,t+1),this.level[0].string=0==t?"10":e.max.toString(),this.level[1].string=this.next_stage.max.toString();var n=d.instance.GetHeroHp(this.hero_config,this.hero_data.level,t),i=d.instance.GetHeroHp(this.hero_config,this.hero_data.level,t+1);this.hp[0].string=n.toString(),this.hp[1].string=i.toString();var a=d.instance.GetHeroAttack(this.hero_config,this.hero_data.level,t),o=d.instance.GetHeroAttack(this.hero_config,this.hero_data.level,t+1);this.attack[0].string=a.toString(),this.attack[1].string=o.toString();var r=d.instance.GetHeroDefense(this.hero_config,this.hero_data.level,t),s=d.instance.GetHeroDefense(this.hero_config,this.hero_data.level,t+1);if(this.defense[0].string=r.toString(),this.defense[1].string=s.toString(),1==this.next_stage.unlock)this.skill_node.active=!1;else{var l=d.instance.GetSkill(this.hero_config,t+1);if(0!=l){var c=p.instance.GetSkillConfig(l,1);k.SetSpriteFrame(this.skill_icon,m.UI,"icons/skills/"+c.icon),this.skill_name.string="技能名称："+c.name,this.skill_description.string="<b>"+this.next_stage.description+"</b>",this.skill_node.active=!0}else console.log("技能id错误")}for(var u=v.instance.OnParse(this.next_stage.cost),h=0;h<u.length;++h)this.SetCost(u[h])},o.SetCost=function(t){if(1==t.id){var e=g.instance.Golds>=t.count;this.golds.string=e?"<color=#ff0000>"+k.FormateNumber(t.count)+"</color>/"+k.FormateNumber(g.instance.Golds):"<color=#00ff00>"+k.FormateNumber(t.count)+"</color>/"+k.FormateNumber(g.instance.Golds)}else if(2==t.id){var n=this.hero_data.debris>=t.count;this.debris.string=n?"<color=#ff0000>"+t.count+"</color>/"+this.hero_data.debris:"<color=#00ff00>"+t.count+"</color>/"+this.hero_data.debris}},o.ClickOnAdvance=function(){var t=this;if(!this.is_action){C.instance.PlaySound(w.CLICK);var e=v.instance.OnParse(this.next_stage.cost);if(g.instance.Golds<e[0].count)_.instance.ShowMessage("金币数量不足");else if(this.hero_data.debris<e[1].count)_.instance.ShowMessage("英雄碎片数量不足");else{this.OnExit(this.content,(function(){_.instance.ClosePage(t)})),C.instance.PlaySound(w.ADVANCE),g.instance.Golds-=e[0].count,d.instance.OnAdvance(this.hero_data,e[1].count);var n=this.hero_data.stage+10;G.instance.SetStoryMission(n,1),y.instance.SetJourney(S.JourneyType.HERO_ADVANCE,1),this.OnUnlockSkill()}}},o.OnUnlockSkill=function(){var t=b.ConvertString(this.hero_config.skills),e=0;1==this.hero_data.stage?e=t[1]:3==this.hero_data.stage?e=t[2]:5==this.hero_data.stage&&(e=t[3]),0!=e&&p.instance.OnUnlock(e)},o.ClickOnClose=function(){var t=this;this.is_action||(C.instance.PlaySound(w.CLOSE),this.OnExit(this.content,(function(){_.instance.ClosePage(t)})))},e}(f)).prototype,"content",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(L.prototype,"level",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=e(L.prototype,"hp",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=e(L.prototype,"attack",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(L.prototype,"defense",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=e(L.prototype,"skin_node",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(L.prototype,"skin_description",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(L.prototype,"skill_node",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(L.prototype,"skill_description",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(L.prototype,"skill_icon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(L.prototype,"skill_name",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(L.prototype,"debris",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(L.prototype,"golds",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=L))||J));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAttributeModule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeroSkillItem.ts","./HeroDataManager.ts","./DataProxy.ts","./UiManager.ts","./GameDatas.ts","./GameUtility.ts","./UserDataManager.ts","./MissionDataManager.ts","./JourneyDataManager.ts","./GameOption.ts"],(function(e){var t,n,i,a,r,o,l,s,u,c,f,g,p,d,h,b,_,m,y,v,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Label,s=e.Node,u=e.Button,c=e.Component},function(e){f=e.default},function(e){g=e.default},function(e){p=e.default},function(e){d=e.default},function(e){h=e.GameDatas},function(e){b=e.default},function(e){_=e.default},function(e){m=e.default},function(e){y=e.default},function(e){v=e.default,D=e.AudioClips}],execute:function(){var H,k,G,w,S,x,A,M,P,E,R,z,C,O,U,I,L,T,F,N,J,B,V,j,K;r._RF.push({},"4faedVHpjxGO4uqVZ3LcXHJ","HeroAttributeModule",void 0);var q=o.ccclass,X=o.property;e("default",(H=q("HeroAttributeModule"),k=X(l),G=X(l),w=X(l),S=X(l),x=X(l),A=X(l),M=X(l),P=X(s),E=X(u),R=X(s),z=X([f]),H((U=t((O=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"level",U,a(t)),i(t,"hp",I,a(t)),i(t,"attack",L,a(t)),i(t,"defense",T,a(t)),i(t,"attack_speed",F,a(t)),i(t,"experience",N,a(t)),i(t,"golds",J,a(t)),i(t,"upgrade_module",B,a(t)),i(t,"advance_button",V,a(t)),i(t,"level_max_tag",j,a(t)),i(t,"skills",K,a(t)),t.panel=null,t.config=null,t.data=null,t.upgrade_config=null,t}n(t,e);var r=t.prototype;return r.Init=function(e,t){this.panel=e,this.config=t,this.data=g.instance.GetHeroData(this.config.id),this.Refresh()},r.Refresh=function(){var e=this.data?this.data.level:1,t=this.data?this.data.stage:0,n=10;t>0&&(n=g.instance.GetAdvanceConfig(this.config.id,t).max);this.level.string=e+"/"+n;var i=g.instance.GetHeroHp(this.config,e,t);this.hp.string=i.toString();var a=g.instance.GetHeroAttack(this.config,e,t);this.attack.string=a.toString();var r=g.instance.GetHeroDefense(this.config,e,t);this.defense.string=r.toString(),this.attack_speed.string=this.config.attack_speed.toString(),this.upgrade_module.active=e<n,this.advance_button.node.active=t<6&&e>=n,this.level_max_tag.active=t>=6&&e>=n,this.upgrade_config=g.instance.GetUpgradeConfig(e),this.experience.string=b.FormateNumber(this.upgrade_config.experience)+"/"+b.FormateNumber(_.instance.HeroExperience),this.golds.string=b.FormateNumber(this.upgrade_config.golds);for(var o=p.ConvertString(this.config.skills,","),l=0;l<this.skills.length;++l)this.skills[l].Init(o[l])},r.ClickOnDetails=function(){d.instance.ShowPopup(h.Pages.HERO_ATTRIBUTE_PAGE,this.config)},r.ClickOnUpgrade=function(){v.instance.PlaySound(D.CLICK),this.data?_.instance.HeroExperience<this.upgrade_config.experience?d.instance.ShowMessage("英雄经验不足"):_.instance.Golds<this.upgrade_config.golds?d.instance.ShowMessage("金币不足"):(v.instance.PlaySound(D.UPGRADE),m.instance.SetDailyMission(h.DailyMissionType.HERO_UPGRADE,1),_.instance.HeroExperience-=this.upgrade_config.experience,_.instance.Golds-=this.upgrade_config.golds,g.instance.OnUpgrade(this.data),y.instance.SetJourney(h.JourneyType.HERO_UPGRADE,this.data.level),this.Refresh(),this.panel.RefreshDatas()):d.instance.ShowMessage("尚未解锁英雄")},r.ClickOnAdvance=function(){v.instance.PlaySound(D.CLICK),d.instance.ShowPopup(h.Pages.HERO_ADVANCE_PAGE,this.data)},t}(c)).prototype,"level",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(O.prototype,"hp",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(O.prototype,"attack",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(O.prototype,"defense",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(O.prototype,"attack_speed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(O.prototype,"experience",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(O.prototype,"golds",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(O.prototype,"upgrade_module",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(O.prototype,"advance_button",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(O.prototype,"level_max_tag",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(O.prototype,"skills",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=O))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAttributePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./HeroDataManager.ts","./UiManager.ts","./GameUtility.ts"],(function(e){var t,i,n,r,a,o,l,u,c,s,g,f,_,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.UITransform,u=e.Label,c=e.Sprite},function(e){s=e.default},function(e){g=e.default},function(e){f=e.default},function(e){_=e.default,p=e.CustomBundles}],execute:function(){var h,v,b,d,m,y,w,z,S,k,H,G,C,D,P,A,R,M,x,L,U,B,F,I,O,j,E,T,Q,X,q,J,K;a._RF.push({},"a42b6+vMLlBQbjpX1xfRCxM","HeroAttributePage",void 0);var N=o.ccclass,V=o.property;e("default",(h=N("HeroAttributePage"),v=V(l),b=V(u),d=V(u),m=V(c),y=V(u),w=V(u),z=V(u),S=V(u),k=V(u),H=V(u),G=V(u),C=V(u),D=V(u),P=V(u),A=V(u),h((x=t((M=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"content",x,r(t)),n(t,"hero_name",L,r(t)),n(t,"hero_description",U,r(t)),n(t,"hero_icon",B,r(t)),n(t,"hp_value",F,r(t)),n(t,"attack_value",I,r(t)),n(t,"defense_value",O,r(t)),n(t,"accuracy_value",j,r(t)),n(t,"crit_value",E,r(t)),n(t,"dodge_value",T,r(t)),n(t,"crit_damage_value",Q,r(t)),n(t,"crit_reduce_value",X,r(t)),n(t,"attack_distance_value",q,r(t)),n(t,"move_speed_value",J,r(t)),n(t,"attack_speed_value",K,r(t)),t.config=null,t}i(t,e);var a=t.prototype;return a.Show=function(){e.prototype.Show.call(this),this.config=this.args,this.Refresh(),this.OnEntrance(this.content)},a.Refresh=function(){var e=g.instance.GetHeroData(this.config.id),t=e?e.level:1,i=e?e.stage+1:1;this.hero_name.string=this.config.name,this.hero_description.string=this.config.description,_.SetSpriteFrame(this.hero_icon,p.UI,"icons/hero/icon_"+this.config.id);var n=g.instance.GetHeroHp(this.config,t,i);this.hp_value.string=n.toString();var r=g.instance.GetHeroAttack(this.config,t,i);this.attack_value.string=r.toString();var a=g.instance.GetHeroDefense(this.config,t,i);this.defense_value.string=a.toString();var o=g.instance.GetHeroAccuracy(this.config,t);this.accuracy_value.string=o.toString();var l=g.instance.GetHeroCrit(this.config,t);this.crit_value.string=l.toString();var u=g.instance.GetHeroDodge(this.config,t);this.dodge_value.string=u.toString();var c=g.instance.GetHeroCritReduce(this.config,t);this.crit_reduce_value.string=c.toString(),this.crit_damage_value.string=this.config.crit_damage.toString(),this.attack_distance_value.string=this.config.attack_distance.toString(),this.move_speed_value.string=this.config.move_speed.toString(),this.attack_speed_value.string=this.config.attack_speed.toString()},a.ClickOnClose=function(){var e=this;this.is_action||this.OnExit(this.content,(function(){f.instance.ClosePage(e)}))},t}(s)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(M.prototype,"hero_name",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(M.prototype,"hero_description",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(M.prototype,"hero_icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(M.prototype,"hp_value",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(M.prototype,"attack_value",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(M.prototype,"defense_value",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(M.prototype,"accuracy_value",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(M.prototype,"crit_value",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(M.prototype,"dodge_value",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(M.prototype,"crit_damage_value",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(M.prototype,"crit_reduce_value",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(M.prototype,"attack_distance_value",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(M.prototype,"move_speed_value",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(M.prototype,"attack_speed_value",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=M))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts","./AccountDataManager.ts","./MissionDataManager.ts"],(function(t){var e,i,n,r,s,a;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){n=t.default},function(t){r=t.GameDatas},function(t){s=t.default},function(t){a=t.default}],execute:function(){i._RF.push({},"c1051YOYKND8IFHGG2YJO2s","HeroDataManager",void 0);t("HeroConfig",(function(){this.id=0,this.name="",this.description="",this.quality=0,this.career=0,this.skeleton="",this.bullet="",this.attack_type=0,this.attack_speed=0,this.move_speed=0,this.attack=[],this.defense=[],this.hp=[],this.accuracy=[],this.dodge=[],this.crit=[],this.crit_reduce=[],this.crit_damage=0,this.skills="",this.debris=0,this.attack_distance="",this.behit_distance=""})),t("HeroUpgradeConfig",(function(){this.level=0,this.experience=0,this.golds=0})),t("HeroAdvanceConfig",(function(){this.id=0,this.stage=0,this.max=0,this.hp=0,this.attack=0,this.defense=0,this.unlock=0,this.cost="",this.description=""}));var o=t("HeroData",(function(){this.id=0,this.status=0,this.level=1,this.stage=0,this.debris=0,this.try=0}));t("default",function(){function t(){this.MAX_LEVEL=70,this.hero_configs=[],this.upgrade_configs=[],this.advance_configs=[],this.hero_datas=[]}var i=t.prototype;return i.LoadConfig=function(){var t=this;n.OnLoad("configs/heroes",(function(e){t.hero_configs=e.hero,t.upgrade_configs=e.upgrade,t.advance_configs=e.advance,console.log(t.advance_configs)}))},i.InitData=function(){if(this.hero_datas=n.OnRead(r.Constant.HERO_DATAS),!this.hero_datas){if(this.hero_datas=[],this.OnCreate(10001).status=2,0!=s.stage)for(var t=0;t<this.hero_configs.length;++t){var e=this.GetHeroData(this.hero_configs[t].id);e||(e=this.OnCreate(this.hero_configs[t].id)),e.debris+=500}this.Save()}console.log(this.hero_datas)},i.GetHeroConfig=function(t){return this.hero_configs.find((function(e){return e.id==t}))},i.GetHeroData=function(t){return this.hero_datas.find((function(e){return e.id==t}))},i.GetUpgradeConfig=function(t){return this.upgrade_configs.find((function(e){return e.level==t}))},i.OnCreate=function(t){var e=new o;return e.id=t,e.status=0,e.level=1,e.stage=0,e.debris=0,this.hero_datas.push(e),console.log("On Create -> ",e),e},i.AddDebris=function(t,e){var i=this.GetHeroData(t);i||(i=this.OnCreate(t)),i.debris+=e,this.Save()},i.OnUnlock=function(t){var e=this.GetHeroData(t.id);e.status=1,e.debris-=t.debris,this.Save();for(var i=0,n=0;n<this.hero_datas.length;++n)0!=this.hero_datas[n].status&&i++;a.instance.SetStoryMission(r.StoryMissionType.UNLOCK_HERO,i)},i.IsUnlock=function(t){var e=this.GetHeroData(t);return!(!e||0==e.status)},i.OnUpgrade=function(t){t.level++,this.Save()},i.GetAdvanceConfig=function(t,e){return this.advance_configs.find((function(i){return i.id==t&&i.stage==e}))},i.GetAdvanceConfigs=function(t){return this.advance_configs.filter((function(e){return e.id==t}))},i.OnAdvance=function(t,e){t.stage+=1,t.debris-=e,this.Save()},i.OnActivate=function(t){var e=this.GetActivateHero();e&&(e.status=1),t.status=2,this.Save()},i.GetActivateHero=function(){return this.hero_datas.find((function(t){return 2==t.status}))},i.GetActivatedHeroIndex=function(){var t=this.GetActivateHero();if(t){var e=this.GetHeroConfig(t.id);return this.hero_configs.indexOf(e)}return 0},i.GetSkill=function(t,e){var i=n.ConvertString(t.skills);return 1==e?i[1]:3==e?i[2]:5==e?i[3]:0},i.GetUpgradeAddition=function(t,e){return t[0]+e*t[1]*t[2]},i.GetHeroHp=function(t,e,i){var n=this.GetUpgradeAddition(t.hp,e),r=this.GetAdvanceConfig(t.id,i);return r&&(n+=r.hp),Math.floor(n)},i.GetHeroAttack=function(t,e,i){var n=this.GetUpgradeAddition(t.attack,e),r=this.GetAdvanceConfig(t.id,i);return r&&(n+=r.attack),Math.floor(n)},i.GetHeroDefense=function(t,e,i){var n=this.GetUpgradeAddition(t.defense,e),r=this.GetAdvanceConfig(t.id,i);return r&&(n+=r.defense),Math.floor(n)},i.GetHeroAccuracy=function(t,e){var i=this.GetUpgradeAddition(t.accuracy,e);return Math.floor(i)},i.GetHeroDodge=function(t,e){var i=this.GetUpgradeAddition(t.dodge,e);return Math.floor(i)},i.GetHeroCrit=function(t,e){var i=this.GetUpgradeAddition(t.crit,e);return Math.floor(i)},i.GetHeroCritReduce=function(t,e){var i=this.GetUpgradeAddition(t.crit_reduce,e);return Math.floor(i)},i.GetPower=function(t,e,i){var n=this.GetHeroHp(t,e,i);n*=.2;var r=this.GetHeroAttack(t,e,i);r*=.2;var s=this.GetHeroDefense(t,e,i);s*=.2;var a=this.GetHeroAccuracy(t,e);a*=.1;var o=this.GetHeroDodge(t,e);o*=.1;var c=this.GetHeroCrit(t,e);c*=.1;var h=this.GetHeroCritReduce(t,e);return h*=.1,Math.floor(n+r+s+a+o+c+h)},i.Save=function(){n.OnSave(r.Constant.HERO_DATAS,this.hero_datas)},e(t,[{key:"HeroConfigs",get:function(){return this.hero_configs}},{key:"HeroDatas",get:function(){return this.hero_datas}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/HeroJourneyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JourneyDataManager.ts","./GenericItem.ts","./ItemDataProxy.ts","./UiManager.ts","./GameOption.ts"],(function(t){var e,i,n,r,a,o,s,l,u,c,f,d,h,p,g,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.Label,l=t.Node,u=t.Color,c=t.Component},function(t){f=t.default},function(t){d=t.default},function(t){h=t.default},function(t){p=t.default},function(t){g=t.default,y=t.AudioClips}],execute:function(){var v,b,m,w,I,R,C,_,z,D,J,P,O;a._RF.push({},"15e1c9pARVJS6Sh/T/Y9WfB","HeroJourneyItem",void 0);var S=o.ccclass,G=o.property;t("default",(v=S("HeroJourneyItem"),b=G(s),m=G(s),w=G(s),I=G(d),R=G([l]),v((z=e((_=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"title",z,r(e)),n(e,"value",D,r(e)),n(e,"description",J,r(e)),n(e,"reward",P,r(e)),n(e,"state_nodes",O,r(e)),e.data=null,e.config=null,e}i(e,t);var a=e.prototype;return a.Init=function(t){this.config=t,this.Refresh()},a.Refresh=function(){this.data=f.instance.GetJourneyData(this.config.id),console.log(this.data),this.title.string=this.config.title,this.description.string=this.config.description;var t=null==this.data?0:this.data.value;this.value.string="("+t+"/"+this.config.goal+")",this.value.color=t<this.config.goal?u.RED:u.GREEN;var e=h.instance.OnParse(this.config.reward);this.reward.Init(e[0]);for(var i=null==this.data?0:this.data.status-1,n=0;n<this.state_nodes.length;n++)this.state_nodes[n].active=n==i},a.ClickOnClaim=function(){var t;if(g.instance.PlaySound(y.CLICK),2==this.data.status){f.instance.OnJourneyComplete(this.data),this.Refresh();var e=h.instance.OnParse(this.config.reward);(t=p.instance).ShowRewards.apply(t,e)}},e}(c)).prototype,"title",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(_.prototype,"value",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(_.prototype,"description",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(_.prototype,"reward",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(_.prototype,"state_nodes",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=_))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroJourneyPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./HeroJourneyItem.ts","./JourneyDataManager.ts","./UiManager.ts","./GameOption.ts"],(function(e){var t,n,i,a,o,r,s,c,u,l,f,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.UITransform},function(e){c=e.default},function(e){u=e.default},function(e){l=e.default},function(e){f=e.default},function(e){h=e.default,p=e.AudioClips}],execute:function(){var g,y,d,S,v,C,m;o._RF.push({},"7adb14MKoNBJ4e3xjVPHxl3","HeroJourneyPage",void 0);var P=r.ccclass,w=r.property;e("default",(g=P("HeroJourneyPage"),y=w(s),d=w([u]),g((C=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"content",C,a(t)),i(t,"items",m,a(t)),t}n(t,e);var o=t.prototype;return o.Show=function(){e.prototype.Show.call(this),this.Refresh(),this.OnEntrance(this.content)},o.Refresh=function(){var e=l.instance.Stage,t=l.instance.GetJourneyConfigs(e);console.log(t);for(var n=0;n<this.items.length;++n)this.items[n].Init(t[n])},o.ClickOnStageReward=function(){var e;if(h.instance.PlaySound(p.CLICK),l.instance.CheckStage()){var t=l.instance.GetStageReward();(e=f.instance).ShowRewards.apply(e,t),l.instance.OnStageComplete(),l.instance.Stage>4?f.instance.ClosePage(this):this.Refresh()}else f.instance.ShowMessage("请先完成所有任务")},o.ClickOnClose=function(){var e=this;this.is_action||(h.instance.PlaySound(p.CLOSE),this.OnExit(this.content,(function(){f.instance.ClosePage(e)})))},t}(c)).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(v.prototype,"items",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=v))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePanel.ts","./HeroAttributeModule.ts","./UiManager.ts","./GameDatas.ts","./GameUtility.ts","./HeroDataManager.ts","./GameOption.ts"],(function(t){var e,i,n,o,a,r,s,l,c,u,h,f,d,_,b,g,p,m,v,k,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.sp,l=t.Sprite,c=t.Label,u=t.Button,h=t.Node,f=t.RichText},function(t){d=t.default},function(t){_=t.default},function(t){b=t.default},function(t){g=t.GameDatas},function(t){p=t.default,m=t.CustomBundles},function(t){v=t.default},function(t){k=t.default,S=t.AudioClips}],execute:function(){var y,w,C,A,I,H,P,O,x,D,z,R,E,G,U,L,M,N,T,F,B,K,j,J,W;a._RF.push({},"15382w5iEdIHITYJxcWq9qb","HeroPage",void 0);var q=r.ccclass,V=r.property;t("default",(y=q("HeroPage"),w=V(_),C=V(s.Skeleton),A=V(l),I=V(l),H=V(c),P=V(u),O=V(u),x=V(h),D=V(f),z=V(h),R=V([l]),y((U=e((G=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"attribute_module",U,o(e)),n(e,"hero",L,o(e)),n(e,"carrer_icon",M,o(e)),n(e,"name_icon",N,o(e)),n(e,"power_label",T,o(e)),n(e,"unlock_button",F,o(e)),n(e,"activate_button",B,o(e)),n(e,"unlock_condition_node",K,o(e)),n(e,"unlock_condition_label",j,o(e)),n(e,"fighting_tag",J,o(e)),n(e,"hero_stars",W,o(e)),e.heroes=[],e.hero_index=0,e.config=null,e.data=null,e}i(e,t);var a=e.prototype;return a.Init=function(){t.prototype.Init.call(this),this.heroes=v.instance.HeroConfigs},a.InitSkeleton=function(){var t=this;p.SetSkeletonData(this.hero,"spine/heroes/"+this.config.skeleton,(function(){t.hero.setSkin("jinjie0"),t.hero.setAnimation(0,"idle",!0),t.hero.premultipliedAlpha=10001==t.config.id,t.hero.setCompleteListener((function(){"attack"!=t.hero.animation&&"skill"!=t.hero.animation||t.hero.setAnimation(0,"idle",!0)}))}))},a.SetHeroAnimation=function(t){if(this.hero.skeletonData&&"idle"==this.hero.animation){var e=Math.random()>.5?"attack":"skill";this.hero.setAnimation(0,e,!1)}},a.SetVisiable=function(t){this.node.active=t,t?(this.hero_index=v.instance.GetActivatedHeroIndex(),this.config=this.heroes[this.hero_index],this.data=v.instance.GetHeroData(this.config.id),this.Refresh(),this.hero.node.on(h.EventType.MOUSE_DOWN,this.SetHeroAnimation,this)):this.hero.node.off(h.EventType.MOUSE_DOWN,this.SetHeroAnimation,this)},a.Refresh=function(){this.attribute_module.Init(this,this.config),this.InitSkeleton(),p.SetSpriteFrame(this.name_icon,m.UI,"icons/hero/name_"+this.config.id),p.SetSpriteFrame(this.carrer_icon,m.UI,"icons/icon_career_"+this.config.career),this.SetHeroStars(this.data),this.RefreshDatas()},a.RefreshDatas=function(){var t=0,e=1;if(this.data&&0!=this.data.status)t=this.data.stage,e=this.data.level,this.unlock_condition_node.active=!1,this.unlock_button.node.active=!1,this.fighting_tag.active=2==this.data.status,this.activate_button.node.active=1==this.data.status;else{var i=this.data?this.data.debris:0;i>=this.config.debris?this.unlock_condition_label.string="集齐碎片：(<color=#00ff00>"+i+"/"+this.config.debris+"</color>)可激活英雄":this.unlock_condition_label.string="集齐碎片：(<color=#ff0000>"+i+"/"+this.config.debris+"</color>)可激活英雄",this.unlock_condition_node.active=!0,this.unlock_button.node.active=!0,this.activate_button.node.active=!1,this.fighting_tag.active=!1}var n=v.instance.GetPower(this.config,e,t);this.power_label.string=p.FormateNumber(n)},a.SetHeroStars=function(t){for(var e=t?t.stage:0,i=0;i<this.hero_stars.length;++i)this.hero_stars[i].node.active=i<e},a.ClickOnInstruction=function(){k.instance.PlaySound(S.CLICK);var t=this.heroes[this.hero_index].id;b.instance.ShowPopup(g.Pages.ACVANCE_INSTRUCTION_PAGE,t)},a.ClickOnArrow=function(t,e){console.log(e),"left"==e?this.hero_index--:"right"==e&&this.hero_index++,this.hero_index=(this.hero_index+5)%5,console.log(this.hero_index),this.config=this.heroes[this.hero_index],this.data=v.instance.GetHeroData(this.config.id),this.Refresh()},a.ClickOnUnlock=function(){if(k.instance.PlaySound(S.CLICK),this.data&&0==this.data.status){if(this.data.debris<this.config.debris)return console.log("碎片不足"),void b.instance.ShowMessage("英雄碎片不足");v.instance.OnUnlock(this.config),this.Refresh()}},a.ClickOnActivate=function(){k.instance.PlaySound(S.CLICK),this.data&&0!=this.data.status&&(v.instance.OnActivate(this.data),this.Refresh())},a.ClickOnJourney=function(){k.instance.PlaySound(S.CLICK),b.instance.ShowPopup(g.Pages.HERO_JOURNEY_PAGE)},e}(d)).prototype,"attribute_module",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(G.prototype,"hero",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(G.prototype,"carrer_icon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(G.prototype,"name_icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(G.prototype,"power_label",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(G.prototype,"unlock_button",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(G.prototype,"activate_button",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(G.prototype,"unlock_condition_node",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(G.prototype,"unlock_condition_label",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(G.prototype,"fighting_tag",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(G.prototype,"hero_stars",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=G))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkillInfoPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GameOption.ts","./SkillDataManager.ts","./GameUtility.ts","./UserDataManager.ts"],(function(t){var i,e,n,o,r,a,l,c,s,u,f,p,h,d,g,b,v,y,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.UITransform,c=t.Sprite,s=t.Label,u=t.RichText,f=t.Node},function(t){p=t.default},function(t){h=t.default},function(t){d=t.default,g=t.AudioClips},function(t){b=t.default},function(t){v=t.default,y=t.CustomBundles},function(t){m=t.default}],execute:function(){var _,w,S,z,k,x,C,D,I,L,P,O,R,U,M,E,G,H,T,A,F,B,K,j,N;r._RF.push({},"b5b619vGDpIT6Qa5eRWDz22","HeroSkillInfoPage",void 0);var Q=a.ccclass,V=a.property;t("default",(_=Q("HeroSkillInfoPage"),w=V(l),S=V(c),z=V(s),k=V(s),x=V(s),C=V(u),D=V(u),I=V(u),L=V(f),P=V(s),O=V(f),_((M=i((U=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"content",M,o(i)),n(i,"icon",E,o(i)),n(i,"title",G,o(i)),n(i,"type",H,o(i)),n(i,"level_text",T,o(i)),n(i,"description",A,o(i)),n(i,"cooldown",F,o(i)),n(i,"condition",B,o(i)),n(i,"upgrade_node",K,o(i)),n(i,"price",j,o(i)),n(i,"level_max",N,o(i)),i.id=0,i.config=null,i.data=null,i.unlock_stages=[0,1,3,5],i}e(i,t);var r=i.prototype;return r.Show=function(){t.prototype.Show.call(this),this.id=this.args,this.data=b.instance.GetSkillData(this.id),this.Refresh(),this.OnEntrance(this.content)},r.Refresh=function(){var t=this.data?this.data.level:1;if(this.level_text.string="等级 "+t,this.config=b.instance.GetSkillConfig(this.id,t),v.SetSpriteFrame(this.icon,y.UI,"icons/skills/"+this.config.icon),this.title.string=this.config.name,this.description.string=this.config.description,this.cooldown.string=this.config.tips,1==this.config.type?this.type.string="类型：主动技能":2==this.config.type&&(this.type.string="类型：被动技能"),this.data)this.condition.node.active=!1,this.data.level<b.instance.MAX_SKILL_LEVEL?(this.level_max.active=!1,this.price.string=this.config.cost.toString(),this.upgrade_node.active=!0):(this.upgrade_node.active=!1,this.level_max.active=!0);else{this.upgrade_node.active=!1,this.condition.node.active=!0;var i=this.config.id%1e3-1;this.condition.string="英雄到达</c><color=#16CD30> "+this.unlock_stages[i]+'阶 </color>自动激活"',this.level_max.active=!1}},r.ClickOnUpgrade=function(){d.instance.PlaySound(g.CLICK),m.instance.Diamond<this.config.cost?h.instance.ShowMessage("勾玉数量不足"):(m.instance.Diamond-=this.config.cost,b.instance.OnUpgrade(this.data),this.Refresh())},r.ClickOnClose=function(){var t=this;d.instance.PlaySound(g.CLOSE),this.is_action||this.OnExit(this.content,(function(){h.instance.ClosePage(t)}))},i}(p)).prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(U.prototype,"icon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(U.prototype,"title",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(U.prototype,"type",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(U.prototype,"level_text",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(U.prototype,"description",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(U.prototype,"cooldown",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(U.prototype,"condition",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(U.prototype,"upgrade_node",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(U.prototype,"price",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(U.prototype,"level_max",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=U))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkillDataManager.ts","./GameUtility.ts","./UiManager.ts","./GameDatas.ts","./GameOption.ts"],(function(t){var e,i,n,a,l,r,o,c,u,s,p,f,d,v,S,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,o=t.Label,c=t.Sprite,u=t.Component},function(t){s=t.default},function(t){p=t.default,f=t.CustomBundles},function(t){d=t.default},function(t){v=t.GameDatas},function(t){S=t.default,g=t.AudioClips}],execute:function(){var h,m,y,b,_,k,I;l._RF.push({},"26c40daabtJSJEWlQMobCMN","HeroSkillItem",void 0);var C=r.ccclass,D=r.property;t("default",(h=C("HeroSkillItem"),m=D(o),y=D(c),h((k=e((_=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,n(e,"level_value",k,a(e)),n(e,"icon",I,a(e)),e.id=0,e}i(e,t);var l=e.prototype;return l.Init=function(t){this.id=t;var e=s.instance.GetSkillData(t),i=e?e.level:1;this.level_value.string=i.toString();var n=s.instance.GetSkillConfig(t,i);p.SetSpriteFrame(this.icon,f.UI,"icons/skills/"+n.icon),this.icon.grayscale=!e},l.OnClick=function(){S.instance.PlaySound(g.CLICK),d.instance.ShowPopup(v.Pages.HERO_SKILL_INFO_PAGE,this.id)},e}(u)).prototype,"level_value",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(_.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=_))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/HitEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,c,o,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){c=t.cclegacy,o=t._decorator,a=t.sp,s=t.Component}],execute:function(){var f,l,u,p,v;c._RF.push({},"47c26T18sBErYgvknR/ml9O","HitEffect",void 0);var h=o.ccclass,d=o.property;t("default",(f=h("HitEffect"),l=d(a.Skeleton),f((v=e((p=function(t){function e(){for(var e,i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c))||this,n(e,"effect",v,r(e)),e}i(e,t);var c=e.prototype;return c.Init=function(){var t=this;this.effect.setCompleteListener((function(e){"1"==e.animation.name&&(t.node.active=!1)})),this.node.active=!1},c.Activate=function(t){this.node.active||(this.node.active=!0,this.effect.setAnimation(0,"1",!1))},e}(s)).prototype,"effect",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));c._RF.pop()}}}));

System.register("chunks:///_virtual/IdleRewardPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GenericItem.ts","./ItemDataProxy.ts","./UiManager.ts","./LevelDataManager.ts","./DataProxy.ts","./UserDataManager.ts","./GameOption.ts"],(function(t){var e,n,i,a,r,o,s,l,c,u,f,d,h,p,w,g,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.UITransform,l=t.Label},function(t){c=t.default},function(t){u=t.default},function(t){f=t.ItemData},function(t){d=t.default},function(t){h=t.default},function(t){p=t.default},function(t){w=t.default},function(t){g=t.default,v=t.AudioClips}],execute:function(){var y,b,m,R,I,P,C,S,_,D,O,z,L;r._RF.push({},"be33de1dsNLaYUBHgKkKvR2","IdleRewardPage",void 0);var M=o.ccclass,x=o.property;t("default",(y=M("IdleRewardPage"),b=x(s),m=x(l),R=x(l),I=x([l]),P=x([u]),y((_=e((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"content",_,a(e)),i(e,"tips",D,a(e)),i(e,"time",O,a(e)),i(e,"infos",z,a(e)),i(e,"rewards",L,a(e)),e.now=0,e.reward_datas=[],e}n(e,t);var r=e.prototype;return r.Show=function(){var e=this;t.prototype.Show.call(this),this.SetRewards(),this.Refresh(),this.tips.node.active=!1,this.OnEntrance(this.content,(function(){e.tips.node.active=!0}))},r.Refresh=function(){for(var t=0;t<this.rewards.length;++t)this.rewards[t].Init(this.reward_datas[t])},r.SetRewards=function(){this.now=(new Date).getTime();var t=this.now-w.instance.IdleRewardRecord,e=Math.floor(t/6e4);if(e<60)this.time.string=e+"分钟";else{var n=Math.floor(e/60),i=Math.floor(e%60);this.time.string=n+"小时"+i+"分钟"}for(var a=h.instance.GetOfflineReward(),r=p.ConvertString(a,","),o=0;o<this.infos.length;++o)this.infos[o].string="+"+r[o]+"/分钟";for(var s=[1e3,1002,1001],l=0;l<s.length;++l){var c=new f;c.id=s[l],c.count=r[l]*e,this.reward_datas.push(c)}},r.ClickOnClose=function(){var t=this;g.instance.PlaySound(v.CLOSE),this.is_action||this.OnExit(this.content,(function(){d.instance.ClosePage(t)}))},r.ClickOnClaim=function(){var t=this;g.instance.PlaySound(v.CLICK),this.is_action||(w.instance.IdleRewardRecord=this.now,this.OnExit(this.content,(function(){var e;d.instance.ClosePage(t),(e=d.instance).ShowRewards.apply(e,t.reward_datas)})))},e}(c)).prototype,"content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"tips",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(S.prototype,"time",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(S.prototype,"infos",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(S.prototype,"rewards",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=S))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/IProcessor.ts",["cc"],(function(c){var e,r;return{setters:[function(c){e=c.cclegacy,r=c._decorator}],execute:function(){e._RF.push({},"7c5ddDyQnhMlLTGpbkBKJLR","IProcessor",void 0);r.ccclass,r.property,c("Banner",(function(){this.banner=null,this.times=0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemDataProxy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiManager.ts","./DataProxy.ts","./EnergyManager.ts","./GameDatas.ts","./HeroDataManager.ts","./PartnerDataManager.ts","./UserDataManager.ts"],(function(t){var n,e,i,o,a,r,s,c,u;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){i=t.default},function(t){o=t.default},function(t){a=t.default},function(t){r=t.GameDatas},function(t){s=t.default},function(t){c=t.default},function(t){u=t.default}],execute:function(){e._RF.push({},"2e57eqz2d9F1482shPxLqzM","ItemDataProxy",void 0);t("ItemType",function(t){return t[t.None=0]="None",t[t.Currency=1]="Currency",t}({})),t("ItemConfig",(function(){this.id=0,this.type=0,this.name="",this.description="",this.quality=0,this.icon="",this.objects=""}));var f=t("ItemData",function(){function t(){this.id=0,this.count=0}return t.OnParse=function(n,e){void 0===e&&(e="_");var i=o.ConvertString(n,e),a=new t;return a.id=i[0],a.count=i[1],a},t}());t("default",function(){function t(){this.item_configs=[]}var e=t.prototype;return e.LoadConfig=function(){var t=this;o.OnLoad("configs/items",(function(n){t.item_configs=n}))},e.GetItemConfig=function(t){return this.item_configs.find((function(n){return n.id==t}))},e.OnParse=function(t,n,e){void 0===n&&(n=";"),void 0===e&&(e=",");for(var i=[],a=t.split(n),r=0;r<a.length;++r){var s=new f,c=o.ConvertString(a[r],e);s.id=c[0],s.count=c[1],i.push(s)}return i},e.OnAddition=function(t){var n=this.GetItemConfig(t.id);if(1==n.type)switch(n.id){case 1e3:console.log("增加玩家经验 -> "+t.count),u.instance.AddExperience(t.count,(function(t){i.instance.ShowTopPopup(r.Pages.USER_UPGRADE_PAGE,t)}));break;case 1001:u.instance.Golds+=t.count;break;case 1002:u.instance.HeroExperience+=t.count;break;case 1003:u.instance.Diamond+=t.count;break;case 1004:a.instance.OnAddition(t.count)}else if(2==n.type){var e=parseInt(n.objects);s.instance.AddDebris(e,t.count)}else if(4==n.type)for(var f=o.ConvertString(n.objects,","),d=0;d<f.length;++d){var h=Math.floor(Math.random()*f.length);c.instance.AddCards(f[h],1)&&i.instance.ShowTopPopup(r.Pages.UNLOCK_CHARACTER_PAGE,{type:2,id:f[h]})}},e.OnConvertItem=function(n){var e=t.instance.GetItemConfig(n.id);if(3==e.type){var i=o.ConvertString(e.objects,","),a=Math.floor(Math.random()*i.length),r=new f;return r.id=i[a],r.count=n.count,r}return n},e.GetHeroDebris=function(t){for(var n=0;n<this.item_configs.length;++n){if(2==this.item_configs[n].type)if(parseInt(this.item_configs[n].objects)==t){var e=new f;return e.id=this.item_configs[n].id,e.count=60,e}}return null},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemDetailsPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./ItemDataProxy.ts","./GameUtility.ts","./GameOption.ts"],(function(t){var e,i,n,r,a,o,c,l,s,u,p,f,m,h,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.UITransform,l=t.Sprite,s=t.Label},function(t){u=t.default},function(t){p=t.default},function(t){f=t.default},function(t){m=t.default,h=t.CustomBundles},function(t){g=t.default,b=t.AudioClips}],execute:function(){var d,y,_,v,I,w,P,S,z,C,D,U,k,L,O;a._RF.push({},"ecb88OVgvtHgaNse3nXLoUM","ItemDetailsPage",void 0);var F=o.ccclass,R=o.property;t("default",(d=F("ItemDetailsPage"),y=R(c),_=R(l),v=R(l),I=R(s),w=R(s),P=R(s),d((C=e((z=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"content",C,r(e)),n(e,"item_background",D,r(e)),n(e,"item_icon",U,r(e)),n(e,"item_name",k,r(e)),n(e,"item_description",L,r(e)),n(e,"tips",O,r(e)),e}i(e,t);var a=e.prototype;return a.Show=function(){var e=this;t.prototype.Show.call(this),this.tips.node.active=!1,this.OnEntrance(this.content,(function(){e.tips.node.active=!0})),this.Refresh()},a.Refresh=function(){var t=this.args,e=f.instance.GetItemConfig(t.id);this.item_name.string=e.name,this.item_description.string=e.description;var i="icons/items/frame_0"+e.quality;m.SetSpriteFrame(this.item_background,h.UI,i);var n="icons/"+e.icon;m.SetSpriteFrame(this.item_icon,h.UI,n)},a.ClickOnClose=function(){var t=this;this.is_action||(g.instance.PlaySound(b.CLICK),this.OnExit(this.content,(function(){p.instance.ClosePage(t)})))},e}(u)).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(z.prototype,"item_background",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(z.prototype,"item_icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(z.prototype,"item_name",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(z.prototype,"item_description",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(z.prototype,"tips",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=z))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/JourneyDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts","./ItemDataProxy.ts"],(function(t){var e,s,n,i,o;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy},function(t){n=t.default},function(t){i=t.GameDatas},function(t){o=t.default}],execute:function(){s._RF.push({},"d9feaP78N5DtK+c1XLTsnDf","JourneyDataManager",void 0);t("JourneyStageConfig",(function(){this.stage=0,this.rewards=""})),t("JourneyConfig",(function(){this.id=0,this.stage=0,this.title="",this.description="",this.type=0,this.goal=0,this.reward=""}));var a=t("JourneyData",(function(){this.id=0,this.status=0,this.value=0})),r=t("JourneyStorage",(function(){this.stage=0,this.journeys=[]}));t("default",function(){function t(){this.stage_configs=[],this.journey_configs=[],this.storege=null}var s=t.prototype;return s.LoadConfig=function(){var t=this;n.OnLoad("configs/journey",(function(e){t.stage_configs=e.stages,t.journey_configs=e.journeys}))},s.InitData=function(){if(this.storege=n.OnRead(i.Constant.JOURNEY_DATA),!this.storege){this.storege=new r,this.storege.stage=1,this.storege.journeys=[];for(var t=0;t<this.journey_configs.length;++t)if(this.journey_configs[t].stage==this.storege.stage){var e=new a;e.id=this.journey_configs[t].id,e.status=1,e.value=0,this.storege.journeys.push(e)}}},s.GetJourneyConfig=function(t){return this.journey_configs.find((function(e){return e.id==t}))},s.GetJourneyData=function(t){return this.storege.journeys.find((function(e){return e.id==t}))},s.GetJourneyConfigs=function(t){return this.journey_configs.filter((function(e){return e.stage==t}))},s.SetJourney=function(t,e){for(var s=0,n=0;n<this.storege.journeys.length;++n){var o=this.storege.journeys[n];if(2!=o.status){var a=this.GetJourneyConfig(o.id);if(console.log(a),a.type==t)switch(s++,a.type){case i.JourneyType.BOUNTY_MISSION:case i.JourneyType.PARTNER_FIGHTING:case i.JourneyType.HERO_ADVANCE:case i.JourneyType.LOTTERY:case i.JourneyType.CLEAR_LEVEL:case i.JourneyType.PARTNER_UPGRADE:case i.JourneyType.DAILY_MISSION:o.value+=e,o.value>=a.goal&&(o.status=2);break;case i.JourneyType.HERO_UPGRADE:o.value=e,o.value>=a.goal&&(o.status=2);break;case i.JourneyType.PASS_LEVEL:o.value=e,o.value==a.goal&&(o.status=2)}}}s>0&&this.Save()},s.OnJourneyComplete=function(t){2==t.status&&(t.status=3,this.Save())},s.CheckStage=function(){for(var t=!0,e=0;e<this.journey_configs.length;++e)if(this.journey_configs[e].stage==this.storege.stage){var s=this.GetJourneyData(this.journey_configs[e].id);if(!s||3!=s.status){t=!1;break}}return t},s.GetStageReward=function(){for(var t=null,e=0;e<this.stage_configs.length;++e)this.stage_configs[e].stage==this.storege.stage&&(t=this.stage_configs[e]);var s=[];return t&&(s=o.instance.OnParse(t.rewards)),s},s.OnStageComplete=function(){if(this.storege.stage++,this.storege.journeys=[],this.storege.stage<=this.stage_configs.length)for(var t=this.GetJourneyConfigs(this.storege.stage),e=0;e<t.length;++e){var s=new a;s.id=t[e].id,s.status=1,s.value=0}this.Save()},s.Save=function(){n.OnSave(i.Constant.JOURNEY_DATA,this.storege)},e(t,[{key:"Stage",get:function(){return this.storege.stage}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,s._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,s,o,e,n,a,c,r,u,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.Sprite,r=t.UIOpacity,u=t.Vec3,p=t.Component}],execute:function(){var h,l,y,d,f,v;n._RF.push({},"bcda5pBpP1Dv7vOx4/8+C3j","Joystick",void 0);var k=a.ccclass,b=a.property;t("default",(h=k("Joystick"),l=b(c),h((f=i((d=function(t){function i(){for(var i,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,o(i,"stick",f,e(i)),o(i,"radius",v,e(i)),i.opacity=null,i.status=0,i}s(i,t);var n=i.prototype;return n.Init=function(){this.status=0,this.opacity=this.getComponent(r)},n.Activate=function(t,i){this.status=1,this.opacity.opacity=255,this.node.active=!0,this.node.position=new u(t,i,0),this.stick.node.position=u.ZERO},n.OnHide=function(){this.stick.node.position=u.ZERO,this.status=2},n.SetPositon=function(t,i){if(1==this.status){i>this.radius&&(i=this.radius);var s=i*Math.cos(t),o=i*Math.sin(t);this.stick.node.setPosition(s,o)}},n.update=function(t){2==this.status&&(this.opacity.opacity-=1020*t,this.opacity.opacity<=0&&(this.opacity.opacity=0,this.node.active=!1,this.status=0))},i}(p)).prototype,"stick",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(d.prototype,"radius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=d))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts","./ItemDataProxy.ts","./GameUtility.ts","./BattleStatistics.ts","./AccountDataManager.ts"],(function(t){var e,a,s,r,n,i,h,l,c,o,f,u;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,n=t.Component},function(t){i=t.default},function(t){h=t.GameDatas},function(t){l=t.ItemData,c=t.default},function(t){o=t.default},function(t){f=t.default},function(t){u=t.default}],execute:function(){var p,v;s._RF.push({},"d841bsVWG5C96BF1wPHxvx+","LevelDataManager",void 0);var d=r.ccclass,g=(r.property,t("ChapterConfig",(function(){this.id=0,this.name="",this.maps=""})),t("ChapterReward",(function(){this.id=0,this.chapter=0,this.stars=0,this.rewards=""})),t("LevelConfig",(function(){this.id=0,this.stage=0,this.chapter=0,this.index=0,this.monster_level=0,this.monster_power=0,this.partners=0,this.time=0,this.first_rewards="",this.generic_rewards="",this.special_rewards="",this.offline="",this.skill_power=0,this.skill_cd=0,this.map=0,this.enemy_skills="",this.power=0,this.difficult=0,this.conditions=""})),t("ChapterData",(function(){this.stage=0,this.chapter=0,this.rewards=[],this.levels=[]}))),_=t("LevelData",(function(){this.status=0,this.stars=0})),C=t("LevelReward",function(t){function a(){for(var e,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).probability=0,e}return e(a,t),a}(l)),w=t("LevelGoals",["击败敌方所有目标","{0}秒内通关副本","过关英雄生命不低于{0}%","使用{0}次大招"]);t("default",d("LevelDataManager")(((v=function(t){function s(){for(var e,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).chapter_configs=[],e.chapter_rewards=[],e.level_configs=[],e.chapter_datas=[],e._statistics=null,e}e(s,t);var r=s.prototype;return r.LoadConfig=function(){var t=this;i.OnLoad("configs/levels",(function(e){t.chapter_configs=e.chapters,t.chapter_rewards=e.rewards,t.level_configs=e.levels}))},r.InitData=function(){if(this.chapter_datas=i.OnRead(h.Constant.LEVEL_DATAS),!this.chapter_datas){if(this.chapter_datas=[],0==u.stage)this.CreateLevelData(1,1);else for(var t=0;t<this.level_configs.length;++t){var e=this.GetChapterData(this.level_configs[t].stage,this.level_configs[t].chapter);if(e){var a=new _;a.stars=0,a.status=1,e.levels.push(a)}else this.CreateLevelData(this.level_configs[t].stage,this.level_configs[t].chapter)}this.Save()}},r.GetChapterConfig=function(t){return this.chapter_configs.find((function(e){return e.id==t}))},r.GetLevelConfig=function(t,e,a){return this.level_configs.find((function(s){return s.stage==t&&s.chapter==e&&s.index==a}))},r.GetLevelConfigs=function(t,e){return this.level_configs.filter((function(a){return a.stage==t&&a.chapter==e}))},r.CreateLevelData=function(t,e){var a=new g;a.chapter=e,a.stage=t,a.rewards=[0,0,0],a.levels=[];var s=new _;s.stars=0,s.status=1,a.levels.push(s),this.chapter_datas.push(a)},r.GetChapterData=function(t,e){return this.chapter_datas.find((function(a){return a.stage==t&&a.chapter==e}))},r.GetChapterDatas=function(t){return this.chapter_datas.filter((function(e){return e.stage==t}))},r.GetLevelData=function(t){var e=this.GetChapterData(t.stage,t.chapter);return e&&t.index<=e.levels.length?e.levels[t.index-1]:null},r.OnComplete=function(t,e,a,s){var r=this.GetChapterData(t,e);if(r){var n=r.levels[a-1];if(1==n.status){n.status=2;var i=a++;this.OnUnlockLevel(t,e,i)}n.stars<s&&(n.stars=s),this.Save()}else console.log("无效关卡数据")},r.OnUnlockLevel=function(t,e,a){var s=this.GetLevelConfigs(t,e);if(a>s.length&&(a=1,++e>this.chapter_configs.length&&(e=1,t++),s=this.GetLevelConfigs(t,e)),!(s.length<=0)){var r=this.GetChapterData(t,e);if(r){var n=new _;n.stars=0,n.status=1,r.levels.push(n)}else this.CreateLevelData(e,t)}},r.GetOfflineReward=function(){var t=this.GetChapterDatas(1);t.sort((function(t,e){return t.chapter-e.chapter}));for(var e=1,a=1,s=0;s<t.length;++s){for(var r=t[s],n=0;n<r.levels.length&&2==r.levels[n].status;++n)a=n+1;e=r.chapter}return this.GetLevelConfig(1,e,a).offline},r.CheckStageComplete=function(t){return this.GetChapterDatas(t).length>0},r.GetChapterCompletedAmount=function(t){var e=0;for(e=0;e<t.levels.length&&2==t.levels[e].status;++e);return e},r.GetChapterTotalStars=function(t){return 3*this.GetLevelConfigs(1,t).length},r.GetChapterStars=function(t){var e=this.GetChapterData(1,t);if(!e)return 0;for(var a=0,s=0;s<e.levels.length;++s)a+=e.levels[s].stars;return a},r.GetChapterMaps=function(t){var e=this.GetChapterConfig(t);return i.ConvertString(e.maps,",")},r.GetChapterRewards=function(t){return this.chapter_rewards.filter((function(e){return e.chapter==t}))},r.ReceiveChapterRewards=function(t){var e=this.GetChapterRewards(t.chapter).indexOf(t),a=this.GetChapterData(1,t.chapter);a&&0==a.rewards[e]&&(a.rewards[e]=1,this.Save())},r.GetChapterRewardItems=function(t){return c.instance.OnParse(t.rewards)},r.GetDisplayRewards=function(t,e){var a=[];if(t.special_rewards)for(var s=t.special_rewards.split(";"),r=0;r<s.length;++r){var n=this.SetLevelReward(s[r]);a.push(n)}for(var i=(2==e?t.generic_rewards:t.first_rewards).split(";"),h=0;h<i.length;++h){var l=this.SetLevelReward(i[h]);a.push(l)}return a},r.SetLevelReward=function(t){var e=new C,a=i.ConvertString(t,",");return e.id=a[0],e.count=a[1],e.probability=a.length<3?100:a[2],e},r.GetLevelRewards=function(t,e){var a=[],s=2==e?t.generic_rewards:t.first_rewards,r=c.instance.OnParse(s);a.push.apply(a,r);for(var n=t.special_rewards.split(";"),h=0;h<n.length;++h){var o=i.ConvertString(n[h]);if(100*Math.random()<o[2]){var f=new l;f.id=o[0],f.count=o[1],a.push(f)}}return a},r.GetConditions=function(t){for(var e=[],a=t.conditions.split(";"),s=0;s<a.length;++s){var r=i.ConvertString(a[s],","),n=r[0]-1,h=o.FormatString(w[n],r[1]);e.push(h)}return e},r.InitStatistics=function(t){console.log(t),this._statistics=new f,this._statistics.stage=t.stage,this._statistics.chapter=t.chapter,this._statistics.index=t.index,this._statistics.skill=0},r.Save=function(){i.OnSave(h.Constant.LEVEL_DATAS,this.chapter_datas)},a(s,[{key:"statistics",get:function(){return this._statistics}}],[{key:"instance",get:function(){return this._instance||(this._instance=new s),this._instance}}]),s}(n))._instance=void 0,p=v))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelRewardItem.ts","./LevelDataManager.ts","./EnergyManager.ts","./UiManager.ts","./GameDatas.ts","./MissionDataManager.ts","./GameUtility.ts","./LevelMapManager.ts","./MonsterDataManager.ts","./JourneyDataManager.ts","./GuideDataManager.ts","./GameOption.ts"],(function(t){var e,n,i,a,s,o,r,l,c,u,f,h,g,d,p,b,y,_,S,L,E,w,m,v,C,G;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.Label,l=t.Sprite,c=t.Node,u=t.Button,f=t.Toggle,h=t.Component},function(t){g=t.default},function(t){d=t.default},function(t){p=t.default},function(t){b=t.default},function(t){y=t.GameDatas},function(t){_=t.default},function(t){S=t.default,L=t.CustomBundles},function(t){E=t.default},function(t){w=t.default},function(t){m=t.default},function(t){v=t.default},function(t){C=t.default,G=t.AudioClips}],execute:function(){var M,D,R,A,I,P,z,N,T,H,O,k,B,Y,F,J,U,x,V,K,j,q,W,Z,Q;s._RF.push({},"fa526zqEiZCLJleLiu1CUYe","LevelItem",void 0);var X=o.ccclass,$=o.property;t("default",(M=X("LevelItem"),D=$(r),R=$(r),A=$(r),I=$(l),P=$(r),z=$(c),N=$(u),T=$(u),H=$([r]),O=$([f]),k=$([g]),M((F=e((Y=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"level",F,a(e)),i(e,"enemy_power",J,a(e)),i(e,"reward_title",U,a(e)),i(e,"boss_icon",x,a(e)),i(e,"boss_name",V,a(e)),i(e,"lock_tag",K,a(e)),i(e,"challenge_button",j,a(e)),i(e,"clear_button",q,a(e)),i(e,"conditions",W,a(e)),i(e,"stars",Z,a(e)),i(e,"rewards",Q,a(e)),e.config=null,e.data=null,e.status=0,e}n(e,t);var s=e.prototype;return s.Init=function(t){this.config=t,this.level.string=t.chapter+"-"+t.index,this.enemy_power.string=S.FormateNumber(this.config.power),this.SetMapInfos(),this.SetRewards(),this.Refresh(),this.node.active=!0},s.SetMapInfos=function(){var t=this;E.LoadLevelMap(this.config.chapter,this.config.index,(function(e){var n=E.GetBoss(e.enemys);if(0!=n){var i=w.instance.GetMnsterConfig(n);t.boss_name.string=i.name,S.SetSpriteFrame(t.boss_icon,L.UI,"icons/boss/icon_"+n)}}))},s.SetRewards=function(){for(var t=d.instance.GetDisplayRewards(this.config,this.status),e=0;e<this.rewards.length;++e)e<t.length?this.rewards[e].Init(t[e]):this.rewards[e].node.active=!1},s.Refresh=function(){this.data=d.instance.GetLevelData(this.config),this.data?(this.status=this.data.status,this.SetStars(this.data.stars)):(this.status=0,this.SetStars(0)),this.reward_title.string=0==this.status?"首通奖励":"通关奖励",this.SetConditions(),this.lock_tag.active=0==this.status,this.challenge_button.node.active=0!=this.status,this.clear_button.node.active=0!=this.status},s.SetStars=function(t){for(var e=0;e<this.stars.length;++e)this.stars[e].isChecked=e<t},s.SetConditions=function(){for(var t=d.instance.GetConditions(this.config),e=0;e<this.conditions.length;++e)e<t.length?(this.conditions[e].string=t[e],this.conditions[e].node.active=!0):this.conditions[e].node.active=!1},s.ClickOnChallenge=function(){(C.instance.PlaySound(G.CLICK),p.instance.energy<y.SINGLE_CHALLENGE_COST)?b.instance.ShowPopup(y.Pages.REPLENISH_ENERGY_PAGE):(3==v.instance.GetGuideStep(4)&&(v.instance.SetGuide(4,!0),b.instance.CloseGuide()),1==this.config.stage?_.instance.SetDailyMission(y.DailyMissionType.EASY_LEVEL,1):2==this.config.stage&&_.instance.SetDailyMission(y.DailyMissionType.HARD_LEVEL,1),p.instance.OnCost(y.SINGLE_CHALLENGE_COST),d.instance.InitStatistics(this.config),b.instance.ClearPages(),b.instance.ShowLoading("battle",(function(){b.instance.ShowBasePage(y.Pages.BATTLE_PAGE)})))},s.ClickOnClear=function(){if(C.instance.PlaySound(G.CLICK),this.data.stars<3)b.instance.ShowMessage("3星完成关卡后解锁清关功能");else if(p.instance.energy<y.SINGLE_CHALLENGE_COST)b.instance.ShowPopup(y.Pages.REPLENISH_ENERGY_PAGE);else{1==this.config.stage?_.instance.SetDailyMission(y.DailyMissionType.EASY_CLEAR,1):2==this.config.stage&&_.instance.SetDailyMission(y.DailyMissionType.HARD_CLEAR,1),p.instance.OnCost(y.SINGLE_CHALLENGE_COST),m.instance.SetJourney(y.JourneyType.CLEAR_LEVEL,1);var t=d.instance.GetLevelRewards(this.config,this.data.status);b.instance.ShowPopup(y.Pages.REWARD_PAGE,t)}},e}(h)).prototype,"level",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(Y.prototype,"enemy_power",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(Y.prototype,"reward_title",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(Y.prototype,"boss_icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(Y.prototype,"boss_name",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(Y.prototype,"lock_tag",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(Y.prototype,"challenge_button",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(Y.prototype,"clear_button",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(Y.prototype,"conditions",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=e(Y.prototype,"stars",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=e(Y.prototype,"rewards",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=Y))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelMapManager.ts",["cc","./DataProxy.ts"],(function(t){var n,i;return{setters:[function(t){n=t.cclegacy},function(t){i=t.default}],execute:function(){n._RF.push({},"75577qcoupBd4KKF3Ar/atP","LevelMapManager",void 0);t("LevelMap",(function(){this.enemys=[],this.props=[],this.wall=[]})),t("EnemyInfo",(function(){this.id=0,this.turn=0,this.delay=0,this.trigger=0,this.jumps=!1,this.posx=0,this.posy=0})),t("PropInfo",(function(){this.id=0,this.turn=0,this.delay=0,this.trigger=0,this.posx=0,this.posy=0})),t("WallInfo",(function(){this.id=0,this.posx=0})),t("default",function(){function t(){}return t.LoadLevelMap=function(t,n,e){i.OnLoad("maps/level"+t+"_"+n,(function(t){e&&e(t)}))},t.GetBoss=function(t){for(var n=0;n<t.length;n++)if(t[n].id<2e3)return t[n].id;return 0},t.CalculateTotalWaves=function(t){for(var n=0,i=0;i<t.length;i++)n<t[i].turn&&(n=t[i].turn);return n},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePanel.ts","./ChapterItem.ts","./MenuToggle.ts","./LevelDataManager.ts","./UiManager.ts","./GameDatas.ts","./GuideDataManager.ts","./GameOption.ts"],(function(e){var t,n,i,a,s,u,r,o,c,l,h,f,d,p,m,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,u=e._decorator,r=e.Button},function(e){o=e.default},function(e){c=e.default},function(e){l=e.default},function(e){h=e.default},function(e){f=e.default},function(e){d=e.GameDatas},function(e){p=e.default},function(e){m=e.default,G=e.AudioClips}],execute:function(){var _,S,g,v,P,b,y,C,I;s._RF.push({},"baa4euNYf1LRqzuDHJj0VAl","LevelPage",void 0);var L=u.ccclass,D=u.property;e("default",(_=L("LevelPage"),S=D(r),g=D([l]),v=D([c]),_((y=t((b=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return t=e.call.apply(e,[this].concat(s))||this,i(t,"team_button",y,a(t)),i(t,"menus",C,a(t)),i(t,"chapter_items",I,a(t)),t.menu_index=0,t.datas=[],t}n(t,e);var s=t.prototype;return s.Init=function(){e.prototype.Init.call(this);for(var t=0;t<this.menus.length;++t)this.menus[t].Init(t,this.OnSelectMenu.bind(this))},s.SetVisiable=function(e){if(this.node.active=e,e){this.menu_index=0;for(var t=0;t<this.menus.length;++t)this.menus[t].OnSelect(this.menu_index==t);this.Refresh()}},s.Refresh=function(){var e=this.menu_index+1;this.datas=h.instance.GetChapterDatas(e),this.SetItems();var t=p.instance.GetGuideStep(3);if(1==t){var n=p.instance.GetGuide(3,2);p.instance.SetGuide(3,!1),f.instance.ShowGuide(n)}else if(2==t){var i=p.instance.GetGuide(3,3);f.instance.ShowGuide(i,this.team_button.node)}else{if(p.instance.CheckComplete(3))if(0==(t=p.instance.GetGuideStep(4))){var a=p.instance.GetGuide(4,1);p.instance.SetGuide(4,!1),f.instance.ShowGuide(a)}else if(2==t){var s=p.instance.GetGuide(4,3);f.instance.ShowGuide(s,this.chapter_items[0].node)}}},s.SetItems=function(){for(var e=0;e<this.chapter_items.length;++e)e<this.datas.length?this.chapter_items[e].Init(this,this.datas[e]):this.chapter_items[e].Init(this,null)},s.OnSelectMenu=function(e){if(this.menu_index!=e){m.instance.PlaySound(G.CLICK);var t=this.menu_index+1;console.log(t),this.menus[this.menu_index].OnSelect(!1),this.menu_index=e,this.menus[this.menu_index].OnSelect(!0),this.Refresh()}},s.ClickOnOffline=function(){m.instance.PlaySound(G.CLICK),f.instance.ShowPopup(d.Pages.IDLE_REWARD_PAGE)},s.ClickOnPartners=function(){m.instance.PlaySound(G.CLICK),f.instance.ShowPopup(d.Pages.PARTNER_SELECTION_PAGE);var e=p.instance.GetGuideStep(3);console.log(e),2==e&&(f.instance.CloseGuide(),p.instance.SetGuide(3,!1))},t}(o)).prototype,"team_button",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(b.prototype,"menus",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(b.prototype,"chapter_items",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=b))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./ItemDataProxy.ts","./GameDatas.ts","./UiManager.ts","./GameOption.ts"],(function(t){var e,i,n,r,a,o,u,l,c,s,p,f,b,d,m,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,u=t.Sprite,l=t.Label,c=t.Node,s=t.Component},function(t){p=t.default,f=t.CustomBundles},function(t){b=t.default},function(t){d=t.GameDatas},function(t){m=t.default},function(t){y=t.default,g=t.AudioClips}],execute:function(){var h,v,w,I,_,L,S,C,D,G,P;a._RF.push({},"683f4YN7yVG3aWCtinLjqkV","LevelRewardItem",void 0);var k=o.ccclass,z=o.property;t("default",(h=k("LevelRewardItem"),v=z(u),w=z(u),I=z(l),_=z(c),h((C=e((S=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"background",C,r(e)),n(e,"icon",D,r(e)),n(e,"count",G,r(e)),n(e,"probability_tag",P,r(e)),e.reward=null,e}i(e,t);var a=e.prototype;return a.Init=function(t){this.reward=t;var e=b.instance.GetItemConfig(t.id),i="icons/items/frame_0"+e.quality;p.SetSpriteFrame(this.background,f.UI,i);var n="icons/"+e.icon;p.SetSpriteFrame(this.icon,f.UI,n),this.count.string=p.FormateNumber(t.count),this.probability_tag.active=t.probability<100,this.node.active=!0},a.OnClick=function(){y.instance.PlaySound(g.CLICK),m.instance.ShowTopPopup(d.Pages.ITEM_DETAILS_PAGE,this.reward)},e}(s)).prototype,"background",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"icon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(S.prototype,"count",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(S.prototype,"probability_tag",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelSelectionPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./LevelItem.ts","./LevelDataManager.ts","./UiManager.ts","./LevelStarRewardItem.ts","./EnergyManager.ts","./GameUtility.ts","./UserDataManager.ts","./GuideDataManager.ts","./GameOption.ts"],(function(t){var e,n,i,r,a,o,s,l,c,u,p,h,f,d,g,b,m,w,y,v,_,S,C,z,G,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.Widget,l=t.UITransform,c=t.Label,u=t.Node,p=t.Sprite,h=t.Size,f=t.Vec3,d=t.ScrollView,g=t.instantiate},function(t){b=t.default},function(t){m=t.default},function(t){w=t.default},function(t){y=t.default},function(t){v=t.default},function(t){_=t.default},function(t){S=t.default},function(t){C=t.default},function(t){z=t.default},function(t){G=t.default,L=t.AudioClips}],execute:function(){var D,I,R,O,P,E,M,F,T,N,U,k,A,H,V,Z,j,q,x,B,J,K,W,Q,X,Y,$,tt,et,nt,it;a._RF.push({},"19443qOTHdF3baDS0ZzJAMk","LevelSelectionPage",void 0);var rt=o.ccclass,at=o.property;t("default",(D=rt("LevelSelectionPage"),I=at(s),R=at(l),O=at(s),P=at(c),E=at(c),M=at(c),F=at(c),T=at(c),N=at(u),U=at(u),k=at(u),A=at(p),H=at(c),V=at([v]),D((q=e((j=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"content",q,r(e)),i(e,"top_content",x,r(e)),i(e,"energy_node",B,r(e)),i(e,"gold",J,r(e)),i(e,"diamond",K,r(e)),i(e,"energy",W,r(e)),i(e,"countdown",Q,r(e)),i(e,"title",X,r(e)),i(e,"root",Y,r(e)),i(e,"template",$,r(e)),i(e,"star_reward_root",tt,r(e)),i(e,"progress_bar",et,r(e)),i(e,"progress_value",nt,r(e)),i(e,"star_rewards",it,r(e)),e.items=[],e.chapter_data=null,e}n(e,t);var a=e.prototype;return a.Init=function(){this.template.active=!1,this.content.top=y.instance.widescreen?135:75;var t=y.instance.widescreen?150:90;this.top_content.contentSize=new h(this.top_content.contentSize.width,t)},a.Show=function(){var e=this;t.prototype.Show.call(this),this.SetEnergy(_.instance.energy),_.instance.On("energy",this.SetEnergy.bind(this)),_.instance.On("timer",this.SetCountdown.bind(this)),this.root.position=new f(0,0,0),this.chapter_data=w.instance.GetChapterData(this.args.stage,this.args.chapter);var n=w.instance.GetChapterConfig(this.chapter_data.chapter);this.title.string=n.name,this.Refresh();var i=this.content.getComponent(d);i.vertical=!0,3==z.instance.GetGuideStep(4)&&(i.vertical=!1,setTimeout((function(){var t=z.instance.GetGuide(4,4);y.instance.ShowGuide(t,e.items[0].challenge_button.node)}),100))},a.SetEnergy=function(t){console.log("set energy",t),this.energy.string=t.toString()},a.SetCountdown=function(t){t<=0?this.countdown.node.active=!1:(this.countdown.string=S.FormateTime(t),this.countdown.node.active=!0)},a.Refresh=function(){for(var t=w.instance.GetLevelConfigs(this.chapter_data.stage,this.chapter_data.chapter);this.items.length<t.length;)this.CreateItem();for(var e=0;e<this.items.length;e++)e<t.length?this.items[e].Init(t[e]):this.items[e].node.active=!1;this.SetChapterRewards(),this.gold.string=S.FormateNumber(C.instance.Golds),this.diamond.string=S.FormateNumber(C.instance.Diamond)},a.CreateItem=function(){var t=g(this.template);t.setParent(this.root),t.position=f.ZERO,t.scale=f.ONE;var e=t.getComponent(m);this.items.push(e)},a.SetChapterRewards=function(){if(1==this.chapter_data.stage){var t=this.chapter_data.chapter,e=w.instance.GetChapterRewards(t),n=w.instance.GetChapterTotalStars(t),i=w.instance.GetChapterStars(t);this.progress_bar.fillRange=i/n,this.progress_value.string=i+"/"+n;for(var r=w.instance.GetChapterData(1,t),a=0;a<this.star_rewards.length;a++){this.star_rewards[a].Init(e[a],r.rewards[a],i)}this.star_reward_root.active=!0}else this.star_reward_root.active=!1},a.Close=function(){t.prototype.Close.call(this),_.instance.Off("energy",this.SetEnergy.bind(this)),_.instance.Off("timer",this.SetCountdown.bind(this))},a.ClickOnClose=function(){G.instance.PlaySound(L.CLICK),y.instance.ClosePage(this)},e}(b)).prototype,"content",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(j.prototype,"top_content",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(j.prototype,"energy_node",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(j.prototype,"gold",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(j.prototype,"diamond",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(j.prototype,"energy",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(j.prototype,"countdown",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(j.prototype,"title",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(j.prototype,"root",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(j.prototype,"template",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(j.prototype,"star_reward_root",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(j.prototype,"progress_bar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(j.prototype,"progress_value",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(j.prototype,"star_rewards",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=j))||Z));a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelStarRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelDataManager.ts","./UiManager.ts","./GameDatas.ts","./ItemDataProxy.ts","./GameOption.ts"],(function(t){var e,a,n,i,r,s,o,l,c,u,f,p,d,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.Label,l=t.Node,c=t.Component},function(t){u=t.default},function(t){f=t.default},function(t){p=t.GameDatas},function(t){d=t.default},function(t){h=t.default,g=t.AudioClips}],execute:function(){var v,_,y,m,L,R,S;r._RF.push({},"1d2bfmKe+9AV68y0l1OSWSl","LevelStarRewardItem",void 0);var b=s.ccclass,w=s.property;t("default",(v=b("LevelStarRewardItem"),_=w(o),y=w([l]),v((R=e((L=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"star_goal",R,i(e)),n(e,"state_nodes",S,i(e)),e.config=null,e.status=0,e.stars=0,e}a(e,t);var r=e.prototype;return r.Init=function(t,e,a){this.config=t,this.star_goal.string=t.stars.toString(),this.status=e;for(var n=0;n<this.state_nodes.length;++n)this.state_nodes[n].active=e==n;this.stars=a},r.OnClick=function(){if(h.instance.PlaySound(g.CLICK),1!=this.status){var t=d.instance.OnParse(this.config.rewards);this.stars<this.config.stars||u.instance.ReceiveChapterRewards(this.config),f.instance.ShowPopup(p.Pages.LEVEL_STAR_REWARD_PAGE,t)}},e}(c)).prototype,"star_goal",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(L.prototype,"state_nodes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=L))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelStarRewardPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GenericItem.ts","./UiManager.ts","./GameOption.ts"],(function(t){var e,n,i,r,a,o,s,c,l,u,f,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.UITransform,c=t.Label},function(t){l=t.default},function(t){u=t.default},function(t){f=t.default},function(t){h=t.default,p=t.AudioClips}],execute:function(){var d,v,g,w,y,b,m,P,S;a._RF.push({},"29578JmkZBK7phQf5kV6aFv","LevelStarRewardPage",void 0);var L=o.ccclass,R=o.property;t("default",(d=L("LevelStarRewardPage"),v=R(s),g=R(c),w=R([u]),d((m=e((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"content",m,r(e)),i(e,"tips",P,r(e)),i(e,"rewards",S,r(e)),e.datas=[],e}n(e,t);var a=e.prototype;return a.Show=function(){var e=this;t.prototype.Show.call(this),this.datas=this.args,this.Refresh(),this.tips.node.active=!1,this.OnEntrance(this.content,(function(){e.tips.node.active=!0}))},a.Refresh=function(){for(var t=0;t<this.rewards.length;++t)t<this.datas.length?this.rewards[t].Init(this.datas[t]):this.rewards[t].node.active=!1},a.ClickOnClose=function(){var t=this;this.is_action||(h.instance.PlaySound(p.CLOSE),this.OnExit(this.content,(function(){f.instance.ClosePage(t)})))},e}(l)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(b.prototype,"tips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(b.prototype,"rewards",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=b))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadingProgress.ts"],(function(s){var e,t,r,o,i,n,a,c,l;return{setters:[function(s){e=s.applyDecoratedDescriptor,t=s.inheritsLoose,r=s.initializerDefineProperty,o=s.assertThisInitialized},function(s){i=s.cclegacy,n=s._decorator,a=s.director,c=s.Component},function(s){l=s.default}],execute:function(){var g,p,u,h,d;i._RF.push({},"67168Iz4SxD2oNNdDbhRF3w","LoadingPage",void 0);var f=n.ccclass,v=n.property;s("default",(g=f("LoadingPage"),p=v(l),g((d=e((h=function(s){function e(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e=s.call.apply(s,[this].concat(i))||this,r(e,"loading_progress",d,o(e)),e.progress=0,e.status=0,e.scene="",e.callback=null,e}t(e,s);var i=e.prototype;return i.Show=function(s,e){var t=this;this.status=1,this.progress=0,this.loading_progress.SetProgress(0),this.node.active=!0,this.scene=s,this.callback=e,a.preloadScene(s,(function(s,e){s?console.log(s):t.status=2}))},i.OnComplete=function(){var s=this;this.status=3,this.loading_progress.SetProgress(this.progress),"main"==this.scene||this.scene,a.loadScene(this.scene,(function(){s.node.active=!1,s.callback&&s.callback()}))},i.update=function(s){1==this.status?this.progress<.8&&(this.progress+=s,this.loading_progress.SetProgress(this.progress)):2==this.status&&(this.progress+=s,this.progress>=1&&(this.progress=1,this.OnComplete()),this.loading_progress.SetProgress(this.progress))},e}(c)).prototype,"loading_progress",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=h))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,i,n,o,a,l,s,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Sprite,s=e.Label,u=e.Component}],execute:function(){var c,p,f,g,b,h,y;o._RF.push({},"9b11b1fPPZBf4TsXX0Awuq6","LoadingProgress",void 0);var d=a.ccclass,v=a.property;e("default",(c=d("LoadingProgress"),p=v(l),f=v(s),c((h=r((b=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,i(r,"bar",h,n(r)),i(r,"value",y,n(r)),r}return t(r,e),r.prototype.SetProgress=function(e){this.bar.fillRange=e,this.value.string=Math.floor(100*e)+"%"},r}(u)).prototype,"bar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(b.prototype,"value",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=b))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/LotteryDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts"],(function(t){var n,e,i,o;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,i=t._decorator},function(t){o=t.default}],execute:function(){e._RF.push({},"bd7cfcLACRGl4YByX6Ypolh","LotteryDataManager",void 0);i.ccclass,i.property,t("LotteryConfig",(function(){this.id=0,this.reward="",this.weight=0}));t("default",function(){function t(){this.configs=[]}var e=t.prototype;return e.LoadConfig=function(){var t=this;o.OnLoad("configs/lottery",(function(n){t.configs=n}))},e.GetLottery=function(){var t=o.GetWeightElement(this.configs);return this.configs.indexOf(t)},n(t,[{key:"Configs",get:function(){return this.configs}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/LotteryItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./ItemDataProxy.ts","./DataProxy.ts"],(function(t){var e,n,i,r,o,c,a,l,u,s,f,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.Sprite,l=t.Label,u=t.Component},function(t){s=t.default,f=t.CustomBundles},function(t){p=t.default},function(t){d=t.default}],execute:function(){var y,m,b,h,v,g,I,L,S;o._RF.push({},"6e9d4q4RUFCkL865bPYssGX","LotteryItem",void 0);var w=c.ccclass,z=c.property;t("default",(y=w("LotteryItem"),m=z(a),b=z(a),h=z(l),y((I=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,i(e,"selected",I,r(e)),i(e,"icon",L,r(e)),i(e,"count",S,r(e)),e}n(e,t);var o=e.prototype;return o.Init=function(t){var e=d.ConvertString(t.reward,"_"),n=e[0],i=e[1],r=p.instance.GetItemConfig(n);s.SetSpriteFrame(this.icon,f.UI,"icons/"+r.icon),this.count.string=s.FormateNumber(i),this.selected.node.active=!1},o.OnSelect=function(t){this.selected.node.active=t},e}(u)).prototype,"selected",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(g.prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(g.prototype,"count",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/LotteryPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./LotteryItem.ts","./UserDataManager.ts","./UiManager.ts","./GameDatas.ts","./LotteryDataManager.ts","./DataProxy.ts","./ItemDataProxy.ts","./GameUtility.ts","./JourneyDataManager.ts","./GameOption.ts"],(function(t){var e,n,i,r,o,a,s,c,u,l,f,h,y,p,d,g,m,b,L,S,w,_,v,P,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.UITransform,c=t.Sprite,u=t.Label,l=t.RichText,f=t.Button},function(t){h=t.default},function(t){y=t.default},function(t){p=t.default},function(t){d=t.default},function(t){g=t.GameDatas},function(t){m=t.default},function(t){b=t.default},function(t){L=t.ItemData,S=t.default},function(t){w=t.default,_=t.CustomBundles},function(t){v=t.default},function(t){P=t.default,O=t.AudioClips}],execute:function(){var R,C,D,T,x,I,M,z,G,A,E,U,F,k,B,J,N;o._RF.push({},"96304ecPAxGRaqm62gp+5Ix","LotteryPage",void 0);var Y=a.ccclass,X=a.property;t("default",(R=Y("LotteryPage"),C=X(s),D=X(c),T=X(u),x=X(l),I=X(f),M=X(f),z=X([y]),R((E=e((A=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"content",E,r(e)),i(e,"icon",U,r(e)),i(e,"description",F,r(e)),i(e,"lottery_count",k,r(e)),i(e,"free_button",B,r(e)),i(e,"lottery_button",J,r(e)),i(e,"items",N,r(e)),e.configs=[],e.index=0,e.target=0,e}n(e,t);var o=e.prototype;return o.Init=function(){this.configs=m.instance.Configs;for(var t=0;t<this.items.length;++t)this.items[t].Init(this.configs[t])},o.Show=function(){t.prototype.Show.call(this),this.index=0,this.SetReward(),this.Refresh(),this.OnEntrance(this.content)},o.Refresh=function(){var t=p.instance.Lottery;this.lottery_count.string=t>0?"<color=#00ff00>"+t+"</color>/"+g.MAX_LOTTERY_COUNT:"<color=#ff0000>"+t+"</color>/"+g.MAX_LOTTERY_COUNT,this.lottery_button.node.active=t<=8,this.free_button.node.active=t>8},o.StartLottery=function(){this.index=0,this.SetReward();var t=m.instance.GetLottery();this.target=t+20,this.schedule(this.OnLottery,.1)},o.OnLottery=function(){if(this.index++,this.SetReward(),this.index>=this.target){this.unschedule(this.OnLottery);var t=this.configs[this.target-20].reward,e=[L.OnParse(t)];d.instance.ShowTopPopup(g.Pages.REWARD_PAGE,e)}},o.SetReward=function(){for(var t=Math.floor(this.index%10),e=0;e<this.items.length;++e)this.items[e].OnSelect(e==t);var n=this.configs[t].reward,i=b.ConvertString(n,"_"),r=i[0],o=i[1],a=S.instance.GetItemConfig(r);w.SetSpriteFrame(this.icon,_.UI,"icons/"+a.icon),this.description.string=a.name+w.FormateNumber(o)},o.ClickOnLottery=function(){if(P.instance.PlaySound(O.CLICK),p.instance.Lottery<=0)d.instance.ShowMessage("今日抽奖次数已用完");else{if(p.instance.Lottery<=8){if(p.instance.Diamond<60)return void d.instance.ShowMessage("勾玉数量不足");p.instance.Diamond-=60}v.instance.SetJourney(g.JourneyType.LOTTERY,1),p.instance.Lottery-=1,this.StartLottery()}},o.ClickOnClose=function(){P.instance.PlaySound(O.CLOSE),d.instance.ClosePage(this)},e}(h)).prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(A.prototype,"icon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(A.prototype,"description",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(A.prototype,"lottery_count",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(A.prototype,"free_button",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(A.prototype,"lottery_button",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(A.prototype,"items",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=A))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./GameInitiator.ts","./GameOption.ts","./BattleScene.ts","./MainScene.ts","./SceneBackground.ts","./ArrowBullet.ts","./BaseBullet.ts","./ShuShiBullet.ts","./Character.ts","./CharacterManager.ts","./Hero.ts","./Monster.ts","./Partner.ts","./AccountDataManager.ts","./AttributeHandle.ts","./BattlePassDataManager.ts","./BattleStatistics.ts","./GiftDataManager.ts","./GuideDataManager.ts","./HeroDataManager.ts","./ItemDataProxy.ts","./JourneyDataManager.ts","./LevelDataManager.ts","./LevelMapManager.ts","./LotteryDataManager.ts","./MissionDataManager.ts","./MonsterDataManager.ts","./PartnerDataManager.ts","./SignInDataManager.ts","./SkillDataManager.ts","./StoreDataManager.ts","./UserDataManager.ts","./AndroidBridge.ts","./BytedanceProcessor.ts","./IProcessor.ts","./MiniGameProxy.ts","./PlatformProxy.ts","./WechatProcessor.ts","./CoverPage.ts","./Message.ts","./Page.ts","./Transition.ts","./UiManager.ts","./BattleInfo.ts","./BattlePage.ts","./BattleSkillButton.ts","./BloodBar.ts","./FailurePage.ts","./ForwardSign.ts","./HitEffect.ts","./Joystick.ts","./PartnerBattleItem.ts","./PausePage.ts","./RebirthPage.ts","./VictoryPage.ts","./BattlePassItem.ts","./BattlePassPage.ts","./CurrencyItem.ts","./GenericItem.ts","./GenericToggle.ts","./LoadingProgress.ts","./MenuToggle.ts","./AgeLimitPage.ts","./AgeTipsPage.ts","./IdleRewardPage.ts","./ItemDetailsPage.ts","./LoadingPage.ts","./MinorWarningPage.ts","./NewbieGiftPage.ts","./PurchasePage.ts","./RealNamePage.ts","./RealNameResultPage.ts","./ReplenishEnergyPage.ts","./RewardPage.ts","./SettingPage.ts","./TopUpLimitPage.ts","./UserUpgradePage.ts","./GuidePage.ts","./AcvanceInstructionPage.ts","./HeroAdvancePage.ts","./HeroAttributeModule.ts","./HeroAttributePage.ts","./HeroPage.ts","./HeroSkillInfoPage.ts","./HeroSkillItem.ts","./HeroJourneyItem.ts","./HeroJourneyPage.ts","./ChapterItem.ts","./LevelItem.ts","./LevelPage.ts","./LevelRewardItem.ts","./LevelSelectionPage.ts","./LevelStarRewardItem.ts","./LevelStarRewardPage.ts","./LotteryItem.ts","./LotteryPage.ts","./ActivityLayer.ts","./BasePanel.ts","./MainPage.ts","./MenuItem.ts","./MenuLayer.ts","./UserInfoLayer.ts","./BountyMissionItem.ts","./BountyMissionPanel.ts","./DailyMissionItem.ts","./DailyMissionPanel.ts","./DailyMissionRewardItem.ts","./DailyMissionRewardModule.ts","./MissionPage.ts","./MissionPanel.ts","./StoryMissionItem.ts","./StoryMissionPanel.ts","./PartnerItem.ts","./PartnerPage.ts","./PartnerRosterItem.ts","./PartnerSelectionItem.ts","./PartnerSelectionPage.ts","./UnlockCharacterPage.ts","./SignInItem.ts","./SignInPage.ts","./CommodityItem.ts","./DailyGiftItem.ts","./StorePage.ts","./DataProxy.ts","./Dictionary.ts","./Dispatcher.ts","./EnergyManager.ts","./GameDatas.ts","./GameUtility.ts","./GlobalData.ts","./OfflineProxy.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserInfoLayer.ts","./MenuLayer.ts","./Page.ts","./BasePanel.ts","./UiManager.ts","./GameDatas.ts","./UserDataManager.ts","./ActivityLayer.ts","./GuideDataManager.ts","./GameOption.ts"],(function(e){var i,t,n,a,s,r,o,l,u,c,h,f,d,p,y,_,S;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator},function(e){o=e.default},function(e){l=e.default},function(e){u=e.default},function(e){c=e.default},function(e){h=e.default},function(e){f=e.GameDatas},function(e){d=e.default},function(e){p=e.default},function(e){y=e.default},function(e){_=e.default,S=e.AudioClips}],execute:function(){var G,P,w,g,C,v,I,b,m,R,A;s._RF.push({},"c43a030dOZK7rpFrCw+Mp2U","MainPage",void 0);var E=r.ccclass,L=r.property;e("default",(G=E("MainPage"),P=L(o),w=L(l),g=L(p),C=L([c]),G((b=i((I=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return i=e.call.apply(e,[this].concat(s))||this,n(i,"user_info_layer",b,a(i)),n(i,"menu_layer",m,a(i)),n(i,"activity",R,a(i)),n(i,"panels",A,a(i)),i.index=0,i.show_idle_reward=!1,i}t(i,e);var s=i.prototype;return s.Init=function(){this.user_info_layer.Init(this),this.activity.Init(),this.menu_layer.Init(this.SetPanel.bind(this));for(var e=0;e<this.panels.length;++e)this.panels[e].Init();this.show_idle_reward=!1},s.Show=function(){e.prototype.Show.call(this),this.index=this.args?this.args:0,this.activity.SetVisiable(0==this.index),this.user_info_layer.OnActivate(),this.menu_layer.OnActivate(this.index);for(var i=0;i<this.panels.length;++i){this.panels[i].SetVisiable(this.index==i)}this.CheckGuide()},s.CheckGuide=function(){var e=!1,i=y.instance.GetGuideStep(1);if(0==i){var t=y.instance.GetGuide(1,1);h.instance.ShowGuide(t),y.instance.SetGuide(1,!1)}else if(e=y.instance.CheckComplete(1))if(0==(i=y.instance.GetGuideStep(2))){var n=y.instance.GetGuide(2,1);h.instance.ShowGuide(n,this.menu_layer.GetMenuItem(1)),y.instance.SetGuide(2,!1)}else if((e=y.instance.CheckComplete(2))&&0==(i=y.instance.GetGuideStep(3))){var a=y.instance.GetGuide(3,1);h.instance.ShowGuide(a,this.menu_layer.GetMenuItem(2)),y.instance.SetGuide(3,!1)}e&&0!=i&&this.SetIdleReward()},s.SetIdleReward=function(){if(!this.show_idle_reward){var e=(new Date).getTime()-d.instance.IdleRewardRecord,i=e/6e4;console.log(e,i),i>=10&&(this.show_idle_reward=!0,h.instance.ShowPopup(f.Pages.IDLE_REWARD_PAGE))}},s.SetVisiable=function(e){this.node.active=e,e&&this.Refresh()},s.Refresh=function(){this.activity.Refresh(),this.user_info_layer.Refresh(),this.panels[this.index].Refresh(),this.CheckGuide()},s.Close=function(){e.prototype.Close.call(this),this.user_info_layer.OnRecycle()},s.SetPanel=function(e){if(this.index!=e){var i=this.panels[this.index];i&&i.SetVisiable(!1),this.index=e,this.activity.SetVisiable(0==this.index),this.panels[this.index].SetVisiable(!0)}},s.JumpToPanel=function(e){this.index!=e&&this.menu_layer.OnSelectMenu(e)},s.ClickOnLottery=function(){_.instance.PlaySound(S.CLICK),h.instance.ShowPopup(f.Pages.LOTTERY_PAGE)},s.ClickOnNewbieGift=function(){_.instance.PlaySound(S.CLICK),h.instance.ShowPopup(f.Pages.NEWBIE_GIFT_PAGE)},s.ClickOnBattlePass=function(){_.instance.PlaySound(S.CLICK),h.instance.ShowSecondaryPage(f.Pages.BATTLE_PASS_PAGE)},s.ClickOnSignIn=function(){_.instance.PlaySound(S.CLICK),h.instance.ShowPopup(f.Pages.SIGN_IN_PAGE)},s.ClickOnHeroJourney=function(){_.instance.PlaySound(S.CLICK),h.instance.ShowPopup(f.Pages.HERO_JOURNEY_PAGE)},i}(u)).prototype,"user_info_layer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(I.prototype,"menu_layer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(I.prototype,"activity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(I.prototype,"panels",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=I))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/MainScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameOption.ts"],(function(n){var e,t,c,o,i;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,c=n._decorator,o=n.Component},function(n){i=n.default}],execute:function(){var r;t._RF.push({},"285b2+n9uxCpopM8JccWlbv","MainScene",void 0);var u=c.ccclass;c.property,n("default",u("MainScene")(r=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.onLoad=function(){i.instance.PlayMusic("mainbgm")},t}(o))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/MenuItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameOption.ts"],(function(n){var t,e,i,r,o,a,u,c,l,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,u=n.Node,c=n.Component},function(n){l=n.default,s=n.AudioClips}],execute:function(){var p,f,h,y,d;o._RF.push({},"81b757OBuhOs5/46VyO6FTL","MenuItem",void 0);var v=a.ccclass,_=a.property;n("default",(p=v("MenuItem"),f=_(u),p((d=t((y=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,i(t,"warn_point",d,r(t)),t.layer=null,t.index=0,t}e(t,n);var o=t.prototype;return o.Init=function(n,t){this.layer=n,this.index=t,this.warn_point.active=!1},o.OnWarning=function(n){this.warn_point.active=n},o.OnClick=function(){l.instance.PlaySound(s.CLICK),this.layer.OnSelectMenu(this.index)},t}(c)).prototype,"warn_point",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/MenuLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MenuItem.ts","./GuideDataManager.ts","./UiManager.ts"],(function(e){var t,i,n,o,s,r,a,c,u,l,d,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,a=e.Sprite,c=e.Vec3,u=e.tween,l=e.Component},function(e){d=e.default},function(e){f=e.default},function(e){h=e.default}],execute:function(){var m,p,_,y,v,w,b;s._RF.push({},"ac8c83rZHdKZ7sU31XEg1uk","MenuLayer",void 0);var g=r.ccclass,M=r.property;e("default",(m=g("MenuLayer"),p=M(a),_=M([d]),m((w=t((v=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"selected",w,o(t)),n(t,"menu_items",b,o(t)),t.is_action=!1,t.menu_index=0,t.callback=null,t}i(t,e);var s=t.prototype;return s.Init=function(e){this.callback=e;for(var t=0;t<this.menu_items.length;++t)this.menu_items[t].Init(this,t)},s.OnActivate=function(e){this.menu_index=e,this.is_action=!1;var t=new c(this.menu_items[e].node.worldPosition.x,this.selected.node.worldPosition.y,0);this.selected.node.worldPosition=t},s.OnSelectMenu=function(e){var t=this;if(this.menu_index!=e&&!this.is_action){if(1==e)1==f.instance.GetGuideStep(2)&&h.instance.CloseGuide();else if(2==e){1==f.instance.GetGuideStep(3)&&h.instance.CloseGuide()}this.menu_index=e,this.is_action=!0;var i=new c(this.menu_items[e].node.worldPosition.x,this.selected.node.worldPosition.y,0);u(this.selected.node).to(.2,{worldPosition:i}).call((function(){t.is_action=!1})).start(),this.callback&&this.callback(e)}},s.GetMenuItem=function(e){return this.menu_items[e].node},t}(l)).prototype,"selected",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(v.prototype,"menu_items",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=v))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/MenuToggle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameOption.ts"],(function(t){var e,n,i,a,l,r,o,c,u,s,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,o=t.UITransform,c=t.Node,u=t.Component},function(t){s=t.default,f=t.AudioClips}],execute:function(){var p,g,d,h,b,y,v,w,_;l._RF.push({},"47039qRfqRLD7bPUifA20ox","MenuToggle",void 0);var k=r.ccclass,m=r.property;t("default",(p=k("MenuToggle"),g=m(o),d=m(o),h=m(c),p((v=e((y=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,i(e,"default_status",v,a(e)),i(e,"selected_status",w,a(e)),i(e,"warning",_,a(e)),e.index=0,e.callback=null,e}n(e,t);var l=e.prototype;return l.Init=function(t,e){this.OnSelect(!1),this.index=t,this.callback=e,this.warning&&(this.warning.active=!1)},l.OnSelect=function(t){this.default_status.node.active=!t,this.selected_status.node.active=t},l.SetWarning=function(t){this.warning&&(this.warning.active=t)},l.OnClick=function(){s.instance.PlaySound(f.CLICK),console.log("Menu Toggle On Click"),this.callback&&this.callback(this.index)},e}(u)).prototype,"default_status",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(y.prototype,"selected_status",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(y.prototype,"warning",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/Message.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,a,r,c,s,l,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.UIOpacity,s=e.Label,l=e.Vec3,p=e.tween,u=e.Component}],execute:function(){var y,f,h,g,d,b,v;a._RF.push({},"625e80fNBJJe4R9Th/pHpzV","Message",void 0);var m=r.ccclass,w=r.property;e("default",(y=m("Message"),f=w(c),h=w(s),y((b=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"opacity",b,o(t)),n(t,"message",v,o(t)),t}return i(t,e),t.prototype.Show=function(e){var t=this;this.message.string=e,this.node.position=new l(0,0,0),this.opacity.opacity=255,this.node.active=!0,p(this.node).to(.6,{position:new l(0,320,0)},{easing:"cubicOut"}).delay(.6).call((function(){p(t.opacity).to(.3,{opacity:0}).call((function(){t.node.active=!1})).start()})).start()},t}(u)).prototype,"opacity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(d.prototype,"message",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/MiniGameProxy.ts",["cc","./GameDatas.ts","./BytedanceProcessor.ts","./WechatProcessor.ts"],(function(n){var e,s,i,t;return{setters:[function(n){e=n.cclegacy},function(n){s=n.GameDatas},function(n){i=n.BytedanceProcessor},function(n){t=n.WechatProcessor}],execute:function(){e._RF.push({},"a08baGWxEJHir1nURQREc0m","MiniGameProxy",void 0);n("MiniGameParameters",(function(){this.videos=[],this.interstitials=[],this.banner=[],this.gide=[],this.custom=[],this.splash=[]}));var o=n("MiniGameProxy",function(){function n(){}return n.init=function(n){var e=this;switch(this.channnel=n,console.log("小游戏渠道初始化",this.channnel),this.channnel){case s.MiniGameChannels.Wechat:this.getParameters("wechat",(function(n){e.processor=new t(n)}));break;case s.MiniGameChannels.Bytedance:this.getParameters("bytedance",(function(n){e.processor=new i(n)}));break;default:this.processor=null}},n.getParameters=function(n,e){},n.ShowVideo=function(n,e){this.channnel!==s.MiniGameChannels.Default?this.processor&&this.processor.ShowVideo(n,e):e&&e(!0)},n.ShowInterstitial=function(n,e){this.channnel!==s.MiniGameChannels.Default?this.processor&&this.processor.ShowInterstitial(n,e):e&&e(!0)},n.ShowCustom=function(n,e){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.ShowCustom(n,e)},n.OnCustom=function(){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.OnCustom()},n.HideCustom=function(){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.HideCustom()},n.ShowBanner=function(n){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.ShowBanner(n)},n.HideBanner=function(){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.HideBanner()},n.OnVibrateShort=function(n){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.OnVibrateShort(n)},n.OnVibrateLong=function(){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.OnVibrateLong()},n.OnRecorderScreen=function(n){this.channnel!==s.MiniGameChannels.Default&&this.processor&&this.processor.OnRecorderScreen(n)},n.ShareRecordScreen=function(n){this.channnel!==s.MiniGameChannels.Default&&this.processor&&(console.log("shareRecord",this.processor),this.processor.ShareRecordScreen(n))},n.ShareInitiative=function(){this.channnel!==s.MiniGameChannels.Default&&this.processor},n.SharePassivity=function(){this.channnel!==s.MiniGameChannels.Default&&this.processor},n}());o.channnel=s.MiniGameChannels.Default,o.processor=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/MinorWarningPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./UserDataManager.ts","./GameOption.ts"],(function(n){var t,e,i,r,a,o,c,s,u,l,f,p,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,c=n.UITransform,s=n.director},function(n){u=n.default},function(n){l=n.default},function(n){f=n.default},function(n){p=n.default,h=n.AudioClips}],execute:function(){var g,d,y,P,v;a._RF.push({},"ac32c1PGSpBFqSmL9XCP+pc","MinorWarningPage",void 0);var C=o.ccclass,M=o.property;n("default",(g=C("MinorWarningPage"),d=M(c),g((v=t((P=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,i(t,"content",v,r(t)),t}e(t,n);var a=t.prototype;return a.Show=function(){n.prototype.Show.call(this),this.OnEntrance(this.content)},a.ClickOnConfirm=function(){var n=this;this.is_action||(p.instance.PlaySound(h.CLICK),f.instance.CheckMinorEntrance()?this.OnExit(this.content,(function(){l.instance.ClosePage(n)})):s.end())},t}(u)).prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/MissionDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts","./GameUtility.ts"],(function(t){var i,s,n,o,e;return{setters:[function(t){i=t.createClass},function(t){s=t.cclegacy},function(t){n=t.default},function(t){o=t.GameDatas},function(t){e=t.default}],execute:function(){s._RF.push({},"ec81buobb1KWI0w1n1URYgA","MissionDataManager",void 0);t("MissionStatus",function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.PROCESSING=1]="PROCESSING",t[t.ACHIEVE=2]="ACHIEVE",t}({})),t("MissionConfig",(function(){this.id=0,this.type=0,this.index=0,this.description="",this.goal=0,this.reward="",this.time=0,this.weight=0})),t("DailyMissionRewardConfig",(function(){this.id=0,this.goal=0,this.reward=""}));var a=t("StoryMissionData",(function(){this.type=0,this.index=0,this.status=0,this.value=0})),r=t("DailyMissionData",(function(){this.id=0,this.status=0,this.value=0})),u=t("BountyMissionData",(function(){this.id=0,this.complete=0,this.status=0,this.time=0})),h=t("MissionStorage",(function(){this.ticks=0,this.story=[],this.daily=[],this.rewards=[],this.bounty=[]}));t("default",function(){function t(){this.story_configs=[],this.daily_configs=[],this.daily_rewards=[],this.bounty_configs=[],this.storage=null}var s=t.prototype;return s.LoadConfig=function(){var t=this;n.OnLoad("configs/mission",(function(i){t.story_configs=i.story,t.daily_configs=i.daily,t.daily_rewards=i.reward,t.bounty_configs=i.bounty}))},s.InitData=function(t){this.storage=n.OnRead(o.Constant.MISSION_DATAS),this.storage?t&&this.InitDailyMission():(this.storage=new h,this.InitStoryMission(),this.InitDailyMission())},s.InitStoryMission=function(){this.storage.story=[];for(var t=0;t<this.story_configs.length;++t)if(1==this.story_configs[t].index){var i=new a;i.type=this.story_configs[t].type,i.index=1,i.status=1,i.value=0,this.storage.story.push(i)}},s.GetStoryMissionConfig=function(t,i){return this.story_configs.find((function(s){return s.type==t&&s.index==i}))},s.GetStoryMissionData=function(t){return this.storage.story.find((function(i){return i.type==t}))},s.SetStoryMission=function(t,i){var s=this.GetStoryMissionData(t);if(s){switch(s.type){case o.StoryMissionType.EASYLEVEL:case o.StoryMissionType.HARDLEVEL:case o.StoryMissionType.UNLOCK_HERO:case o.StoryMissionType.UNLOCK_PARTNER:i>s.value&&(s.value=i);break;default:s.value+=i}var n=this.GetStoryMissionConfig(t,s.index);1==s.status&&s.value>=n.goal&&(s.status=2),this.Save()}},s.OnStoryMissionComplete=function(t){var i=this.GetStoryMissionData(t);if(console.log(i),i&&2==i.status){var s=i.index+1,n=this.GetStoryMissionConfig(t,s);n?(i.index++,i.status=i.value>=n.goal?2:1):i.status=0,this.Save()}},s.InitDailyMission=function(){this.storage.daily=[];for(var t=0;t<this.daily_configs.length;++t){var i=new r;i.id=this.daily_configs[t].id,i.value=0,i.status=1,this.storage.daily.push(i)}this.storage.rewards=[0,0,0]},s.GetDailyMissionConfig=function(t){return this.daily_configs.find((function(i){return i.id==t}))},s.GetDailyMissionData=function(t){return this.storage.daily.find((function(i){return i.id==t}))},s.GetDailyMissionRewardConfig=function(t){return this.daily_rewards[t]},s.GetDailyMissionRewardStatus=function(t){return this.storage.rewards[t]},s.GetDailyStars=function(){for(var t=0,i=0;i<this.storage.daily.length;++i)0==this.storage.daily[i].status&&t++;return t},s.SetDailyMission=function(t,i){var s=this.daily_configs.filter((function(i){return i.type==t}));if(!(s.length<=0)){for(var n=0;n<s.length;++n){var o=this.GetDailyMissionData(s[n].id);o.value+=i,1==o.status&&(o.value>=s[n].goal&&(o.status=2))}this.Save()}},s.OnDailyMissionComplete=function(t){2==t.status&&(t.status=0,this.Save())},s.CheckBountyMission=function(){this.storage.bounty.length<=0?(this.storage.bounty=[],this.InitBountyMission()):e.CheckResetTime(this.storage.ticks)&&this.ResetBountyMission();return this.storage.bounty},s.InitBountyMission=function(){var t=this;this.storage.ticks=(new Date).getTime();for(var i=function(i){var s=t.bounty_configs.filter((function(t){return t.type==i})),o=n.GetWeightElement(s);if(o){var e=new u;e.id=o.id,e.complete=0,e.status=0,t.storage.bounty.push(e)}},s=1;s<=5;++s)i(s);this.Save()},s.ResetBountyMission=function(){var t=this;this.storage.ticks=(new Date).getTime();for(var i=function(){var i=t.storage.bounty[s];if(1==i.complete||0==i.status){var o=t.GetBountyMissionConfig(i.id),e=t.bounty_configs.filter((function(t){return t.type==o.type})),a=n.GetWeightElement(e);a&&(i.id=a.id,i.complete=0,i.status=0)}},s=0;s<this.storage.bounty.length;++s)i();this.Save()},s.GetBountyMissionConfig=function(t){return this.bounty_configs.find((function(i){return i.id==t}))},s.ActivateBountyMission=function(t){0==t.status&&(t.time=(new Date).getTime(),t.status=1,this.Save())},s.OnBountyTimeOut=function(t){1==t.status&&(t.status=2,this.Save())},s.OnBountyMissionComplete=function(t){2==t.status&&(t.complete=1,this.Save())},s.Save=function(){n.OnSave(o.Constant.MISSION_DATAS,this.storage)},i(t,[{key:"StoryMissions",get:function(){return console.log(this.storage),this.storage.story}},{key:"DailyMissions",get:function(){return this.storage.daily}},{key:"DailyMissionRewards",get:function(){return this.storage.rewards}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,s._RF.pop()}}}));

System.register("chunks:///_virtual/MissionPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MenuToggle.ts","./UiManager.ts","./MissionPanel.ts","./BasePanel.ts","./GameOption.ts"],(function(e){var n,i,t,s,o,r,a,l,u,c,f,h,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,a=e.Widget},function(e){l=e.default},function(e){u=e.default},function(e){c=e.default},function(e){f=e.default},function(e){h=e.default,p=e.AudioClips}],execute:function(){var d,m,g,b,v,y,_,M,x;o._RF.push({},"ef333ll9QFHr5GevXNpLZcc","MissionPage",void 0);var P=r.ccclass,S=r.property;e("default",(d=P("MissionPage"),m=S(a),g=S([l]),b=S([c]),d((_=n((y=function(e){function n(){for(var n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,t(n,"menu_node",_,s(n)),t(n,"menus",M,s(n)),t(n,"mission_panels",x,s(n)),n.index=0,n}i(n,e);var o=n.prototype;return o.Init=function(){e.prototype.Init.call(this),this.menu_node.top=u.instance.widescreen?160:100;for(var n=0;n<this.menus.length;++n)this.menus[n].Init(n,this.OnSelectMenu.bind(this));for(var i=u.instance.widescreen,t=0;t<this.mission_panels.length;++t)this.mission_panels[t].Init(i)},o.SetVisiable=function(e){this.node.active=e,e&&(this.index=0,this.Refresh())},o.Refresh=function(){for(var e=0;e<this.menus.length;++e)this.menus[e].OnSelect(this.index==e);for(var n=0;n<this.mission_panels.length;++n)this.mission_panels[n].SetVisiable(this.index==n)},o.OnSelectMenu=function(e){console.log("On Select Menu",e,this.index),this.index!=e&&(h.instance.PlaySound(p.CLICK),this.index=e,this.Refresh())},n}(f)).prototype,"menu_node",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(y.prototype,"menus",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=n(y.prototype,"mission_panels",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/MissionPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,i,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,i=n.Widget,s=n.Component}],execute:function(){var r;e._RF.push({},"3b21fDonXdHNp3XZkoM+z0O","MissionPanel",void 0);var c=o.ccclass;o.property,n("default",c("MissionPanel")(r=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.Init=function(n){this.node.getComponent(i).top=n?240:180},o.SetVisiable=function(n){this.node.active=n,n&&this.Refresh()},o.Refresh=function(){},e}(s))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Monster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MonsterDataManager.ts","./GameDatas.ts","./Character.ts","./Hero.ts","./Partner.ts","./Dispatcher.ts","./DataProxy.ts"],(function(t){var i,e,s,n,o,a,h,c,r,l,f;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,n=t.Vec3},function(t){o=t.default},function(t){a=t.GameDatas},function(t){h=t.default},function(t){c=t.default},function(t){r=t.default},function(t){l=t.default},function(t){f=t.default}],execute:function(){var u;e._RF.push({},"e11b7cBRrZGSppTElqpAOXI","Monster",void 0);var d=s.ccclass;s.property,t("default",d("Monster")(u=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(i=t.call.apply(t,[this].concat(s))||this).scene=null,i.config=null,i.target=null,i.IDLE="",i.MOVE="",i.ATTACK="",i.DIE="",i.SKILL="",i}i(e,t);var s=e.prototype;return s.Init=function(t,i,e){var s=this;this.node.active=!0,this.hit_effect.Init(),this.scene=t,this.config=o.instance.GetMnsterConfig(i),this.hp=o.instance.GetHp(this.config,e),this.attack=o.instance.GetAttack(this.config,e),this.defence=1==this.config.type?0:o.instance.GetDefense(this.config,e);var h=f.ConvertString(this.config.attack_distance);this.attack_distance=h[0],this.check_dispatcher=new l(.1,this.CheckTarget.bind(this)),this.blood_bar.Init(this.hp),1==this.config.type?(this.blood_bar.node.position=new n(0,130,0),this.blood_bar.node.scale=new n(1,1,1)):(this.blood_bar.node.position=new n(0,240,0),this.blood_bar.node.scale=new n(2,2,2)),this.IDLE=1==this.config.type?a.MonsterAnimation.IDLE:a.BossAnimation.IDLE,this.MOVE=1==this.config.type?a.MonsterAnimation.MOVE:a.BossAnimation.MOVE,this.ATTACK=1==this.config.type?a.MonsterAnimation.ATTACK:a.BossAnimation.ATTACK,this.DIE=1==this.config.type?a.MonsterAnimation.DIE:a.BossAnimation.DIE,this.SKILL=a.BossAnimation.SKILL,this.status=a.CharacterStatus.IDLE;var c=1==this.config.type?"spine/partners/"+this.config.skeleton:"spine/boss/"+this.config.skeleton;this.InitSpine(c,(function(){s.skeleton.setAnimation(0,s.IDLE,!0)}))},s.OnAnimationComplete=function(t){t.animation.name==this.DIE?this.OnRecycle():this.skeleton.animation==this.ATTACK&&(this.OnIdle(),this.SetAttackFeedback())},s.Activate=function(){t.prototype.Activate.call(this)},s.OnIdle=function(){this.skeleton.animation!=this.IDLE&&this.skeleton.setAnimation(0,this.IDLE,!0)},s.OnAttack=function(){this.status==a.CharacterStatus.ACTIVATE&&this.skeleton.animation!=this.ATTACK&&this.skeleton.setAnimation(0,this.ATTACK,!1)},s.SetAttackFeedback=function(){var t=this;this.attackable=!1,setTimeout((function(){t.attackable=!0}),1e3*this.config.attack_speed),(this.target instanceof c||this.target instanceof r)&&this.target.OnHit(this.attack)},s.OnHit=function(t){if(this.status!=a.CharacterStatus.ACTIVATE)return!1;var i=!1,e=Math.max(t-this.defence,1);return this.hp-=e,this.blood_bar.SetValue(this.hp),this.hit_effect.Activate(2),console.log("On Hit",t,this.hp),this.hp<=0&&(this.OnDie(),this.scene.SetHeroSkillEnergy(1==this.config.type?10:20),i=!0),i},s.OnDie=function(){this.status!=a.CharacterStatus.DIE&&(this.status=a.CharacterStatus.DIE,this.blood_bar.Hide(),this.skeleton.setAnimation(0,this.DIE,!1))},s.OnRecycle=function(){this.scene.RecycleMonster(this),t.prototype.OnRecycle.call(this),this.check_dispatcher.reset()},s.update=function(t){if(this.scene&&!this.pause)if(this.scene.Status==a.BattleStatus.FIGHTING){if(this.status==a.CharacterStatus.ACTIVATE)if(this.target){if(this.target instanceof c||this.target instanceof r){if(!this.target.IsActivate)return void(this.target=null);n.distance(this.node.worldPosition,this.target.node.worldPosition)<=this.attack_distance?this.attackable?this.OnAttack():this.OnIdle():this.OnMove()}}else this.check_dispatcher.dispatche(t)}else this.OnIdle()},s.CheckTarget=function(){this.target||(this.target=this.scene.GetMonsterTatget(this.node))},s.OnMove=function(){if(this.skeleton.name!=this.MOVE&&this.skeleton.setAnimation(0,this.MOVE,!0),this.target instanceof c||this.target instanceof r){var t=this.target.node.worldPosition.x-this.node.worldPosition.x,i=this.target.node.worldPosition.y-this.node.worldPosition.y,e=Math.atan2(i,t),s=Math.cos(e)*this.config.move_speed*2,o=Math.sin(e)*this.config.move_speed*2;this.skeleton.node.scale=new n(s<0?1:-1,1,1);var a=this.node.position.x+s,h=this.node.position.y+o,l=this.scene.SetInField(a,h);this.node.position=new n(l.x,l.y,0)}},e}(h))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./AttributeHandle.ts"],(function(n){var t,e,r,o,i,s;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){r=n.cclegacy},function(n){o=n.default},function(n){i=n.Attribute,s=n.default}],execute:function(){r._RF.push({},"91d04rydftFFqiWx9Fc111c","MonsterDataManager",void 0);n("MonsterConfig",function(n){function e(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))||this).id=0,t.name="",t.type=0,t.icon="",t.quality=0,t.career=0,t.skeleton="",t.bullet="",t}return t(e,n),e}(i));n("default",function(n){function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))||this).monster_configs=[],t}t(r,n);var i=r.prototype;return i.LoadConfig=function(){var n=this;o.OnLoad("configs/monsters",(function(t){n.monster_configs=t,console.log("monsters",t)}))},i.GetMnsterConfig=function(n){return this.monster_configs.find((function(t){return t.id==n}))},e(r,null,[{key:"instance",get:function(){return this._instance||(this._instance=new r),this._instance}}]),r}(s))._instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/NewbieGiftPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GenericItem.ts","./ItemDataProxy.ts","./GiftDataManager.ts","./GameOption.ts","./GameUtility.ts","./PlatformProxy.ts","./GameDatas.ts"],(function(t){var e,n,i,a,r,o,s,c,u,l,f,h,p,d,m,w,P,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.UITransform,c=t.Button,u=t.Label},function(t){l=t.default},function(t){f=t.default},function(t){h=t.default},function(t){p=t.default},function(t){d=t.default},function(t){m=t.default,w=t.AudioClips},function(t){P=t.default},function(t){g=t.default},function(t){b=t.GameDatas}],execute:function(){var y,v,G,O,C,D,S,I,N,_,z;r._RF.push({},"cc198uHeWhB8pbLZ1YJp8fI","NewbieGiftPage",void 0);var L=o.ccclass,R=o.property;t("default",(y=L("NewbieGiftPage"),v=R(s),G=R(c),O=R(u),C=R([h]),y((I=e((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"content",I,a(e)),i(e,"purchase",N,a(e)),i(e,"countdown",_,a(e)),i(e,"items",z,a(e)),e.timer=0,e}n(e,t);var r=e.prototype;return r.Init=function(){var t=d.instance.GetNewbieGift(),e=p.instance.OnParse(t.rewards);console.log(e);for(var n=0;n<this.items.length;++n)this.items[n].Init(e[n])},r.Show=function(){var e=this;t.prototype.Show.call(this),this.Refresh(),this.purchase.node.active=!1,this.OnEntrance(this.content,(function(){e.purchase.node.active=!0}))},r.Refresh=function(){var t=d.instance.GetNewbieData();this.timer=864e5-((new Date).getTime()-t.ticks),this.timer>0?this.countdown.string=P.FormateTime(this.timer):this.countdown.string="00:00:00"},r.ClickOnPurchase=function(){if(!this.is_action){m.instance.PlaySound(w.CLICK);var t=this,e={dec:"是否花费 12 元， 购买 \n新手礼包？",price:12,cbPurchse:function(){g.OnPurchase(12,(function(){t.OnPurchase()}))}};f.instance.ShowTopPopup(b.Pages.PURCHASE_PAGE,e)}},r.OnPurchase=function(){var t;f.instance.ClosePage(this),d.instance.OnPurchaseNewbie();var e=d.instance.GetNewbieGift(),n=p.instance.OnParse(e.rewards);(t=f.instance).ShowRewards.apply(t,n)},r.ClickOnClose=function(){this.is_action||(m.instance.PlaySound(w.CLOSE),f.instance.ClosePage(this))},r.update=function(t){this.timer>0&&(this.timer-=1e3*t,this.countdown.string=P.FormateTime(this.timer),this.timer<=0&&(this.countdown.string="00:00:00"))},e}(l)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(S.prototype,"purchase",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(S.prototype,"countdown",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(S.prototype,"items",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=S))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/OfflineProxy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDatas.ts"],(function(t){var e,i,n,o,r,a,s;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,o=t._decorator,r=t.director,a=t.Component},function(t){s=t.GameDatas}],execute:function(){var f,l;n._RF.push({},"7c1a0aB3gRMBZ3MBmsWYHNy","OfflineProxy",void 0);var c=o.ccclass;o.property,t("default",c("OfflineProxy")(((l=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).interval=10,e.timer=0,e.offline_time=0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){n.instance||(n.instance=this),r.addPersistRootNode(this.node);var t=localStorage.getItem(s.Constant.OFFLINE_MARKING);if(t){var e=(new Date).getTime()-parseInt(t);this.offline_time=Math.floor(e/6e4),this.offline_time>720&&(this.offline_time=720)}else this.offline_time=0},o.OnGetOfflineReward=function(){this.offline_time=0},o.update=function(t){if(this.timer+=t,this.timer>=this.interval){this.timer-=this.interval;var e=(new Date).getTime();localStorage.setItem(s.Constant.OFFLINE_MARKING,e.toString())}},i(n,[{key:"OfflineTime",get:function(){return this.offline_time}}]),n}(a)).instance=void 0,f=l))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/Page.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,i,o,a,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.tween,a=n.Vec3,c=n.Component}],execute:function(){var s;e._RF.push({},"300e3Inr6dIH5bss2U144nM","Page",void 0);var r=i.ccclass;i.property,n("TweenArgument",(function(){this.duration=void 0,this.origin=void 0,this.ending=void 0})),n("default",r("Page")(s=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).layer=0,t.page_name="",t.args=null,t.is_action=!1,t}t(e,n);var i=e.prototype;return i.Init=function(){},i.Show=function(){this.node.active=!0},i.SetVisiable=function(n){n&&this.Refresh(),this.node.active=n},i.OnEntrance=function(n,t){var e=this;this.is_action=!0;n.node.setScale(.6,.6,.6),o(n.node).to(.4,{scale:new a(1,1,1)},{easing:"backOut"}).call((function(){e.is_action=!1,t&&t()})).start()},i.Refresh=function(){},i.OnExit=function(n,t){var e=this;this.is_action=!0;n.node.setScale(1,1,1),o(n.node).to(.4,{scale:new a(.6,.6,.6)},{easing:"backIn"}).call((function(){e.is_action=!1,t&&t()})).start()},i.Close=function(){this.args=null,this.node.active=!1},e}(c))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Partner.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PartnerDataManager.ts","./GameDatas.ts","./Character.ts","./DataProxy.ts","./Dispatcher.ts"],(function(t){var n,i,e,a,s,o,r,h,c;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,a=t.Vec3},function(t){s=t.default},function(t){o=t.GameDatas},function(t){r=t.default},function(t){h=t.default},function(t){c=t.default}],execute:function(){var l;i._RF.push({},"918b8vWHShEaakpy3JcDAmx","Partner",void 0);var u=e.ccclass;e.property,t("default",u("Partner")(l=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).scene=null,n.config=null,n.data=null,n.target=null,n}n(i,t);var e=i.prototype;return e.Init=function(t,n){var i=this;this.node.active=!0,this.hit_effect.Init(),this.scene=t,this.config=n,this.data=s.instance.GetPartnerData(n.id),this.hp=s.instance.GetPartnerHp(this.config,this.data.level),this.attack=s.instance.GetPartnerAttack(this.config,this.data.level),this.blood_bar.Init(this.hp);var e=h.ConvertString(this.config.attack_distance);this.attack_distance=e[0],this.check_dispatcher=new c(.1,this.CheckTarget.bind(this));var a="spine/partners/"+this.config.skeleton;this.InitSpine(a,(function(){i.skeleton.setAnimation(0,o.PartnerAnimation.IDLE,!0)}))},e.OnAnimationComplete=function(t){t.animation.name==o.PartnerAnimation.DIE?this.OnRecycle():this.skeleton.animation==o.PartnerAnimation.ATTACK&&this.OnIdle()},e.Activate=function(){t.prototype.Activate.call(this)},e.OnIdle=function(){this.skeleton.animation!=o.PartnerAnimation.IDLE&&this.skeleton.setAnimation(0,o.PartnerAnimation.IDLE,!0)},e.OnFollow=function(t){if(0!=t){this.skeleton.animation!=o.PartnerAnimation.MOVE&&this.skeleton.setAnimation(0,o.PartnerAnimation.MOVE,!0),this.skeleton.node.scale=new a(t<0?1:-1,1,1);var n=this.node.position.x+t;this.node.position=new a(n,this.node.position.y,0)}else this.skeleton.animation!=o.PartnerAnimation.IDLE&&this.skeleton.setAnimation(0,o.PartnerAnimation.IDLE,!0)},e.OnAttack=function(){this.status==o.CharacterStatus.ACTIVATE&&this.skeleton.animation!=o.PartnerAnimation.ATTACK&&this.skeleton.setAnimation(0,o.PartnerAnimation.ATTACK,!1)},e.SetAttackFeedback=function(){var t=this;this.attackable=!1,setTimeout((function(){t.attackable=!0}),1e3*this.config.attack_speed),this.target.OnHit(this.attack)},e.OnHit=function(t){if(this.status!=o.CharacterStatus.ACTIVATE)return!1;var n=!1,i=Math.max(t-this.defence,1);return this.hp-=i,this.blood_bar.SetValue(this.hp),this.hit_effect.Activate(1),console.log("On Hit",t,this.hp),this.hp<=0&&(this.OnDie(),n=!0),n},e.OnDie=function(){this.status!=o.CharacterStatus.DIE&&(this.blood_bar.Hide(),this.status=o.CharacterStatus.DIE,this.skeleton.setAnimation(0,o.PartnerAnimation.DIE,!1))},e.OnRecycle=function(){this.scene.RecyclePartner(this),t.prototype.OnRecycle.call(this),this.check_dispatcher.reset()},e.update=function(t){if(this.scene&&!this.pause&&this.scene.Status==o.BattleStatus.FIGHTING&&this.status==o.CharacterStatus.ACTIVATE)if(this.target){if(!this.target.IsActivate)return void(this.target=null);a.distance(this.node.worldPosition,this.target.node.worldPosition)<=this.attack_distance?this.attackable?this.OnAttack():this.OnIdle():this.OnMove()}else this.check_dispatcher.dispatche(t)},e.CheckTarget=function(){this.target||(this.target=this.scene.GetPartnerTatget(this.node))},e.OnMove=function(){this.skeleton.name!=o.PartnerAnimation.MOVE&&this.skeleton.setAnimation(0,o.PartnerAnimation.MOVE,!0);var t=this.target.node.worldPosition.x-this.node.worldPosition.x,n=this.target.node.worldPosition.y-this.node.worldPosition.y,i=Math.atan2(n,t),e=Math.cos(i)*this.config.move_speed*2,s=Math.sin(i)*this.config.move_speed*2;this.skeleton.node.scale=new a(e<0?1:-1,1,1);var r=this.node.position.x+e,h=this.node.position.y+s,c=this.scene.SetInField(r,h);this.node.position=new a(c.x,c.y,0)},e.OnCure=function(t){this.status!=o.CharacterStatus.DIE&&(this.hp+=t,this.skeleton.setAnimation(0,o.PartnerAnimation.CURE,!1))},i}(r))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/PartnerBattleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PartnerDataManager.ts","./BattleScene.ts","./UiManager.ts","./GameUtility.ts","./GameDatas.ts","./GuideDataManager.ts","./GameOption.ts"],(function(t){var e,n,i,a,r,o,s,c,l,u,f,p,h,g,d,m,b,S,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.sp,c=t.Sprite,l=t.Label,u=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){h=t.default},function(t){g=t.default,d=t.CustomBundles},function(t){m=t.GameDatas},function(t){b=t.default},function(t){S=t.default,P=t.AudioClips}],execute:function(){var y,k,v,C,G,D,_,I,w;r._RF.push({},"6a16c4bpaFBUKPfW1ykL7z0","PartnerBattleItem",void 0);var B=o.ccclass,z=o.property;t("default",(y=B("PartnerBattleItem"),k=z(s.Skeleton),v=z(c),C=z(l),y((_=e((D=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"skeleton",_,a(e)),i(e,"career",I,a(e)),i(e,"count_label",w,a(e)),e.page=null,e.config=null,e.count=0,e}n(e,t);var r=e.prototype;return r.Init=function(t,e){var n=this;this.page=t,this.config=f.instance.GetPartnerConfig(e),g.SetSpriteFrame(this.career,d.UI,"icons/icon_career_"+this.config.career),g.SetSkeletonData(this.skeleton,"spine/partners/"+this.config.skeleton,(function(){n.skeleton.setAnimation(0,m.PartnerAnimation.IDLE,!0)}));var i=f.instance.GetPartnerData(e),a=f.instance.GetUpgradeConfig(i.level);this.count=a.limits,this.count_label.string=this.count.toString(),this.node.active=!0},r.OnClick=function(){if(S.instance.PlaySound(P.CLICK),this.count<=0)h.instance.ShowMessage("伙伴数量不足");else if(p.instance.CheckPartnerCount()){0==b.instance.GetGuideStep(5)&&(b.instance.SetGuide(5,!1),h.instance.CloseGuide()),this.count--,this.count_label.string=this.count.toString();var t=h.instance.ToScreenPosition(this.skeleton.node.worldPosition);p.instance.CreatePartner(this.config,t)}else h.instance.ShowMessage("伙伴数量已满")},e}(u)).prototype,"skeleton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(D.prototype,"career",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(D.prototype,"count_label",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=D))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/PartnerDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts","./AccountDataManager.ts","./JourneyDataManager.ts","./MissionDataManager.ts"],(function(t){var e,n,r,i,a,s,o;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){r=t.default},function(t){i=t.GameDatas},function(t){a=t.default},function(t){s=t.default},function(t){o=t.default}],execute:function(){n._RF.push({},"dc2fb8/491NfZwN3dOwJX2i","PartnerDataManager",void 0);t("PartnerConfig",(function(){this.id=0,this.name="",this.icon="",this.quality=0,this.career=0,this.skeleton="",this.bullet="",this.attack_type=0,this.attack_speed=0,this.move_speed=0,this.attack=[],this.hp=[],this.accuracy=[],this.dodge=[],this.crit=[],this.crit_reduce=[],this.crit_damage=0,this.attack_distance="",this.behit_distance=""})),t("PartnerUpgradeConfig",(function(){this.level=0,this.golds=0,this.cards=0,this.limits=0}));var c=t("PartnerStorage",(function(){this.selection=[],this.datas=[]})),h=t("PartnerData",(function(){this.id=0,this.status=0,this.level=0,this.cards=0}));t("default",function(){function t(){this.partner_configs=[],this.upgrade_configs=[],this.storage=null}var n=t.prototype;return n.LoadConfig=function(){var t=this;r.OnLoad("configs/partners",(function(e){t.partner_configs=e.partners,t.upgrade_configs=e.upgrade}))},n.InitData=function(){if(this.storage=r.OnRead(i.Constant.PARTNER_DATAS),!this.storage){if(this.storage=new c,this.storage.selection=[0,0,0],this.storage.datas=[],0==a.stage)this.OnCreateData(10101),this.OnCreateData(10201),this.OnCreateData(10301);else for(var t=0;t<this.partner_configs.length;++t){this.OnCreateData(this.partner_configs[t].id).cards+=500}this.Save()}},n.UnlockPosition=function(){this.storage.selection.length>=5||(this.storage.selection.push(0),this.Save())},n.OnCreateData=function(t){var e=new h;return e.id=t,e.status=1,e.level=1,e.cards=0,this.storage.datas.push(e),e},n.GetPartnerConfig=function(t){return this.partner_configs.find((function(e){return e.id==t}))},n.GetPartners=function(t){for(var e=[],n=0;n<this.partner_configs.length;++n)0!=t&&this.partner_configs[n].career!=t||e.push(this.partner_configs[n]);return e},n.GetUpgradeConfig=function(t){return this.upgrade_configs.find((function(e){return e.level==t}))},n.GetPartnerData=function(t){return this.storage.datas.find((function(e){return e.id==t}))},n.GetUnlockPartners=function(){for(var t=0,e=0;e<this.storage.datas.length;++e)0!=this.storage.datas[e].status&&t++;return t},n.AddCards=function(e,n){var r=this.GetPartnerConfig(e).career+5;o.instance.SetStoryMission(r,n);var a=function(){var e=t.instance.GetUnlockPartners();o.instance.SetStoryMission(i.StoryMissionType.UNLOCK_PARTNER,e)},s=!1,c=this.GetPartnerData(e);return c?c.cards+=n:((c=this.OnCreateData(e)).cards+=n-1,a&&a(),s=!0),this.Save(),s},n.OnUpgrade=function(t,e){t.cards-=e,t.level++,this.Save(),o.instance.SetDailyMission(i.DailyMissionType.PARTNER_UPGRADE,1),s.instance.SetJourney(i.JourneyType.PARTNER_UPGRADE,1)},n.GetEmptyIndex=function(){for(var t=-1,e=0;e<this.storage.selection.length;++e)if(0==this.storage.selection[e]){t=e;break}return t},n.GetSelectionIndex=function(t){return this.storage.selection.indexOf(t)},n.OnSelecetion=function(t,e){if(t){for(var n=0;n<this.storage.selection.length;++n)if(0==this.storage.selection[n]){this.storage.selection[n]=e;break}}else for(var r=0;r<this.storage.selection.length;++r)if(this.storage.selection[r]==e){this.storage.selection[r]=0;break}this.Save()},n.GetUpgradeAddition=function(t,e){return t[0]+e*t[1]*t[2]},n.GetPartnerHp=function(t,e){var n=this.GetUpgradeAddition(t.hp,e);return Math.floor(n)},n.GetPartnerAttack=function(t,e){var n=this.GetUpgradeAddition(t.attack,e);return Math.floor(n)},n.GetPartnerAccuracy=function(t,e){var n=this.GetUpgradeAddition(t.accuracy,e);return Math.floor(n)},n.GetPartnerDodge=function(t,e){var n=this.GetUpgradeAddition(t.dodge,e);return Math.floor(n)},n.GetPartnerCrit=function(t,e){var n=this.GetUpgradeAddition(t.crit,e);return Math.floor(n)},n.GetPartnerCritReduce=function(t,e){var n=this.GetUpgradeAddition(t.crit_reduce,e);return Math.floor(n)},n.GetPower=function(t,e){var n=this.GetPartnerHp(t,e);n*=.1;var r=this.GetPartnerAttack(t,e);r*=.1;var i=this.GetPartnerAccuracy(t,e);i*=.1;var a=this.GetPartnerDodge(t,e);a*=.1;var s=this.GetPartnerCrit(t,e);s*=.1;var o=this.GetPartnerCritReduce(t,e);return o*=.1,Math.floor(n+r+i+a+s+o)},n.Save=function(){r.OnSave(i.Constant.PARTNER_DATAS,this.storage)},e(t,[{key:"Selection",get:function(){return this.storage.selection},set:function(t){this.storage.selection=t,this.Save()}},{key:"PartnerConfigs",get:function(){return this.partner_configs}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/PartnerItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./GameDatas.ts","./PartnerDataManager.ts","./UserDataManager.ts","./UiManager.ts","./MissionDataManager.ts","./GameOption.ts"],(function(e){var t,n,i,r,a,l,o,s,c,u,f,g,p,d,h,b,m,_,y,v,w,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,s=e.Sprite,c=e.Node,u=e.sp,f=e.resources,g=e.Material,p=e.Component},function(e){d=e.default,h=e.CustomBundles},function(e){b=e.GameDatas},function(e){m=e.default},function(e){_=e.default},function(e){y=e.default},function(e){v=e.default},function(e){w=e.default,M=e.AudioClips}],execute:function(){var P,z,S,R,G,A,E,D,L,k,U,C,I,N,T,F,O,x,V,X,B,K,H,J,j,Q,Y,q,W,Z,$,ee,te;a._RF.push({},"f848aJzbMJBIYOM0QKKRuOP","PartnerItem",void 0);var ne=l.ccclass,ie=l.property;e("default",(P=ne("PartnerItem"),z=ie(o),S=ie(s),R=ie(o),G=ie(o),A=ie(o),E=ie(o),D=ie(o),L=ie(o),k=ie(s),U=ie(o),C=ie(s),I=ie(c),N=ie(c),T=ie(c),F=ie(u.Skeleton),P((V=t((x=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"title",V,r(t)),i(t,"background",X,r(t)),i(t,"level",B,r(t)),i(t,"power",K,r(t)),i(t,"carry_count",H,r(t)),i(t,"hp",J,r(t)),i(t,"attack",j,r(t)),i(t,"gold",Q,r(t)),i(t,"character_icon",Y,r(t)),i(t,"character_count",q,r(t)),i(t,"career_tag",W,r(t)),i(t,"new_tag",Z,r(t)),i(t,"upgrade_cost_node",$,r(t)),i(t,"max_level_node",ee,r(t)),i(t,"role",te,r(t)),t.config=null,t.data=null,t}n(t,e);var a=t.prototype;return a.Init=function(e){var t=this;this.config=e,this.title.string=e.name,d.SetSkeletonData(this.role,"spine/partners/"+e.skeleton,(function(){t.role.setAnimation(0,b.PartnerAnimation.IDLE,!0),t.role.timeScale=.6})),d.SetSpriteFrame(this.career_tag,h.UI,"icons/icon_career_"+this.config.career),this.Refresh(),this.node.active=!0},a.Refresh=function(){var e=this;this.data=m.instance.GetPartnerData(this.config.id);var t=this.data&&0!=this.data.status;this.background.grayscale=!t;var n="materials/ui-sprite-gray-material",i=1,r=0;t&&(n="materials/ui-sprite-material",i=this.data.level,r=this.data.cards);var a=m.instance.GetUpgradeConfig(i);f.load(n,g,(function(t,n){e.role.customMaterial=n})),this.level.string="等级："+i;var l=m.instance.GetPartnerHp(this.config,i);this.hp.string=l.toString();var o=m.instance.GetPartnerAttack(this.config,i);if(this.attack.string=o.toString(),this.carry_count.string="可携带数量"+a.limits,i<b.PARTNER_MAX_LEVEL){var s=m.instance.GetUpgradeConfig(i+1);this.gold.string=_.instance.GetGoldString()+"/"+d.FormateNumber(s.golds),this.character_count.string=d.FormateNumber(r)+"/"+d.FormateNumber(s.cards)}this.upgrade_cost_node.active=i<b.PARTNER_MAX_LEVEL,this.max_level_node.active=i>=b.PARTNER_MAX_LEVEL,this.power.string=m.instance.GetPower(this.config,i).toString()},a.ClickOnUpgrade=function(){if(w.instance.PlaySound(M.CLICK),this.data)if(this.data.level>=b.PARTNER_MAX_LEVEL)y.instance.ShowMessage("伙伴已满级");else{var e=m.instance.GetUpgradeConfig(this.data.level+1);this.data.cards<e.cards?y.instance.ShowMessage("伙伴卡片数量不足"):_.instance.Golds<e.golds?y.instance.ShowMessage("金币数量不足"):(v.instance.SetDailyMission(b.DailyMissionType.PARTNER_UPGRADE,1),_.instance.Golds-=e.golds,m.instance.OnUpgrade(this.data,e.cards),this.Refresh())}else y.instance.ShowMessage("需要先解锁伙伴")},t}(p)).prototype,"title",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(x.prototype,"background",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(x.prototype,"level",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(x.prototype,"power",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(x.prototype,"carry_count",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(x.prototype,"hp",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(x.prototype,"attack",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(x.prototype,"gold",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(x.prototype,"character_icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(x.prototype,"character_count",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(x.prototype,"career_tag",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(x.prototype,"new_tag",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(x.prototype,"upgrade_cost_node",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(x.prototype,"max_level_node",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(x.prototype,"role",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=x))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/PartnerPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PartnerItem.ts","./PartnerDataManager.ts","./BasePanel.ts","./UiManager.ts","./MenuToggle.ts","./GuideDataManager.ts","./GameOption.ts"],(function(e){var t,n,i,r,s,a,o,u,c,l,h,f,m,d,p,g,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,o=e.Widget,u=e.UITransform,c=e.Vec3,l=e.instantiate},function(e){h=e.default},function(e){f=e.default},function(e){m=e.default},function(e){d=e.default},function(e){p=e.default},function(e){g=e.default},function(e){y=e.default,b=e.AudioClips}],execute:function(){var v,S,I,P,_,x,G,O,w,M,z;s._RF.push({},"e6be0+KlSZLI5j/Q1DJqyes","PartnerPage",void 0);var C=a.ccclass,D=a.property;e("default",(v=C("PartnerPage"),S=D(o),I=D(u),P=D(h),_=D([p]),v((O=t((G=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"content",O,r(t)),i(t,"root",w,r(t)),i(t,"item",M,r(t)),i(t,"menus",z,r(t)),t.items=[],t.menu_index=0,t.types=[0,1,2,3,5],t}n(t,e);var s=t.prototype;return s.Init=function(){e.prototype.Init.call(this),this.item.node.active=!1;for(var t=0;t<this.menus.length;++t)this.menus[t].Init(t,this.OnSelectMenu.bind(this));this.content.top=d.instance.widescreen?160:100},s.SetVisiable=function(e){if((this.node.active=e,e)&&(this.menu_index=0,this.menus[this.menu_index].OnSelect(!0),this.SetItems(),1==g.instance.GetGuideStep(2))){var t=g.instance.GetGuide(2,2);g.instance.SetGuide(2,!1),d.instance.ShowGuide(t)}},s.Refresh=function(){this.SetItems()},s.SetItems=function(){this.root.node.position=c.ZERO;for(var e=this.types[this.menu_index],t=f.instance.GetPartners(e);this.items.length<t.length;)this.CreateItem();for(var n=0;n<this.items.length;++n)n<t.length?this.items[n].Init(t[n]):this.items[n].node.active=!1},s.CreateItem=function(){var e=l(this.item.node);e.setParent(this.root.node),e.scale=c.ONE,e.position=c.ZERO;var t=e.getComponent(h);this.items.push(t)},s.OnSelectMenu=function(e){this.menu_index!=e&&(y.instance.PlaySound(b.CLICK),this.menus[this.menu_index].OnSelect(!1),this.menu_index=e,this.menus[this.menu_index].OnSelect(!0),this.SetItems())},t}(m)).prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(G.prototype,"root",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(G.prototype,"item",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(G.prototype,"menus",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=G))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/PartnerRosterItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./PartnerDataManager.ts","./UiManager.ts","./GuideDataManager.ts","./GameOption.ts"],(function(e){var t,i,n,a,r,o,c,l,s,u,d,h,f,g,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Sprite,l=e.Label,s=e.Component},function(e){u=e.default,d=e.CustomBundles},function(e){h=e.default},function(e){f=e.default},function(e){g=e.default},function(e){p=e.default,b=e.AudioClips}],execute:function(){var v,y,m,S,I,G,w,C,k,z,P,_,D,F,M;r._RF.push({},"484a2fcIqlFEJ6KH+9ucWID","PartnerRosterItem",void 0);var R=o.ccclass,U=o.property;e("default",(v=R("PartnerRosterItem"),y=U(c),m=U(c),S=U(c),I=U(l),G=U(l),w=U(c),v((z=t((k=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"background",z,a(t)),n(t,"icon",P,a(t)),n(t,"career",_,a(t)),n(t,"level",D,a(t)),n(t,"count",F,a(t)),n(t,"seleced",M,a(t)),t.page=null,t.config=null,t.data=null,t.selection=!1,t}i(t,e);var r=t.prototype;return r.Init=function(e){this.page=e},r.Activate=function(e){if(this.config=e,u.SetSpriteFrame(this.background,d.UI,"icons/team_bg_"+this.config.quality),u.SetSpriteFrame(this.icon,d.UI,"icons/partner/"+this.config.icon),u.SetSpriteFrame(this.career,d.UI,"icons/icon_career_"+this.config.career),this.data=h.instance.GetPartnerData(this.config.id),this.data){this.background.grayscale=!1,this.icon.grayscale=!1,this.level.string=this.data.level.toString(),this.level.node.active=!0;var t=h.instance.GetUpgradeConfig(this.data.level);this.count.string=t.limits.toString(),this.count.node.active=!0;var i=this.page.GetSelectionIndex(this.data.id);this.selection=i>=0,this.seleced.node.active=this.selection}else this.background.grayscale=!0,this.icon.grayscale=!0,this.selection=!1,this.level.node.active=!1,this.count.node.active=!1,this.seleced.node.active=!1;this.node.active=!0},r.OnClick=function(){(p.instance.PlaySound(b.CLICK),this.data)?(0==this.page.OnSelecetRoster(this.data.id)&&f.instance.ShowMessage("上阵人数已满"),4==g.instance.GetGuideStep(3)&&(f.instance.CloseGuide(),this.page.CheckGuide())):f.instance.ShowMessage("需要先解锁伙伴")},t}(s)).prototype,"background",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(k.prototype,"career",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"level",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(k.prototype,"count",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(k.prototype,"seleced",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=k))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/PartnerSelectionItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PartnerDataManager.ts","./GameUtility.ts","./GameOption.ts"],(function(e){var t,i,n,r,a,o,l,c,u,s,p,f,d,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,c=e.Label,u=e.Sprite,s=e.Component},function(e){p=e.default},function(e){f=e.default,d=e.CustomBundles},function(e){b=e.default,g=e.AudioClips}],execute:function(){var h,v,m,y,S,w,P,k,z,C,I,_,F,L,U,D,G,A,M;a._RF.push({},"68c58kFxjpFLLUMloqYwl8w","PartnerSelectionItem",void 0);var O=o.ccclass,j=o.property;e("default",(h=O("PartnerSelectionItem"),v=j(l),m=j(c),y=j(l),S=j(u),w=j(u),P=j(u),k=j(c),z=j(c),h((_=t((I=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"locked",_,r(t)),n(t,"condition",F,r(t)),n(t,"partner",L,r(t)),n(t,"background",U,r(t)),n(t,"icon",D,r(t)),n(t,"career",G,r(t)),n(t,"level",A,r(t)),n(t,"count",M,r(t)),t.page=null,t.id=0,t}i(t,e);var a=t.prototype;return a.Init=function(e){this.page=e},a.Activate=function(e){if(this.id=e,console.log(e),this.id<=0)this.condition.string=0==this.id?"未上阵":"通过2-1解锁",this.locked.active=!0,this.partner.active=!1;else{var t=p.instance.GetPartnerData(this.id);this.SetPartner(t),this.partner.active=!0,this.locked.active=!1}},a.SetPartner=function(e){var t=p.instance.GetPartnerConfig(e.id);console.log(t),f.SetSpriteFrame(this.background,d.UI,"icons/team_bg_"+t.quality),f.SetSpriteFrame(this.icon,d.UI,"icons/partner/"+t.icon),f.SetSpriteFrame(this.career,d.UI,"icons/icon_career_"+t.career),this.level.string=e.level.toString(),this.level.node.active=!0;var i=p.instance.GetUpgradeConfig(e.level);this.count.string=i.limits.toString(),this.count.node.active=!0},a.OnClick=function(){this.id<=0||(b.instance.PlaySound(g.CLICK),this.page.OnCancelSelect(this.id))},t}(s)).prototype,"locked",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(I.prototype,"condition",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"partner",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(I.prototype,"background",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"icon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"career",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(I.prototype,"level",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(I.prototype,"count",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=I))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/PartnerSelectionPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./PartnerDataManager.ts","./PartnerSelectionItem.ts","./PartnerRosterItem.ts","./UiManager.ts","./GuideDataManager.ts","./GameOption.ts"],(function(t){var e,n,i,a,o,r,s,c,l,u,h,f,d,p,g,S,v,P,G,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.UITransform,c=t.Button,l=t.Label,u=t.Node,h=t.instantiate,f=t.Vec3},function(t){d=t.default},function(t){p=t.default},function(t){g=t.default},function(t){S=t.default},function(t){v=t.default},function(t){P=t.default},function(t){G=t.default,_=t.AudioClips}],execute:function(){var b,m,w,y,C,O,R,I,x,z,E,D,k,A,L;o._RF.push({},"92aaaWTphhPwrj9P8MBIiJk","PartnerSelectionPage",void 0);var M=r.ccclass,B=r.property;t("default",(b=M("PartnerSelectionPage"),m=B(s),w=B(c),y=B(l),C=B(u),O=B(u),R=B([g]),b((z=e((x=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"content",z,a(e)),i(e,"confirm",E,a(e)),i(e,"power",D,a(e)),i(e,"root",k,a(e)),i(e,"template",A,a(e)),i(e,"selection",L,a(e)),e.roster=[],e.selection_datas=[],e}n(e,t);var o=e.prototype;return o.Init=function(){this.template.active=!1;for(var t=0;t<this.selection.length;++t)this.selection[t].Init(this)},o.Show=function(){var e=this;t.prototype.Show.call(this),this.selection_datas=[];for(var n=0;n<p.instance.Selection.length;++n)this.selection_datas.push(p.instance.Selection[n]);this.Refresh(),this.OnEntrance(this.content,(function(){var t=P.instance.GetGuideStep(3);if(console.log(t),3==t){var n=P.instance.GetGuide(3,4);v.instance.ShowGuide(n,e.roster[0].node),P.instance.SetGuide(3,!1)}}))},o.CheckGuide=function(){if(4==P.instance.GetGuideStep(3)){var t=P.instance.GetGuide(3,5);v.instance.ShowGuide(t,this.confirm.node)}},o.Refresh=function(){this.SetSelection(),this.SetRoster(),this.SetPower()},o.SetPower=function(){for(var t=0,e=0;e<this.selection_datas.length;++e){var n=this.selection_datas[e];if(0!=n){var i=p.instance.GetPartnerConfig(n),a=p.instance.GetPartnerData(n);t+=p.instance.GetPower(i,a.level)}}this.power.string=t.toString()},o.SetSelection=function(){for(var t=0;t<this.selection.length;++t)t<this.selection_datas.length?this.selection[t].Activate(this.selection_datas[t]):this.selection[t].Activate(-1)},o.SetRoster=function(){for(var t=p.instance.PartnerConfigs;this.roster.length<t.length;){var e=h(this.template);e.setParent(this.root),e.position=f.ZERO,e.scale=f.ONE;var n=e.getComponent(S);n.Init(this),this.roster.push(n)}this.roster.forEach((function(e,n){n<t.length?e.Activate(t[n]):e.node.active=!1}))},o.GetSelectionIndex=function(t){return this.selection_datas.indexOf(t)},o.OnCancelSelect=function(t){var e=this.selection_datas.indexOf(t);this.selection_datas[e]=0,this.Refresh()},o.OnSelecetRoster=function(t){var e=this.selection_datas.indexOf(t);if(!(e<0))return this.selection_datas[e]=0,this.Refresh(),-1;var n=this.selection_datas.indexOf(0);return n>=0?(this.selection_datas[n]=t,this.Refresh(),1):0},o.ClickOnClose=function(){var t=this;this.is_action||(G.instance.PlaySound(_.CLOSE),this.OnExit(this.content,(function(){v.instance.ClosePage(t)})))},o.ClickOnSave=function(){var t=this;this.is_action||(G.instance.PlaySound(_.CLICK),4==P.instance.GetGuideStep(3)&&(P.instance.SetGuide(3,!0),v.instance.CloseGuide()),p.instance.Selection=this.selection_datas,this.OnExit(this.content,(function(){v.instance.ClosePage(t)})))},e}(d)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(x.prototype,"confirm",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(x.prototype,"power",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(x.prototype,"root",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(x.prototype,"template",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(x.prototype,"selection",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=x))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/PausePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GameOption.ts","./UiManager.ts","./GameDatas.ts","./BattleScene.ts","./GenericToggle.ts"],(function(n){var t,e,i,s,a,o,u,c,l,r,g,f,d,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,s=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,u=n.UITransform},function(n){c=n.default},function(n){l=n.default,r=n.AudioClips},function(n){g=n.default},function(n){f=n.GameDatas},function(n){d=n.default},function(n){p=n.default}],execute:function(){var h,S,P,m,C,y,_,b,I;a._RF.push({},"ebfe1tlY3FFoq2ekH10p/Qg","PausePage",void 0);var O=o.ccclass,k=o.property;n("default",(h=O("PausePage"),S=k(u),P=k(p),m=k(p),h((_=t((y=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,i(t,"content",_,s(t)),i(t,"sound_toggle",b,s(t)),i(t,"music_toggle",I,s(t)),t}e(t,n);var a=t.prototype;return a.Init=function(){this.sound_toggle.Init(this.ClickOnSound.bind(this)),this.music_toggle.Init(this.ClickOnMusic.bind(this))},a.Show=function(){n.prototype.Show.call(this),this.sound_toggle.SetStatus(l.instance.sound?1:0),this.music_toggle.SetStatus(l.instance.music?1:0),this.OnEntrance(this.content)},a.ClickOnSound=function(){l.instance.PlaySound(r.CLICK),l.instance.sound=!l.instance.sound,this.sound_toggle.SetStatus(l.instance.sound?1:0)},a.ClickOnMusic=function(){l.instance.PlaySound(r.CLICK),l.instance.music=!l.instance.music,this.music_toggle.SetStatus(l.instance.music?1:0)},a.ClickOnContinue=function(){l.instance.PlaySound(r.CLICK),g.instance.ClosePage(this),d.instance.SetPause(!1)},a.ClickOnExit=function(){l.instance.PlaySound(r.CLOSE),g.instance.ClearPages(),g.instance.ShowLoading("main",(function(){g.instance.ShowBasePage(f.Pages.MAIN_PAGE)}))},t}(c)).prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(y.prototype,"sound_toggle",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(y.prototype,"music_toggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=y))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformProxy.ts",["cc","./GameDatas.ts","./AndroidBridge.ts","./MiniGameProxy.ts"],(function(t){var o,i,r,a;return{setters:[function(t){o=t.cclegacy},function(t){i=t.GameDatas},function(t){r=t.default},function(t){a=t.MiniGameProxy}],execute:function(){o._RF.push({},"de5ffaA+0RBJY0DCgYXp71I","PlatformProxy",void 0),t("default",function(){function t(){}return t.Init=function(t,o){this.platform=t,console.log("平台初始化",this.platform),this.platform==i.Platforms.minigame?a.init(o):this.platform==i.Platforms.android&&r.init(o)},t.ShowSplash=function(t){this.platform,i.Platforms.android},t.ShowVideo=function(t,o){if(this.platform!==i.Platforms.editor){this.platform==i.Platforms.minigame&&a.ShowVideo(t,(function(t){o&&o(t)}))}else o&&o(!0)},t.ShowInterstitial=function(t,o){this.platform!==i.Platforms.editor?this.platform==i.Platforms.minigame&&a.ShowInterstitial(t,o):o&&o(!0)},t.ShowCustom=function(t,o){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.ShowCustom(t,o)},t.OnCustom=function(){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.OnCustom()},t.HideCustom=function(){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.HideCustom()},t.ShowBanner=function(t){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.ShowBanner(t)},t.HideBanner=function(){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.HideBanner()},t.OnVibrateShort=function(t){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.OnVibrateShort(t)},t.OnVibrateLong=function(){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.OnVibrateLong()},t.OnRecorderScreen=function(t){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.OnRecorderScreen(t)},t.ShareRecordScreen=function(t){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&(console.log("shareRecord",this.platform),a.ShareRecordScreen(t))},t.ShareInitiative=function(){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.ShareInitiative()},t.SharePassivity=function(){this.platform!==i.Platforms.editor&&this.platform==i.Platforms.minigame&&a.SharePassivity()},t.OnPurchase=function(t,o){console.log("消耗现金"+t+"元"),this.platform==i.Platforms.android?r.CheckPayLimit(t,(function(i){console.log(i),1==i&&(r.SubmitPayResult(t),o&&o())})):o&&o()},t}()).platform=i.Platforms.android,o._RF.pop()}}}));

System.register("chunks:///_virtual/PurchasePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GameOption.ts","./UiManager.ts"],(function(t){var e,n,i,r,a,c,s,o,l,u,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,s=t.UITransform,o=t.Label},function(t){l=t.default},function(t){u=t.default,h=t.AudioClips},function(t){f=t.default}],execute:function(){var p,g,P,d,y,b,C;a._RF.push({},"f2bc0ssEKVOSJ5qnI4XzkkJ","PurchasePage",void 0);var v=c.ccclass,S=c.property;t("default",(p=v("PurchasePage"),g=S(s),P=S(o),p((b=e((y=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"content",b,r(e)),i(e,"price",C,r(e)),e}n(e,t);var a=e.prototype;return a.Show=function(){t.prototype.Show.call(this),console.log("PurchasePage Show",this.args),this.OnEntrance(this.content),this.price.string=this.args.dec},a.ClickOnConfirm=function(){if(!this.is_action){u.instance.PlaySound(h.CLICK);this.args;null!=this.args.cbPurchse&&this.args.cbPurchse(),f.instance.ClosePage(this)}},a.ClickOnCancel=function(){this.is_action||(u.instance.PlaySound(h.CLICK),f.instance.ClosePage(this))},e}(l)).prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(y.prototype,"price",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/RealNamePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GameOption.ts","./GameUtility.ts","./UserDataManager.ts","./GameDatas.ts"],(function(e){var t,n,a,i,r,o,s,c,l,u,f,p,g,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.UITransform,c=e.EditBox},function(e){l=e.default},function(e){u=e.default},function(e){f=e.default,p=e.AudioClips},function(e){g=e.default},function(e){h=e.default},function(e){m=e.GameDatas}],execute:function(){var d,_,b,y,P,S,w,A,C;r._RF.push({},"b68faoAyVFL2at79abhTPGj","RealNamePage",void 0);var G=o.ccclass,R=o.property;e("default",(d=G("RealNamePage"),_=R(s),b=R(c),y=R(c),d((w=t((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"content",w,i(t)),a(t,"real_name",A,i(t)),a(t,"card_number",C,i(t)),t}n(t,e);var r=t.prototype;return r.Show=function(){e.prototype.Show.call(this),this.real_name.string="",this.card_number.string="",this.OnEntrance(this.content)},r.ClickOnCommit=function(){if(!this.is_action){f.instance.PlaySound(p.CLICK);var e=this.real_name.string,t=this.card_number.string;if(e)if(18==t.length)if(g.CheckIdentityCardNumber(t))u.instance.ClosePage(this),0==h.instance.GetAgeStage(t)?(u.instance.ShowPopup(m.Pages.REAL_NAME_RESULT_PAGE),h.instance.SetIdentityCard(e,t)):u.instance.ShowPopup(m.Pages.MINOR_WARNING_PAGE);else u.instance.ShowMessage("无效的证件号码");else u.instance.ShowMessage("无效的证件号码");else u.instance.ShowMessage("请填写真实姓名")}},t}(l)).prototype,"content",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(S.prototype,"real_name",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(S.prototype,"card_number",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=S))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/RealNameResultPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GameOption.ts"],(function(t){var e,n,i,a,o,r,c,s,l,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.UITransform},function(t){s=t.default},function(t){l=t.default},function(t){u=t.default,f=t.AudioClips}],execute:function(){var p,h,d,g,y;o._RF.push({},"64b5a75oUpMM4xV0JLzZz89","RealNameResultPage",void 0);var v=r.ccclass,P=r.property;t("default",(p=v("RealNameResultPage"),h=P(c),p((y=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"content",y,a(e)),e}n(e,t);var o=e.prototype;return o.Show=function(){t.prototype.Show.call(this),this.OnEntrance(this.content,(function(){}))},o.ClickOnClose=function(){var t=this;this.is_action||(u.instance.PlaySound(f.CLICK),this.OnExit(this.content,(function(){l.instance.ClosePage(t)})))},e}(s)).prototype,"content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/RebirthPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GameDatas.ts","./BattleScene.ts","./UserDataManager.ts","./LevelDataManager.ts","./GameOption.ts"],(function(t){var n,e,i,a,o,r,s,c,u,l,f,h,p,d,g,b,m,P;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.UITransform,c=t.Button,u=t.Label,l=t.Sprite},function(t){f=t.default},function(t){h=t.default},function(t){p=t.GameDatas},function(t){d=t.default},function(t){g=t.default},function(t){b=t.default},function(t){m=t.default,P=t.AudioClips}],execute:function(){var y,v,S,w,C,O,R,_,D,I,L;o._RF.push({},"34e71i4wTxFd4r6R8IdArS/","RebirthPage",void 0);var x=r.ccclass,A=r.property;t("default",(y=x("RebirthPage"),v=A(s),S=A(c),w=A(u),C=A([l]),y((_=n((R=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"content",_,a(n)),i(n,"confirm_button",D,a(n)),i(n,"tips",I,a(n)),i(n,"images",L,a(n)),n.index=0,n}e(n,t);var o=n.prototype;return o.Show=function(){var n=this;t.prototype.Show.call(this),this.confirm_button.node.active=!1,this.tips.node.active=!1,this.OnEntrance(this.content,(function(){n.tips.node.active=!0,n.confirm_button.node.active=!0,n.schedule(n.OnCountdown,1,4,1)}))},o.OnCountdown=function(){this.index++,m.instance.PlaySound(P.COUNTDOWN),console.log(this.index),this.index<5?this.SetImage():(this.unschedule(this.OnCountdown),h.instance.ClosePage(this),h.instance.ShowPopup(p.Pages.FAILURE_PAGE))},o.SetImage=function(){for(var t=0;t<this.images.length;++t)this.images[t].node.active=this.index==t},o.ClickOnRebirth=function(){m.instance.PlaySound(P.CLICK),g.instance.Diamond<50?h.instance.ShowMessage("勾玉数量不足"):(b.instance.statistics.rebirth++,h.instance.ClosePage(this),d.instance.OnRebirth())},o.ClickOnClose=function(){m.instance.PlaySound(P.CLOSE),h.instance.ClosePage(this),h.instance.ShowPopup(p.Pages.FAILURE_PAGE)},n}(f)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(R.prototype,"confirm_button",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(R.prototype,"tips",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(R.prototype,"images",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=R))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/ReplenishEnergyPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./UserDataManager.ts","./EnergyManager.ts","./GameOption.ts","./GameDatas.ts"],(function(e){var n,t,i,a,r,s,o,c,l,u,f,p,g,h,y,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.UITransform,c=e.Sprite,l=e.Label},function(e){u=e.default},function(e){f=e.default},function(e){p=e.default},function(e){g=e.default},function(e){h=e.default,y=e.AudioClips},function(e){d=e.GameDatas}],execute:function(){var b,v,m,P,R,E,_,C,S,w,D;r._RF.push({},"c37dfZizJdC37Z/4k9nDfq8","ReplenishEnergyPage",void 0);var z=s.ccclass,O=s.property;e("default",(b=z("ReplenishEnergyPage"),v=O(o),m=O(c),P=O(l),R=O([l]),b((C=n((_=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,i(n,"content",C,a(n)),i(n,"energy_bar",S,a(n)),i(n,"energy_value",w,a(n)),i(n,"tips",D,a(n)),n}t(n,e);var r=n.prototype;return r.Show=function(){e.prototype.Show.call(this),this.Refresh(),this.OnEntrance(this.content)},r.Refresh=function(){this.energy_bar.fillRange=g.instance.energy/g.instance.max,this.energy_value.string=g.instance.energy+"/"+g.instance.max;var e=p.instance.GetEnergyReplenishCounts();this.tips[0].string="今日剩余次数"+e[0]+"/3",this.tips[1].string="今日剩余次数"+e[1]+"/1"},r.OnReplenishEnergy=function(e,n){if(!this.is_action){h.instance.PlaySound(y.CLICK);var t=parseInt(n);if(!(p.instance.GetEnergyReplenishCounts[t]<=0)){var i=1==t?20:60;if(p.instance.Diamond<i)f.instance.ShowMessage("钻石数量不足");else{var a=this,r={dec:"是否花费 "+i+" 勾玉， 补充体力？",price:i,cbPurchse:function(){p.instance.SetEnergyReplenishCount(t),p.instance.Diamond-=i;var e=1==t?20:g.instance.max-g.instance.energy;g.instance.OnAddition(e),a.Refresh()}};f.instance.ShowTopPopup(d.Pages.PURCHASE_PAGE,r)}}}},r.ClickOnClose=function(){var e=this;this.is_action||(h.instance.PlaySound(y.CLOSE),this.OnExit(this.content,(function(){f.instance.ClosePage(e)})))},n}(u)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(_.prototype,"energy_bar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(_.prototype,"energy_value",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(_.prototype,"tips",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=_))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/RewardPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GenericItem.ts","./ItemDataProxy.ts","./UiManager.ts","./GameOption.ts"],(function(t){var e,n,i,a,r,s,o,c,l,u,h,f,d,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.UITransform,c=t.Label},function(t){l=t.default},function(t){u=t.default},function(t){h=t.default},function(t){f=t.default},function(t){d=t.default,p=t.AudioClips}],execute:function(){var g,v,w,y,b,m,R,O,P;r._RF.push({},"1b318htoRBDKo3xnA0Y3smI","RewardPage",void 0);var C=s.ccclass,I=s.property;t("default",(g=C("RewardPage"),v=I(o),w=I(c),y=I([u]),g((R=e((m=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"content",R,a(e)),i(e,"tips",O,a(e)),i(e,"rewards",P,a(e)),e.datas=[],e}n(e,t);var r=e.prototype;return r.Show=function(){var e=this;t.prototype.Show.call(this),this.OnConvertRewards(),console.log(this.datas);for(var n=0;n<this.datas.length;++n)h.instance.OnAddition(this.datas[n]);this.Refresh(),this.tips.node.active=!1,this.OnEntrance(this.content,(function(){e.tips.node.active=!0}))},r.OnConvertRewards=function(){this.datas=[];var t=this.args;console.log(t);for(var e=0;e<t.length;++e){var n=h.instance.OnConvertItem(t[e]);this.datas.push(n)}},r.Refresh=function(){for(var t=0;t<this.rewards.length;++t)t<this.datas.length?this.rewards[t].Init(this.datas[t]):this.rewards[t].node.active=!1},r.ClickOnClose=function(){var t=this;this.is_action||(d.instance.PlaySound(p.CLOSE),this.OnExit(this.content,(function(){f.instance.ClosePage(t)})))},e}(l)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(m.prototype,"tips",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(m.prototype,"rewards",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=m))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/SceneBackground.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,c,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,c=e.Widget,r=e.Component}],execute:function(){var u;t._RF.push({},"19e7cL0HvtGDL52Pn6bnyP/","SceneBackground",void 0);var i=o.ccclass;o.property,e("default",i("SceneBackground")(u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.Init=function(){var e=this.node.getComponent(c);e.top=0,e.left=0},t}(r))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GenericToggle.ts","./GameOption.ts","./UiManager.ts"],(function(t){var n,i,e,o,s,u,c,a,l,r,g,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,u=t._decorator,c=t.UITransform},function(t){a=t.default},function(t){l=t.default},function(t){r=t.default,g=t.AudioClips},function(t){f=t.default}],execute:function(){var d,h,p,S,m,y,_,C,b;s._RF.push({},"81054wUaQVOZ54k6InwsXSz","SettingPage",void 0);var O=u.ccclass,P=u.property;t("default",(d=O("SettingPage"),h=P(c),p=P(l),S=P(l),d((_=n((y=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=t.call.apply(t,[this].concat(s))||this,e(n,"content",_,o(n)),e(n,"sound_toggle",C,o(n)),e(n,"music_toggle",b,o(n)),n}i(n,t);var s=n.prototype;return s.Init=function(){this.sound_toggle.Init(this.ClickOnSound.bind(this)),this.music_toggle.Init(this.ClickOnMusic.bind(this))},s.Show=function(){t.prototype.Show.call(this),this.sound_toggle.SetStatus(r.instance.sound?1:0),this.music_toggle.SetStatus(r.instance.music?1:0),this.OnEntrance(this.content)},s.ClickOnSound=function(){r.instance.PlaySound(g.CLICK),r.instance.sound=!r.instance.sound,this.sound_toggle.SetStatus(r.instance.sound?1:0)},s.ClickOnMusic=function(){r.instance.PlaySound(g.CLICK),r.instance.music=!r.instance.music,this.music_toggle.SetStatus(r.instance.music?1:0)},s.ClickOnClose=function(){var t=this;this.is_action||(r.instance.PlaySound(g.CLOSE),this.OnExit(this.content,(function(){f.instance.ClosePage(t)})))},n}(a)).prototype,"content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(y.prototype,"sound_toggle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(y.prototype,"music_toggle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/ShuShiBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseBullet.ts"],(function(t){var e,i,s,o,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,o=t.Rect,n=t.Vec3},function(t){a=t.default}],execute:function(){var h;i._RF.push({},"ed74eUX7utHz6YVnzds+wMe","ShuShiBullet",void 0);var c=s.ccclass;s.property,t("default",c("ShuShiBullet")(h=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this)._midPos=null,e._timeDie=0,e}e(i,t);var s=i.prototype;return s.InitData=function(){this.move_speed=.3,this._timeDie=.5,this.attack_rect=new o(this.node.position.x-50,this.node.position.y-5,100,10),this.node.position=new n(this.attack_data.targetPos.x,this.attack_data.targetPos.y,0)},s.CheckMove=function(t){this.move_end?this._timeDie>0&&(this._timeDie-=t,this._timeDie<=0&&this.SetNeedRemove(!0)):this.move_speed>0&&(this.move_speed-=t,this.move_speed<=0&&(this.node.position=new n(this.attack_data.targetPos.x,this.attack_data.targetPos.y,0),this.CheckAttack(),this.move_end=!0))},i}(a))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/SignInDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts"],(function(t){var a,s,i,n,e;return{setters:[function(t){a=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){i=t.cclegacy},function(t){n=t.default},function(t){e=t.GameDatas}],execute:function(){i._RF.push({},"eced0q0eXVFnJH1DNRx6Xdp","SignInDataManager",void 0);t("SignInConfig",(function(){this.id=0,this.type=0,this.day="",this.reward=""}));var o=t("SignInData",(function(){this.days=0,this.status=[]}));t("default",function(){function t(){this.configs=[],this.weekly_configs=[],this.data=null}var i=t.prototype;return i.LoadConfig=function(){var t=this;n.OnLoad("configs/sign_in",(function(a){t.configs=a}))},i.InitData=function(t){void 0===t&&(t=!1),this.data=n.OnRead(e.Constant.SIGN_IN_DATA),console.log(this.data),this.data?t&&(this.data.status[this.data.days]>=2&&(this.data.days++,this.data.days<7&&(this.data.status[this.data.days]=1)),this.Save()):(this.data=new o,this.data.days=0,this.data.status=[1,0,0,0,0,0,0],this.Save()),this.SetConfigs()},i.SetConfigs=function(){this.weekly_configs=[];for(var t,s=a(this.configs);!(t=s()).done;){var i=t.value;this.data.days<7?1==i.type&&this.weekly_configs.push(i):2==i.type&&this.weekly_configs.push(i)}},i.GetDatas=function(){return this.data.status},i.GetDataToday=function(){return this.data.status[this.data.days]},i.GetConfigToday=function(){return this.data.days<7?this.configs[this.data.days]:this.configs[this.data.days+7]},i.OnClaim=function(){1==this.data.status[this.data.days]&&(this.data.status[this.data.days]=2,this.Save())},i.isComplete=function(){for(var t=0;t<this.data.status.length;++t)if(2!=this.data.status[t])return!1;return!0},i.Save=function(){n.OnSave(e.Constant.SIGN_IN_DATA,this.data)},s(t,[{key:"WeeklyConfigs",get:function(){return this.weekly_configs}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/SignInItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./ItemDataProxy.ts","./DataProxy.ts","./PartnerDataManager.ts","./HeroDataManager.ts"],(function(t){var e,n,i,r,a,o,u,s,c,l,f,g,p,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,u=t.Label,s=t.Sprite,c=t.Component},function(t){l=t.default,f=t.CustomBundles},function(t){g=t.default},function(t){p=t.default},function(t){d=t.default},function(t){b=t.default}],execute:function(){var h,m,y,v,S,I,w,z,D,C,F,P,k,G,R;a._RF.push({},"e2daeTyHXpLdrsPd1GCDxWj","SignInItem",void 0);var x=o.ccclass,H=o.property;t("default",(h=x("SignInItem"),m=H(u),y=H(u),v=H(s),S=H(u),I=H([s]),w=H([s]),h((C=e((D=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"day",C,r(e)),i(e,"title",F,r(e)),i(e,"icon",P,r(e)),i(e,"count",k,r(e)),i(e,"backgrounds",G,r(e)),i(e,"tags",R,r(e)),e.config=null,e}n(e,t);var a=e.prototype;return a.Refresh=function(t,e){this.config=t,this.day.string=this.config.day,this.SetReward(t.reward);for(var n=0;n<this.backgrounds.length;++n)this.backgrounds[n].node.active=n==e;this.tags[0].node.active=1==e,this.tags[1].node.active=2==e},a.SetReward=function(t){var e=p.ConvertString(t,",");if(1==e[0]){var n=g.instance.GetItemConfig(e[1]);this.title.string=n.name,l.SetSpriteFrame(this.icon,f.UI,"icons/"+n.icon),this.count.string=l.FormateNumber(e[2]),this.node.active=!0}else if(2==e[0]){var i=d.instance.GetPartnerConfig(e[1]);this.title.string=i.name,l.SetSpriteFrame(this.icon,f.UI,"icons/partners/"+i.id),this.count.string=l.FormateNumber(e[2])}else if(3==e[0]){var r=b.instance.GetHeroConfig(e[1]);this.title.string=r.name,this.count.string=l.FormateNumber(e[2])}},e}(c)).prototype,"day",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"title",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(D.prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(D.prototype,"count",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(D.prototype,"backgrounds",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(D.prototype,"tags",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=D))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/SignInPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./SignInItem.ts","./UiManager.ts","./SignInDataManager.ts","./DataProxy.ts","./ItemDataProxy.ts","./GameDatas.ts","./HeroDataManager.ts","./PartnerDataManager.ts","./GameOption.ts"],(function(t){var n,e,i,a,o,s,r,c,u,l,f,d,p,h,g,y,C,P,w,S;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.UITransform,c=t.Node},function(t){u=t.default},function(t){l=t.default},function(t){f=t.default},function(t){d=t.default},function(t){p=t.default},function(t){h=t.default,g=t.ItemData},function(t){y=t.GameDatas},function(t){C=t.default},function(t){P=t.default},function(t){w=t.default,S=t.AudioClips}],execute:function(){var m,b,v,D,I,R,A,G,O;o._RF.push({},"778dexPsIJNFpfnfdgl194o","SignInPage",void 0);var _=s.ccclass,E=s.property;t("default",(m=_("SignInPage"),b=E(r),v=E([c]),D=E([l]),m((A=n((R=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return n=t.call.apply(t,[this].concat(o))||this,i(n,"content",A,a(n)),i(n,"buttons",G,a(n)),i(n,"items",O,a(n)),n}e(n,t);var o=n.prototype;return o.Show=function(){t.prototype.Show.call(this),this.Refresh(),this.OnEntrance(this.content)},o.Refresh=function(){var t=d.instance.WeeklyConfigs,n=d.instance.GetDataToday();console.log(n),this.buttons[0].active=1==n,this.buttons[1].active=2==n;for(var e=d.instance.GetDatas(),i=0;i<this.items.length;++i)this.items[i].Refresh(t[i],e[i])},o.ClickOnClaim=function(){w.instance.PlaySound(S.CLICK),d.instance.OnClaim(),f.instance.ClosePage(this),this.ShowReward()},o.ShowReward=function(){var t=d.instance.GetConfigToday(),n=p.ConvertString(t.reward,","),e=n[0],i=new g;if(i.id=n[1],i.count=n[2],1==e)f.instance.ShowRewards(i);else if(2==e){P.instance.AddCards(i.id,i.count)&&f.instance.ShowTopPopup(y.Pages.UNLOCK_CHARACTER_PAGE,{type:2,id:i.id})}else if(3==e){if(C.instance.IsUnlock(i.id)){var a=h.instance.GetHeroDebris(i.id);a&&f.instance.ShowRewards(a)}else f.instance.ShowPopup(y.Pages.UNLOCK_CHARACTER_PAGE,{type:1,id:i.id})}},o.ClickOnClose=function(){var t=this;w.instance.PlaySound(S.CLOSE),this.OnExit(this.content,(function(){f.instance.ClosePage(t)}))},n}(u)).prototype,"content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(R.prototype,"buttons",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=n(R.prototype,"items",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=R))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/SkillDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts"],(function(t){var i,n,s,a;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){s=t.default},function(t){a=t.GameDatas}],execute:function(){n._RF.push({},"c779bUngXtCHZIKqINo7WvJ","SkillDataManager",void 0);t("SkillConfig",(function(){this.id=0,this.level=0,this.name="",this.description="",this.icon="",this.type=0,this.tips="",this.hp=0,this.attack=0,this.defend=0,this.crit=0,this.crit_raduce=0,this.crit_damage=0,this.skill_func=0,this.skill_damage=0,this.buff=0,this.buff_damage=0,this.buff_rate=0,this.distance=0,this.duration=0,this.cooldown=0,this.cost=0}));var l=t("SkillData",(function(){this.id=0,this.level=0}));t("default",function(){function t(){this.MAX_SKILL_LEVEL=5,this.skill_configs=[],this.skill_datas=[]}var n=t.prototype;return n.LoadConfig=function(){var t=this;s.OnLoad("configs/skills",(function(i){t.skill_configs=i,console.log(t.skill_configs)}))},n.InitData=function(){this.skill_datas=s.OnRead(a.Constant.SKILL_DATAS),this.skill_datas||this.InitSkillDatas()},n.InitSkillDatas=function(){this.skill_datas=[];for(var t=[1001,2001,3001,4001,5001],i=0;i<t.length;++i){var n=new l;n.id=t[i],n.level=1,this.skill_datas.push(n)}this.Save()},n.GetSkillConfig=function(t,i){return this.skill_configs.find((function(n){return n.id==t&&n.level==i}))},n.GetSkillData=function(t){return this.skill_datas.find((function(i){return i.id==t}))},n.GetMaxLevel=function(t){return this.skill_configs.filter((function(i){return i.id==t})).length},n.OnUnlock=function(t){var i=new l;i.id=t,i.level=1,this.skill_datas.push(i),this.Save()},n.OnUpgrade=function(t){t.level++,this.Save()},n.Save=function(){s.OnSave(a.Constant.SKILL_DATAS,this.skill_datas)},i(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/StoreDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts"],(function(t){var n,i,a,e;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy},function(t){a=t.default},function(t){e=t.GameDatas}],execute:function(){i._RF.push({},"cb9d4HLOxJI7Z7GOm2+YK5v","StoreDataManager",void 0);t("CommodityConfig",(function(){this.id=0,this.type=0,this.name="",this.icon="",this.items="",this.price=""}));var o=t("StoreStorage",(function(){this.daily=0}));t("default",function(){function t(){this.configs=[],this.data=null}var i=t.prototype;return i.LoadConfig=function(){var t=this;a.OnLoad("configs/store",(function(n){t.configs=n}))},i.InitData=function(t){this.data=a.OnRead(e.Constant.STORE_DATA),this.data?t&&(this.data.daily=0):(this.data=new o,this.data.daily=0)},i.GetCommodityConfig=function(t){return this.configs.find((function(n){return n.id==t}))},i.GetDailyGift=function(){return this.configs.find((function(t){return 1==t.type}))},i.GetCommodityConfigs=function(t){return this.configs.filter((function(n){return n.type==t}))},i.OnDailyGiftReceived=function(){this.data.daily>0||(this.data.daily+=1,this.Save())},i.Save=function(){a.OnSave(e.Constant.STORE_DATA,this.data)},n(t,[{key:"Data",get:function(){return this.data}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/StorePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePanel.ts","./DailyGiftItem.ts","./CommodityItem.ts","./StoreDataManager.ts","./UiManager.ts"],(function(t){var i,e,n,o,r,a,l,s,c,u,f,d,m,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.UITransform,s=t.Widget,c=t.Size},function(t){u=t.default},function(t){f=t.default},function(t){d=t.default},function(t){m=t.default},function(t){p=t.default}],execute:function(){var g,h,y,_,b,I,v,z,w,C,D,S,P;r._RF.push({},"30422tjA5xIEpofivMKWoDB","StorePage",void 0);var G=a.ccclass,M=a.property;t("default",(g=G("StorePage"),h=M(l),y=M(s),_=M(f),b=M([d]),I=M([d]),g((w=i((z=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"top_content",w,o(i)),n(i,"content",C,o(i)),n(i,"daily_gift",D,o(i)),n(i,"gold_items",S,o(i)),n(i,"diamond_items",P,o(i)),i}e(i,t);var r=i.prototype;return r.Init=function(){t.prototype.Init.call(this);var i=p.instance.widescreen?140:80;this.top_content.contentSize=new c(this.top_content.contentSize.width,i),this.content.top=i,this.daily_gift.Init(),this.InitGoldCommodities(),this.InitDiamondCommodities()},r.InitGoldCommodities=function(){for(var t=m.instance.GetCommodityConfigs(2),i=0;i<this.gold_items.length;++i)this.gold_items[i].Init(t[i])},r.InitDiamondCommodities=function(){for(var t=m.instance.GetCommodityConfigs(3),i=0;i<this.diamond_items.length;++i)this.diamond_items[i].Init(t[i])},i}(u)).prototype,"top_content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(z.prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(z.prototype,"daily_gift",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(z.prototype,"gold_items",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=i(z.prototype,"diamond_items",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=z))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/StoryMissionItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MissionDataManager.ts","./ItemDataProxy.ts","./GenericItem.ts","./UiManager.ts","./GameDatas.ts","./GameOption.ts"],(function(t){var e,i,n,r,a,s,o,l,c,u,f,p,d,g,h,y,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Label,l=t.Sprite,c=t.Node,u=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){d=t.default},function(t){g=t.default},function(t){h=t.GameDatas},function(t){y=t.default,b=t.AudioClips}],execute:function(){var v,m,w,S,_,M,z,C,I,P,D,G,R;a._RF.push({},"781b4zqLndCTpfUG9/8z4c4","StoryMissionItem",void 0);var A=s.ccclass,L=s.property;t("default",(v=A("StoryMissionItem"),m=L(o),w=L(l),S=L(o),_=L([d]),M=L([c]),v((I=e((C=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"description",I,r(e)),n(e,"progress_bar",P,r(e)),n(e,"progress_value",D,r(e)),n(e,"rewards",G,r(e)),n(e,"state_nodes",R,r(e)),e.panel=null,e.data=null,e.config=null,e}i(e,t);var a=e.prototype;return a.Init=function(t){this.panel=t},a.Activate=function(t){this.data=t,this.config=f.instance.GetStoryMissionConfig(t.type,t.index),this.description.string=this.config.description;var e=Math.min(t.value,this.config.goal);this.progress_bar.fillRange=e/this.config.goal,this.progress_value.string=e+"/"+this.config.goal,this.SetStatus(),this.SetRewards(),this.node.active=!0},a.SetRewards=function(){for(var t=p.instance.OnParse(this.config.reward),e=0;e<this.rewards.length;++e)e<t.length?this.rewards[e].Init(t[e]):this.rewards[e].node.active=!1},a.SetStatus=function(){for(var t=0;t<this.state_nodes.length;t++)this.state_nodes[t].active=t==this.data.status},a.ClickOnClaim=function(){if(0!=this.data.status){y.instance.PlaySound(b.CLICK),f.instance.OnStoryMissionComplete(this.data.type);var t=p.instance.OnParse(this.config.reward);console.log(t),g.instance.ShowPopup(h.Pages.REWARD_PAGE,t)}},e}(u)).prototype,"description",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(C.prototype,"progress_bar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"progress_value",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(C.prototype,"rewards",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(C.prototype,"state_nodes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=C))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/StoryMissionPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MissionPanel.ts","./StoryMissionItem.ts","./MissionDataManager.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Node,l=t.instantiate,u=t.Vec3},function(t){c=t.default},function(t){p=t.default},function(t){f=t.default}],execute:function(){var h,y,m,v,d,g,M;o._RF.push({},"3858erhvvZEtbB4IaNFAzMo","StoryMissionPanel",void 0);var b=s.ccclass,I=s.property;t("default",(h=b("StoryMissionPanel"),y=I(a),m=I(a),h((g=e((d=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"root",g,r(e)),n(e,"template",M,r(e)),e.items=[],e}i(e,t);var o=e.prototype;return o.Init=function(e){t.prototype.Init.call(this,e),this.template.active=!1},o.Refresh=function(){var t=f.instance.StoryMissions;for(t.sort((function(t,e){return t.status!=e.status?e.status-t.status:t.type-e.type}));this.items.length<t.length;)this.CreateItem();this.items.forEach((function(e,i){i<t.length?e.Activate(t[i]):e.node.active=!1}))},o.CreateItem=function(){var t=l(this.template);t.setParent(this.root),t.position=u.ZERO,t.scale=u.ONE;var e=t.getComponent(p);e.Init(this),this.items.push(e)},e}(c)).prototype,"root",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(d.prototype,"template",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/TopUpLimitPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./UiManager.ts","./GameOption.ts"],(function(t){var i,n,e,o,r,a,c,s,u,l,p,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.UITransform,s=t.Label},function(t){u=t.default},function(t){l=t.default},function(t){p=t.default,f=t.AudioClips}],execute:function(){var h,d,g,y,m,P,b;r._RF.push({},"43686c/W+pPg75DumfaxmKu","TopUpLimitPage",void 0);var v=a.ccclass,L=a.property;t("default",(h=v("TopUpLimitPage"),d=L(c),g=L(s),h((P=i((m=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"content",P,o(i)),e(i,"description",b,o(i)),i.tips="您的账号已被纳入防沉迷系统，根据国家新闻出版署《关于防止未成年人沉迷网络游戏工作的通知》，您已超出支付上限，无法继续充值。",i}n(i,t);var r=i.prototype;return r.Show=function(){t.prototype.Show.call(this),this.description.string=this.tips,this.OnEntrance(this.content)},r.ClickOnConfirm=function(){var t=this;this.is_action||(p.instance.PlaySound(f.CLICK),this.OnExit(this.content,(function(){l.instance.ClosePage(t)})))},i}(u)).prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(m.prototype,"description",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/Transition.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,r,o,a,c,s,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.UIOpacity,s=t.tween,u=t.Component}],execute:function(){var l,p,d,f,y;o._RF.push({},"6dc63PU/6dPCKvp3pldQxYj","Transition",void 0);var h=a.ccclass,v=a.property;t("default",(l=h("Transition"),p=v(c),l((y=n((f=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,i(n,"background",y,r(n)),n}return e(n,t),n.prototype.Show=function(t,n){var e=this;this.background.opacity=255,this.node.active=!0,n&&n(),s(this.background).delay(t).to(.5,{opacity:0}).call((function(){e.node.active=!1})).start()},n}(u)).prototype,"background",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/UiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtility.ts","./Message.ts","./Page.ts","./Transition.ts","./CoverPage.ts","./LoadingPage.ts","./GameDatas.ts","./GuidePage.ts"],(function(t){var i,e,s,a,n,o,l,r,h,g,p,u,c,f,_,P,d,v,S,w,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,l=t.Camera,r=t.Canvas,h=t.Node,g=t.director,p=t.UITransform,u=t.Component},function(t){c=t.default,f=t.CustomBundles},function(t){_=t.default},function(t){P=t.default},function(t){d=t.default},function(t){v=t.default},function(t){S=t.default},function(t){w=t.GameDatas},function(t){y=t.default}],execute:function(){var C,A,m,E,T,O,G,R,U,L;n._RF.push({},"95ad5iSNChFrqOStafKEXye","UiManager",void 0);var b=o.ccclass,D=o.property,B=t("PageLayers",function(t){return t[t.TEMP=0]="TEMP",t[t.BASE=1]="BASE",t[t.SECONDARY=2]="SECONDARY",t[t.POPUP=3]="POPUP",t[t.TOP=4]="TOP",t[t.GUIDE=5]="GUIDE",t[t.EXTRA=6]="EXTRA",t}({}));t("default",(C=b("UiManager"),A=D(l),m=D(r),E=D([h]),C(((L=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return i=t.call.apply(t,[this].concat(n))||this,s(i,"ui_camera",G,a(i)),s(i,"canvas",R,a(i)),s(i,"layers",U,a(i)),i.pages={},i.page_list=[],i.popup_action_list=[],i.top_action_list=[],i.cover=null,i.messages=[],i.waiting=null,i.transition=null,i.loading=null,i.guide=null,i.widescreen=!1,i}e(i,t);var n=i.prototype;return n.onLoad=function(){null==i.instance&&(i.instance=this),g.addPersistRootNode(this.node),this.layers[B.TEMP].active=!1;var t=this.canvas.getComponent(p);this.widescreen=t.height/t.width>2,console.log(t.width,t.height,this.widescreen)},n.Init=function(){this.pages={},this.page_list=[],this.popup_action_list=[],this.top_action_list=[],this.messages=[],this.transition=null,this.ShowCoverPage()},n.ShowCoverPage=function(){var t=this,i=B.BASE;this.cover?this.cover.Show():c.LoadAsset(f.DEFAULT,"pages/CoverPage",(function(e){t.layers[i].addChild(e),e.setPosition(0,0,200*i),t.cover=e.getComponent(v),t.cover.page_name="CoverPage",t.cover.layer=i,t.cover.Show()}))},n.CloseCoverPage=function(){this.cover&&(console.log("Close Cover"),this.cover.Close())},n.PreloadPage=function(t,i){var e=this;c.LoadPage(t,(function(s){e.layers[B.TEMP].addChild(s),s.setPosition(0,0,0);var a=s.getComponent(P);a.Init(),e.pages[t]=a,a.page_name=t,i&&i()}))},n.ShowPage=function(t,i,e){var s=this;if(this.pages[t]){var a=this.pages[t];return a.node.setParent(this.layers[i]),a.layer=i,this.page_list.push(a),a.args=e,void a.Show()}c.LoadPage(t,(function(a){s.layers[i].addChild(a),a.setPosition(0,0,200*i);var n=a.getComponent(P);n.Init(),s.pages[t]=n,n.page_name=t,n.layer=i,s.page_list.push(n),n.args=e,n.Show()}))},n.ShowBasePage=function(t,i){this.ShowPage(t,B.BASE,i),console.log(this.page_list)},n.ShowSecondaryPage=function(t,i){var e=this.GetCurrentPage();e.layer==B.BASE&&e.SetVisiable(!1),this.ShowPage(t,B.SECONDARY,i)},n.ShowPopup=function(t,i){var e=this,s=function(){e.ShowPage(t,B.POPUP,i)};this.popup_action_list.push(s),console.log("Show Popup",this.popup_action_list.length),1==this.popup_action_list.length&&s&&s()},n.ShowTopPopup=function(t,i){var e=this,s=function(){e.ShowPage(t,B.TOP,i)};this.top_action_list.push(s),1==this.top_action_list.length&&s&&s()},n.OnPageClose=function(t){var i=this.page_list.indexOf(t);if(this.page_list.splice(i,1),console.log(this.page_list),t.layer==B.TOP)if(this.top_action_list.shift(),this.top_action_list.length>0){var e=this.top_action_list[0];e&&e()}else if(this.popup_action_list.length>0){var s=this.GetActivePage(B.POPUP);if(s)s.Refresh();else{var a=this.popup_action_list[0];a&&a()}}else{var n;null==(n=this.GetActivePage())||n.Refresh()}else if(t.layer==B.POPUP){if(this.popup_action_list.splice(0,1),this.top_action_list.length<=0)if(this.popup_action_list.length>0){var o=this.popup_action_list[0];o&&o()}else{var l;null==(l=this.GetActivePage())||l.Refresh()}}else{var r;null==(r=this.GetActivePage())||r.SetVisiable(!0)}},n.ClosePage=function(t){var i=t;i||(i=this.GetCurrentPage()),i.Close();var e=this.page_list.indexOf(i);if(this.page_list.splice(e,1),console.log(this.page_list),i.layer==B.TOP)if(this.top_action_list.splice(0,1),this.top_action_list.length>0){var s=this.top_action_list[0];s&&s()}else if(this.popup_action_list.length>0){var a=this.GetActivePage(B.POPUP);if(a)a.Refresh();else{var n=this.popup_action_list[0];n&&n()}}else{var o;null==(o=this.GetActivePage())||o.Refresh()}else if(i.layer==B.POPUP)if(this.popup_action_list.splice(0,1),console.log(this.popup_action_list.length),this.popup_action_list.length>0){var l=this.popup_action_list[0];l&&l()}else{var r;null==(r=this.GetActivePage())||r.Refresh()}else{var h=this.page_list[this.page_list.length-1];null==h||h.SetVisiable(!0)}},n.ClearPages=function(){for(this.popup_action_list=[],this.top_action_list=[];this.page_list.length>0;){this.page_list.pop().Close()}},n.GetCurrentPage=function(){for(var t=[0,0,0,0],i=0;i<this.page_list.length;++i)this.page_list[i].node.active&&(this.page_list[i].layer==B.BASE?t[0]++:this.page_list[i].layer==B.SECONDARY?t[1]++:this.page_list[i].layer==B.POPUP?t[2]++:this.page_list[i].layer==B.TOP&&t[3]++);var e=B.BASE;t[3]>0?e=B.TOP:(t[2]>0||t[1]>0)&&(e=B.POPUP);for(var s=0;s<this.page_list.length;++s)if(this.page_list[s].node.active&&this.page_list[s].layer==e)return this.page_list[s];return null},n.GetActivePage=function(t){void 0===t&&(t=B.BASE);for(var i=0;i<this.page_list.length;++i)if(this.page_list[i].layer===t&&this.page_list[i].node.active)return this.page_list[i];return null},n.ShowRewards=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];i.instance.ShowTopPopup(w.Pages.REWARD_PAGE,e)},n.ShowMessage=function(t){for(var i=this,e=null,s=0;s<this.messages.length;++s)if(!this.messages[s].node.active){e=this.messages[s];break}e?e.Show(t):c.LoadPage("Message",(function(s){s.parent=i.layers[B.EXTRA],e=s.getComponent(_),i.messages.push(e),e.Show(t)}))},n.ShowTransition=function(t,i){var e=this;this.transition?this.transition.Show(t,i):c.LoadPage("Transition",(function(s){s.parent=e.layers[B.EXTRA],e.transition=s.getComponent(d),e.transition.Show(t,i)}))},n.OnWaiting=function(t){var i=this;t?this.waiting?this.waiting.active=!0:c.LoadPage("Waiting",(function(t){t.parent=i.layers[B.EXTRA],i.waiting=t,i.waiting.active=!0})):this.waiting&&(this.waiting.active=!1)},n.ShowLoading=function(t,i){var e=this;this.loading?this.loading.Show(t,i):c.LoadPage("LoadingPage",(function(s){s.parent=e.layers[B.EXTRA],e.loading=s.getComponent(S),e.loading.Show(t,i)}))},n.IsGuide=function(){return!(!this.guide||!this.guide.node.active)},n.ShowGuide=function(t,i){var e=this;if(void 0===i&&(i=null),this.guide)return this.guide.args={config:t,target:i},void this.guide.Show();c.LoadPage("GuidePage",(function(s){s.parent=e.layers[B.GUIDE],e.guide=s.getComponent(y),e.guide.Init(),e.guide.args={config:t,target:i},e.guide.Show()}))},n.CloseGuide=function(){this.guide&&this.guide.Close()},n.ToScreenPosition=function(t){return this.ui_camera.worldToScreen(t)},i}(u)).instance=null,G=i((O=L).prototype,"ui_camera",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(O.prototype,"canvas",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(O.prototype,"layers",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=O))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockCharacterPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./PartnerDataManager.ts","./GameUtility.ts","./UiManager.ts","./HeroDataManager.ts","./GameOption.ts"],(function(e){var t,n,i,a,r,o,l,s,c,u,f,p,h,d,g,k,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.UITransform,s=e.sp,c=e.Label,u=e.Vec3},function(e){f=e.default},function(e){p=e.default},function(e){h=e.default},function(e){d=e.default},function(e){g=e.default},function(e){k=e.default,y=e.AudioClips}],execute:function(){var m,b,C,v,S,P,w,U,_,z,D;r._RF.push({},"a3539jeH2dFJKk9KKCaq7CE","UnlockCharacterPage",void 0);var O=o.ccclass,G=o.property;e("default",(m=O("UnlockCharacterPage"),b=G(l),C=G(s.Skeleton),v=G(c),S=G(c),m((U=t((w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"content",U,a(t)),i(t,"skeleton",_,a(t)),i(t,"partner_name",z,a(t)),i(t,"tips",D,a(t)),t}n(t,e);var r=t.prototype;return r.Show=function(){var t=this;e.prototype.Show.call(this),this.SetCharacter(this.args.type,this.args.id),this.tips.node.active=!1,this.OnEntrance(this.content,(function(){t.tips.node.active=!0}))},r.SetCharacter=function(e,t){var n=this,i="",a="";if(1==e){this.skeleton.node.scale=new u(1.2,1.2,1.2);var r=g.instance.GetHeroConfig(t);g.instance.OnUnlock(r),a=r.name,i="spine/heroes/"+r.skeleton}else if(2==e){this.skeleton.node.scale=new u(2,2,2);var o=p.instance.GetPartnerConfig(t);a=o.name,i="spine/partners/"+o.skeleton}this.partner_name.string=a,h.SetSkeletonData(this.skeleton,i,(function(){n.skeleton.setAnimation(0,"idle",!0),n.skeleton.timeScale=.6}))},r.ClickOnClose=function(){k.instance.PlaySound(y.CLOSE),d.instance.ClosePage(this)},t}(f)).prototype,"content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(w.prototype,"skeleton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"partner_name",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(w.prototype,"tips",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=w))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/UserDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataProxy.ts","./GameDatas.ts","./GameUtility.ts","./AccountDataManager.ts"],(function(e){var t,r,n,i,s,u;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy},function(e){n=e.default},function(e){i=e.GameDatas},function(e){s=e.default},function(e){u=e.default}],execute:function(){r._RF.push({},"3fed9lS80RFhZL7C6hx3HDK","UserDataManager",void 0);var a=e("RechargeRecord",(function(){this.year=0,this.month=0,this.day=0,this.value=0})),o=e("UserData",(function(){this.vip=!1,this.golds=0,this.diamond=0,this.experience=0,this.level=1,this.hero_experience=0,this.power=0,this.lottery=0,this.verification=null,this.recharge_records=[],this.replenish_energy_counts=[],this.idle_reward_record=0}));e("UserUpgradeConfig",(function(){this.level=0,this.experience=0,this.energy=0,this.diamond=0}));e("default",function(){function e(){this.user=null,this.upgrade_configs=[],this.USER_MAX_LEVEL=100}var r=e.prototype;return r.LoadConfig=function(){var e=this;n.OnLoad("configs/user_upgrade",(function(t){e.upgrade_configs=t}))},r.InitData=function(e){if(console.log("Init User"),this.user=n.OnRead(i.Constant.USER_DATA),this.user)e&&(this.user.replenish_energy_counts=[3,1],this.user.lottery=10);else{var t=(new Date).getTime();this.user=new o,0!=u.stage&&(this.user.golds=1e10,this.user.hero_experience=1e7,1==u.stage?this.user.diamond=500:2==u.stage?this.user.diamond=2e3:3==u.stage&&(this.user.diamond=1e4)),this.user.level=1,this.user.experience=0,this.user.idle_reward_record=t,this.user.lottery=10,this.user.replenish_energy_counts=[3,1],this.user.recharge_records=[],this.user.vip=!1}console.log(this.user)},r.GetGoldString=function(){return s.FormateNumber(this.user.golds)},r.GetDiamondString=function(){return s.FormateNumber(this.user.diamond)},r.GetHeroExperienceString=function(){return s.FormateNumber(this.user.hero_experience)},r.GetEnergyReplenishCounts=function(){return this.user.replenish_energy_counts},r.SetEnergyReplenishCount=function(e){this.user.replenish_energy_counts[e-1]--,this.Save()},r.GetMaxEnergy=function(){return this.GetUpgradeConfig(this.user.level).energy},r.GetUpgradeConfig=function(e){return this.upgrade_configs.find((function(t){return t.level==e}))},r.AddExperience=function(e,t){var r=0;this.user.experience+=e;for(var n=this.GetUpgradeConfig(this.user.level);this.user.experience>n.experience;)this.user.experience-=n.experience,this.user.level++,r++,n=this.GetUpgradeConfig(this.user.level);this.Save(),r>0&&t&&t(r)},r.SetIdentityCard=function(e,t){this.user.verification={name:e,numbers:t},this.Save()},r.GetAgeStage=function(e){var t=0,r=e||this.user.verification.numbers,n=this.GetRealAge(r);return n<=8?t=3:n<=16?t=2:n<=18&&(t=1),t},r.GetRealAge=function(e){var t=parseInt(e.substring(6,10)),r=parseInt(e.substring(10,12)),n=parseInt(e.substring(12,14)),i=new Date,s=i.getFullYear(),u=i.getMonth()+1,a=i.getDate(),o=s-t;return(u<r||u==r&&a<n)&&(o-=1),o},r.CheckMinorEntrance=function(){if(!this.user.verification)return!1;var e=new Date,t=this.GetAgeStage();return 0==t||1==t&&e.getDay()>=5&&20==e.getHours()},r.GetRechargeRecord=function(e){for(var t=0,r=new Date,n=r.getFullYear(),i=r.getMonth()+1,s=r.getDate(),u=0;u<this.user.recharge_records.length;++u){var a=this.user.recharge_records[u];a.year==n&&a.month==i&&(1==e?a.day==s&&(t+=a.value):2==e&&(t+=a.value))}return t},r.CheckTopUp=function(e){var t=this.GetRechargeRecord(1),r=this.GetRechargeRecord(2),n=this.GetAgeStage(),i="success";if(3==n?i="用户未满8周岁，无法进行充值服务":2==n?t>50?i="用户未满16周岁，单日充值上限为50元":r>200&&(i="用户未满16周岁，每月充值上限为200元"):1==n&&(t>100?i="用户未满18周岁，单日充值上限为100元":r>400&&(i="用户未满18周岁，每月充值上限为400元")),"success"==i){var s=new a,u=new Date;s.year=u.getFullYear(),s.month=u.getMonth()+1,s.day=u.getDate(),s.value=e,this.user.recharge_records.push(s),this.Save()}return i},r.Save=function(){n.OnSave(i.Constant.USER_DATA,this.user)},t(e,[{key:"VIP",get:function(){return this.user.vip},set:function(e){this.user.vip=e,this.Save()}},{key:"Golds",get:function(){return this.user.golds},set:function(e){this.user.golds=e,this.Save()}},{key:"Diamond",get:function(){return this.user.diamond},set:function(e){this.user.diamond=e,this.Save()}},{key:"Level",get:function(){return this.user.level}},{key:"Experience",get:function(){return this.user.experience}},{key:"IdleRewardRecord",get:function(){return this.user.idle_reward_record},set:function(e){this.user.idle_reward_record=e,this.Save()}},{key:"HeroExperience",get:function(){return this.user.hero_experience},set:function(e){this.user.hero_experience=e,this.Save()}},{key:"Verification",get:function(){return this.user.verification}},{key:"Lottery",get:function(){return this.user.lottery},set:function(e){this.user.lottery=e,this.Save()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/UserInfoLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnergyManager.ts","./GameUtility.ts","./UiManager.ts","./GameDatas.ts","./UserDataManager.ts","./GameOption.ts"],(function(n){var e,t,i,r,o,a,l,c,u,s,f,g,p,d,y,h,b;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,l=n.Label,c=n.Sprite,u=n.Widget,s=n.Component},function(n){f=n.default},function(n){g=n.default},function(n){p=n.default},function(n){d=n.GameDatas},function(n){y=n.default},function(n){h=n.default,b=n.AudioClips}],execute:function(){var m,S,C,w,v,E,P,L,O,G,I,z,R,x,D;o._RF.push({},"30db5SCNuVEx61JpnQzrQZh","UserInfoLayer",void 0);var U=a.ccclass,_=a.property;n("default",(m=U("UserInfoLayer"),S=_(l),C=_(l),w=_(l),v=_(l),E=_(c),P=_(l),m((G=e((O=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o))||this,i(e,"level",G,r(e)),i(e,"gold",I,r(e)),i(e,"diamond",z,r(e)),i(e,"energy",R,r(e)),i(e,"experience",x,r(e)),i(e,"countdown",D,r(e)),e.page=null,e}t(e,n);var o=e.prototype;return o.Init=function(n){this.page=n,this.getComponent(u).top=p.instance.widescreen?60:0},o.OnActivate=function(){this.SetEnergy(f.instance.energy),f.instance.On("energy",this.SetEnergy.bind(this)),f.instance.On("timer",this.SetCountdown.bind(this)),this.Refresh()},o.SetEnergy=function(n){console.log("set energy",n),this.energy.string=n.toString()},o.SetCountdown=function(n){n<=0?this.countdown.node.active=!1:(this.countdown.string=g.FormateTime(n),this.countdown.node.active=!0)},o.Refresh=function(){this.level.string=y.instance.Level.toString();var n=y.instance.GetUpgradeConfig(y.instance.Level);this.experience.fillRange=y.instance.Experience/n.experience,this.gold.string=g.FormateNumber(y.instance.Golds),this.diamond.string=g.FormateNumber(y.instance.Diamond)},o.OnRecycle=function(){f.instance.Off("energy",this.SetEnergy.bind(this)),f.instance.Off("timer",this.SetCountdown.bind(this))},o.ClickOnSetting=function(){h.instance.PlaySound(b.CLICK),console.log("Click On Setting"),p.instance.ShowPopup(d.Pages.SETTING_PAGE)},o.ClickOnEnergy=function(){h.instance.PlaySound(b.CLICK),console.log("Click On Setting"),p.instance.ShowPopup(d.Pages.REPLENISH_ENERGY_PAGE)},o.ClickOnCurrency=function(){h.instance.PlaySound(b.CLICK),this.page.JumpToPanel(4)},e}(s)).prototype,"level",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(O.prototype,"gold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(O.prototype,"diamond",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(O.prototype,"energy",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(O.prototype,"experience",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(O.prototype,"countdown",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=O))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/UserUpgradePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GenericItem.ts","./UserDataManager.ts","./UiManager.ts","./ItemDataProxy.ts","./GameOption.ts"],(function(e){var t,n,i,r,a,o,s,c,l,u,f,g,p,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.UITransform,c=e.Label},function(e){l=e.default},function(e){u=e.default},function(e){f=e.default},function(e){g=e.default},function(e){p=e.ItemData},function(e){d=e.default,h=e.AudioClips}],execute:function(){var v,y,b,m,U,w,P,C,D,I,S;a._RF.push({},"cde55L96aRDvpYakVpETI7P","UserUpgradePage",void 0);var z=o.ccclass,L=o.property;e("default",(v=z("UserUpgradePage"),y=L(s),b=L([c]),m=L([c]),U=L(u),v((C=t((P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"content",C,r(t)),i(t,"levels",D,r(t)),i(t,"energies",I,r(t)),i(t,"reward",S,r(t)),t.addition=0,t}n(t,e);var a=t.prototype;return a.Show=function(){e.prototype.Show.call(this),this.addition=this.args,this.Refresh(),this.OnEntrance(this.content)},a.Refresh=function(){var e=f.instance.Level,t=e-this.addition;this.levels[0].string=t.toString(),this.levels[1].string=e.toString();var n=f.instance.GetUpgradeConfig(t),i=f.instance.GetUpgradeConfig(e);this.energies[0].string=n.energy.toString(),this.energies[1].string=i.energy.toString();var r=new p;r.id=1003;for(var a=t;a<e;++a){var o=f.instance.GetUpgradeConfig(a);r.count+=o.diamond}f.instance.Diamond+=r.count,this.reward.Init(r)},a.ClickOnClose=function(){var e=this;this.is_action||(d.instance.PlaySound(h.CLICK),this.OnExit(this.content,(function(){g.instance.ClosePage(e)})))},t}(l)).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(P.prototype,"levels",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(P.prototype,"energies",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(P.prototype,"reward",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/VictoryPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./GenericItem.ts","./LevelDataManager.ts","./GameUtility.ts","./DataProxy.ts","./ItemDataProxy.ts","./UiManager.ts","./UserDataManager.ts","./MissionDataManager.ts","./GameDatas.ts","./JourneyDataManager.ts","./GuideDataManager.ts","./GameOption.ts"],(function(t){var i,e,s,a,n,r,c,o,u,l,h,f,d,g,p,G,S,v,y,w,b,m,L,x;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,c=t.UITransform,o=t.Label,u=t.Sprite},function(t){l=t.default},function(t){h=t.default},function(t){f=t.default,d=t.LevelGoals},function(t){g=t.default},function(t){p=t.default},function(t){G=t.default},function(t){S=t.default},function(t){v=t.default},function(t){y=t.default},function(t){w=t.GameDatas},function(t){b=t.default},function(t){m=t.default},function(t){L=t.default,x=t.AudioClips}],execute:function(){var _,C,P,D,M,E,z,R,A,k,U,I,O,V,T,F,J;n._RF.push({},"6b93ag479hCnpRghgLUz4rg","VictoryPage",void 0);var B=r.ccclass,H=r.property;t("default",(_=B("VictoryPage"),C=H(c),P=H(o),D=H(u),M=H([u]),E=H([h]),z=H([o]),R=H([u]),_((U=i((k=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,s(i,"content",U,a(i)),s(i,"level",I,a(i)),s(i,"experience",O,a(i)),s(i,"star_images",V,a(i)),s(i,"rewards",T,a(i)),s(i,"goal_description",F,a(i)),s(i,"goal_status",J,a(i)),i.config=null,i.data=null,i.statistics=null,i.stars=0,i}e(i,t);var n=i.prototype;return n.Show=function(){var i=this;t.prototype.Show.call(this),L.instance.PlaySound(x.SUCCESS),this.statistics=f.instance.statistics,this.config=f.instance.GetLevelConfig(this.statistics.stage,this.statistics.chapter,this.statistics.index),this.data=f.instance.GetLevelData(this.config);var e=10*(this.statistics.chapter-1)+this.statistics.index;b.instance.SetJourney(w.JourneyType.PASS_LEVEL,e),2!=this.data.status&&(1==this.statistics.stage?y.instance.SetStoryMission(w.StoryMissionType.EASYLEVEL,e):2==this.statistics.stage&&y.instance.SetStoryMission(w.StoryMissionType.HARDLEVEL,e)),this.CheckGoals(),this.SetStars(),this.SetRewards(),this.Refresh(),f.instance.OnComplete(this.statistics.stage,this.statistics.chapter,this.statistics.index,this.stars),this.OnEntrance(this.content,(function(){i.CheckGuide()}))},n.CheckGuide=function(){if(1==this.statistics.stage&&1==this.statistics.chapter&&1==this.statistics.index){if(4==m.instance.GetGuideStep(5)){var t=m.instance.GetGuide(5,5);S.instance.ShowGuide(t)}}else if(1==this.statistics.stage&&1==this.statistics.chapter&&2==this.statistics.index){if(2==m.instance.GetGuideStep(6)){var i=m.instance.GetGuide(6,3);S.instance.ShowGuide(i)}}else if(1==this.statistics.stage&&1==this.statistics.chapter&&3==this.statistics.index){if(2==m.instance.GetGuideStep(7)){var e=m.instance.GetGuide(7,3);S.instance.ShowGuide(e)}}else if(1==this.statistics.stage&&1==this.statistics.chapter&&4==this.statistics.index){if(2==m.instance.GetGuideStep(8)){var s=m.instance.GetGuide(8,3);S.instance.ShowGuide(s)}}else if(1==this.statistics.stage&&1==this.statistics.chapter&&9==this.statistics.index){if(2==m.instance.GetGuideStep(9)){var a=m.instance.GetGuide(9,3);S.instance.ShowGuide(a)}}else if(1==this.statistics.stage&&1==this.statistics.chapter&&10==this.statistics.index){if(2==m.instance.GetGuideStep(10)){var n=m.instance.GetGuide(10,3);S.instance.ShowGuide(n)}}},n.Refresh=function(){var t=v.instance.GetUpgradeConfig(v.instance.Level);this.experience.fillRange=v.instance.Experience/t.experience,this.level.string=v.instance.Level.toString()},n.CheckGoals=function(){this.stars=0;for(var t=this.config.conditions.split(";"),i=0;i<t.length;++i){var e=p.ConvertString(t[i],","),s=e[0]-1;this.goal_description[i].string=g.FormatString(d[s],e[1]),this.SetGoalStatus(i,e[0],e[1])&&this.stars++}},n.SetGoalStatus=function(t,i,e){var s=!1;return 1==i?s=!0:2==i?s=this.statistics.timer<=e:3==i?s=this.statistics.hp>=e:4==i&&(s=this.statistics.skill>=e),this.goal_status[t].node.active=s,s},n.SetStars=function(){for(var t=0;t<this.star_images.length;++t)this.star_images[t].node.active=t<this.stars},n.SetRewards=function(){var t=f.instance.GetLevelRewards(this.config,this.data.status);console.log("reward_datas",t);for(var i=0;i<this.rewards.length;++i)i<t.length?(this.rewards[i].Init(t[i]),G.instance.OnAddition(t[i])):this.rewards[i].node.active=!1},n.ClickOnClose=function(){L.instance.PlaySound(x.CLOSE),S.instance.ClearPages(),S.instance.ShowLoading("main",(function(){S.instance.ShowBasePage(w.Pages.MAIN_PAGE)}))},i}(l)).prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(k.prototype,"level",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(k.prototype,"experience",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(k.prototype,"star_images",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=i(k.prototype,"rewards",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(k.prototype,"goal_description",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=i(k.prototype,"goal_status",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=k))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/WechatProcessor.ts",["cc","./IProcessor.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.Banner}],execute:function(){t._RF.push({},"df721axXmNEAZ87uwN4pWFn","WechatProcessor",void 0);e("WechatProcessor",function(){function e(e){var t=this;this._info=null,this._recorder=null,this._gide=null,this._custom=null,this._banner=null,this.banners=[],this.banner_index=0,this.wechat=null,this.parameters=null,this.wechat=wx,this._info=this.wechat.getSystemInfoSync(),this.parameters=e,this.wechat.setKeepScreenOn({keepScreenOn:!0}),this._recorder=this.wechat.getGameRecorder(),this._recorder.on("error",(function(e){var n=e.error;n.code===t.wechat.error.GameRecorder_StartWhileAlreadyStartRecording?console.error("录制已经开始"):n.code===t.wechat.error.GameRecorder_StopWhileNotStartRecording&&console.error("录制并未开始")}))}var t=e.prototype;return t.ShowToast=function(e,t,n){void 0===t&&(t="none"),void 0===n&&(n=1500),this.wechat.showToast({title:e,icon:t,duration:n})},t.ShowLoading=function(){this.wechat.showLoading({title:"加载中",mask:!0})},t.HideLoading=function(){this.wechat.hideLoading()},t.ShowVideo=function(e,t){var n=this,o=this.parameters.videos[e];if(o){var i=this.wechat.createRewardedVideoAd({adUnitId:o});i.onError((function(e){n.ShowToast("广告初始化失败"),n.HideLoading(),t&&t(!1)})),this.ShowLoading(),i.load().then((function(){i.show().then((function(){n.HideLoading()})).catch((function(e){console.log(e)}))})),i.onClose((function(e){t&&t(e&&e.isEnded),i.offClose()}))}else console.error("广告位没有配置")},t.ShowInterstitial=function(e,t){var n=this.parameters.interstitials[e];if(n){var o=this.wechat.createInterstitialAd({adUnitId:n});o&&(o.onError((function(e){console.log(e.errMsg||"广告初始化失败"),t&&t(!1)})),o.onLoad((function(){console.log("插屏广告加载成功"),o.show().catch((function(e){console.log(e.errMsg||"广告播放失败"),t&&t(!1)}))})),o.onClose((function(e){t&&t(e&&e.isEnded)})))}else console.error("Interstitial 广告位没有配置")},t.createBanner=function(){var e=this,t=Math.floor(Math.random()*this.parameters.banner.length),o=this.parameters.banner[t],i=new n;i.times=3,i.banner=this.wechat.createBannerAd({adUnitId:o,adIntervals:30,style:{left:(this._info.windowWidth-300)/2,top:.84375*this._info.windowHeight,width:300}}),i.banner.onLoad((function(){console.log("banner 广告加载成功"),e.banners.push(i)})),i.banner.onError((function(e){console.log(e)}))},t.ShowBanner=function(e){var t=.5-e/1280;this.banner_index=Math.floor(Math.random()*this.banners.length),this.banners[this.banner_index].banner.style.top=this._info.windowHeight*t,console.log(this.banners[this.banner_index].banner.style,this._info.windowHeight*t),this.banners[this.banner_index].banner.show()},t.HideBanner=function(){var e=this.banners[this.banner_index];e.banner.hide(),console.log("banner hide"),e.times--,e.times<=0&&(e.banner.destroy(),this.banners.splice(this.banner_index,1)),this.banners.length<3&&this.createBanner()},t.ShowGide=function(e,t,n){var o=this;this._gide&&this._gide.destroy();var i=this.parameters.gide[e];console.log("show gide ",i),i?(this._gide=this.wechat.createGridAd({adUnitId:i,adIntervals:30,adTheme:"white",gridCount:t,style:{left:n.left||0,top:n.top||0,width:n.width||300,opacity:.8}}),this._gide.onLoad((function(){console.log("Grid 广告加载成功"),o._gide.show()}))):console.error("广告位没有配置")},t.HideGide=function(){this._gide&&this._gide.hide()},t.ShowCustom=function(e,t){var n=this,o=this.parameters.custom[e];if(o){if(this._custom){if(this._custom.isShow())return}else this._custom=this.wechat.createCustomAd({adUnitId:o,style:t}),this._custom.onClose((function(){console.log("custome close"),n._custom=null}));this._custom.show().catch((function(e){return console.log(e)}))}else console.error("广告位没有配置")},t.OnCustom=function(){},t.HideCustom=function(){this._custom&&(this._custom.onHide((function(){console.log("custome hide")})),this._custom.hide())},t.OnRecorderScreen=function(e){if(this._recorder&&this._recorder.isFrameSupported())if("start"==e){var t={fps:24,duration:30,bitrate:1e3,gop:12,hookBgm:!1};t.hookBgm=this._recorder.isSoundSupported(),this._recorder.start(t)}else"stop"==e?this._recorder.stop():"pause"==e?this._recorder.pause():"resume"==e&&this._recorder.resume()},t.ShareRecordScreen=function(e){if(this._recorder){var t={title:"了不起的挑战",desc:e};this.wechat.operateGameRecorderVideo(t)}},t.OnVibrateShort=function(e){this.wechat.vibrateShort({type:e})},t.OnVibrateLong=function(){this.wechat.vibrateLong()},e}());t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});